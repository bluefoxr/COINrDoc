--- 
title: "COINr: An R Package for Composite Indicator Development and Analysis"
author: "William Becker"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
output: bookdown::gitbook
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
github-repo: rstudio/bookdown-demo
description: "COINr Documentation"
---

```{r, setup, include=FALSE}
knitr::opts_chunk$set(fig.width = 8, collapse = TRUE, warning = FALSE)
```

# Overview

This documentation describes in detail the COINr package, which is an open source R package for developing and analysing composite indicators. In fact, this is slightly more than technical documentation, and also gives some tips on composite indicator development along the way.

COINr is currently still under development, therefore the package itself, and this documentation, are a work in progress but are being continually updated. You can find the latest version of COINr at its [GitHub repo](https://github.com/bluefoxr/COINr), and also the source code for this documentation [here](https://github.com/bluefoxr/COINrDoc).

## Installation

Although COINr is under development, but a limited pre-beta version can be installed via Github. First, install the `devtools` package if you don't already have it, then run:

```{r eval=FALSE}
devtools::install_github("bluefoxr/COINr")
```

This should directly install the package from Github, without any other steps. You may be asked to update packages. This might not be strictly necessary, so you can also skip this step.

It should go without saying that as a non-even-beta version of the package, this is made available more as a preview than anything else. Many functions will work, but bugs are likely in many places. In case you do spot a bug, or have a suggestion, the best way is to [open an issue](https://github.com/bluefoxr/COINr/issues) on the repo. Otherwise, you can also just [email me](mailto:william.becker@bluefoxdata.eu).

## What's it for?

COINr is the first fully-flexible development and analysis environment for composite indicators and scoreboards. It allows:

* Flexible and fast development of composite indicators with no limits on aggregation levels, numbers of indicators, highly flexible set of methodological choices.

* In-depth statistical analysis of indicators and results, including multivariate analysis, statistical reweighting, uncertainty and sensitivity analysis, etc.

* Interactive data exploration and visualisation via Shiny apps which can be hosted online. HTML widgets for incorporation in interactive markdown documents.

## Quick-start guide

COINr is highly customisable, but equally allows composite indicator construction in a few commands. Taking the built-in ASEM dataset, we can assemble a composite indicator in a few steps.

```{r, collapse=T}
library(COINr)

# assemble basic composite indicator object from input data
ASEM <- assemble(IndData = ASEMIndData,
                 IndMeta = ASEMIndMeta,
                 AggMeta = ASEMAggMeta)
# denominate data using specifications in ASEMIndMeta
ASEM <- denominate(ASEM)
# normalise data
ASEM <- normalise(ASEM, dset = "Denominated")
# Aggregate normalised data
ASEM <- aggregate(ASEM, dset = "Normalised")

```

At this point, the dashboard for viewing the results interactively is still under development. Still, we can view a number of things. First, we may want to see the index structure:

```{r, warning=F, message=F}
plotframework(ASEM)
```

This is an interactive "HTML widget" which can be embedded into HTML documents (such as this page). We can also analyse indicator statistics:

```{r, warning=F, message=F}
library(reactable)
library(magrittr)
ASEM <- getStats(ASEM, dset = "Raw")
ASEM$Analysis$Raw$StatTable %>%
  reactable::reactable(defaultPageSize = 5, highlight = TRUE, wrap = F)
```

plot indicator distributions,

```{r, warning=F, message=F}
plotIndDist(ASEM, type = "Violindot", icodes = "Political")
```

and visualise and explore overall results in an interactive dashboard

```{r echo=F, fig.align = 'center', out.width = "100%", fig.cap = "Results dashboard screenshot"}
knitr::include_graphics("images/demo_resultsdash.png")
```

COINr has, or will have, many more features. Among those that are already implemented and in various stages of testing:

* Unlimited indicators, units, aggregation levels
* Denomination of indicators
* Indicator visualisation via static plots and dashboards
* Indicator statistics and missing data analysis
* Imputation of missing data via various methods
* Outlier analysis and treatment
* Normalisation via various methods
* Aggregation of indicators via various methods
* Multivariate analysis (PCA) and correlation analysis
* Interactive re-weighting
* Export to Excel

And those that will be included soon, among others:

* Automatic re-weighting
* Grouping units by e.g. income groups, size groups
* Support for panel data, i.e. indexes for multiple years
* What-if experiments, comparing alternative versions of the index
* Sensitivity analysis, robustness to methodological assumptions, weights, etc.
* Import/export to the [COIN Tool](https://composite-indicators.jrc.ec.europa.eu/?q=coin-tool)
