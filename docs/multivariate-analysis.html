<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Multivariate analysis | Composite Indicator Development and Analysis in R with COINr</title>
  <meta name="description" content="Composite indicators with COINr" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Multivariate analysis | Composite Indicator Development and Analysis in R with COINr" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Composite indicators with COINr" />
  <meta name="github-repo" content="bluefoxr/COINrDoc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Multivariate analysis | Composite Indicator Development and Analysis in R with COINr" />
  
  <meta name="twitter:description" content="Composite indicators with COINr" />
  

<meta name="author" content="William Becker" />


<meta name="date" content="2021-06-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="initial-visualisation-and-analysis.html"/>
<link rel="next" href="missing-data-and-imputation.html"/>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-16.12.0/react.min.js"></script>
<script src="libs/react-16.12.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="libs/reactable-binding-0.2.3/reactable.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">COINr Documentation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#whats-it-for"><i class="fa fa-check"></i><b>1.3</b> What’s it for?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#demo"><i class="fa fa-check"></i><b>1.4</b> Demo</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#features-and-status"><i class="fa fa-check"></i><b>1.5</b> Features and status</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="foundations.html"><a href="foundations.html"><i class="fa fa-check"></i><b>2</b> Foundations</a><ul>
<li class="chapter" data-level="2.1" data-path="foundations.html"><a href="foundations.html#how-to-use-coinr"><i class="fa fa-check"></i><b>2.1</b> How to use COINr</a></li>
<li class="chapter" data-level="2.2" data-path="foundations.html"><a href="foundations.html#suggested-workflows"><i class="fa fa-check"></i><b>2.2</b> Suggested workflows</a></li>
<li class="chapter" data-level="2.3" data-path="foundations.html"><a href="foundations.html#a-map-of-coinr"><i class="fa fa-check"></i><b>2.3</b> A map of COINr</a><ul>
<li class="chapter" data-level="2.3.1" data-path="foundations.html"><a href="foundations.html#construction"><i class="fa fa-check"></i><b>2.3.1</b> Construction</a></li>
<li class="chapter" data-level="2.3.2" data-path="foundations.html"><a href="foundations.html#visualisation"><i class="fa fa-check"></i><b>2.3.2</b> Visualisation</a></li>
<li class="chapter" data-level="2.3.3" data-path="foundations.html"><a href="foundations.html#analysis"><i class="fa fa-check"></i><b>2.3.3</b> Analysis</a></li>
<li class="chapter" data-level="2.3.4" data-path="foundations.html"><a href="foundations.html#interactive-apps"><i class="fa fa-check"></i><b>2.3.4</b> Interactive apps</a></li>
<li class="chapter" data-level="2.3.5" data-path="foundations.html"><a href="foundations.html#importexport"><i class="fa fa-check"></i><b>2.3.5</b> Import/export</a></li>
<li class="chapter" data-level="2.3.6" data-path="foundations.html"><a href="foundations.html#other-functions"><i class="fa fa-check"></i><b>2.3.6</b> Other functions</a></li>
<li class="chapter" data-level="2.3.7" data-path="foundations.html"><a href="foundations.html#data"><i class="fa fa-check"></i><b>2.3.7</b> Data</a></li>
<li class="chapter" data-level="2.3.8" data-path="foundations.html"><a href="foundations.html#finally"><i class="fa fa-check"></i><b>2.3.8</b> Finally</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="foundations.html"><a href="foundations.html#terminology"><i class="fa fa-check"></i><b>2.4</b> Terminology</a></li>
<li class="chapter" data-level="2.5" data-path="foundations.html"><a href="foundations.html#levels"><i class="fa fa-check"></i><b>2.5</b> Levels</a></li>
<li class="chapter" data-level="2.6" data-path="foundations.html"><a href="foundations.html#tips-for-using-coinr"><i class="fa fa-check"></i><b>2.6</b> Tips for using COINr</a><ul>
<li class="chapter" data-level="2.6.1" data-path="foundations.html"><a href="foundations.html#missing-data"><i class="fa fa-check"></i><b>2.6.1</b> Missing data</a></li>
<li class="chapter" data-level="2.6.2" data-path="foundations.html"><a href="foundations.html#ordering"><i class="fa fa-check"></i><b>2.6.2</b> Ordering</a></li>
<li class="chapter" data-level="2.6.3" data-path="foundations.html"><a href="foundations.html#syntax"><i class="fa fa-check"></i><b>2.6.3</b> Syntax</a></li>
<li class="chapter" data-level="2.6.4" data-path="foundations.html"><a href="foundations.html#plotting"><i class="fa fa-check"></i><b>2.6.4</b> Plotting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html"><i class="fa fa-check"></i><b>3</b> COINs: the currency of COINr</a><ul>
<li class="chapter" data-level="3.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#the-three-inputs"><i class="fa fa-check"></i><b>3.2</b> The three inputs</a><ul>
<li class="chapter" data-level="3.2.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-data"><i class="fa fa-check"></i><b>3.2.1</b> Indicator data</a></li>
<li class="chapter" data-level="3.2.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-metadata"><i class="fa fa-check"></i><b>3.2.2</b> Indicator metadata</a></li>
<li class="chapter" data-level="3.2.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#aggregation-metadata"><i class="fa fa-check"></i><b>3.2.3</b> Aggregation metadata</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#putting-everything-together"><i class="fa fa-check"></i><b>3.3</b> Putting everything together</a></li>
<li class="chapter" data-level="3.4" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#moving-on"><i class="fa fa-check"></i><b>3.4</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html"><i class="fa fa-check"></i><b>4</b> Initial visualisation and analysis</a><ul>
<li class="chapter" data-level="4.1" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#structure"><i class="fa fa-check"></i><b>4.1</b> Structure</a></li>
<li class="chapter" data-level="4.2" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#distributions"><i class="fa fa-check"></i><b>4.2</b> Distributions</a></li>
<li class="chapter" data-level="4.3" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#ranks-and-maps"><i class="fa fa-check"></i><b>4.3</b> Ranks and Maps</a></li>
<li class="chapter" data-level="4.4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#statistics-and-analysis"><i class="fa fa-check"></i><b>4.4</b> Statistics and analysis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html"><i class="fa fa-check"></i><b>5</b> Multivariate analysis</a><ul>
<li class="chapter" data-level="5.1" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#correlations"><i class="fa fa-check"></i><b>5.1</b> Correlations</a></li>
<li class="chapter" data-level="5.2" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#pca"><i class="fa fa-check"></i><b>5.2</b> PCA</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html"><i class="fa fa-check"></i><b>6</b> Missing data and Imputation</a><ul>
<li class="chapter" data-level="6.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#concept"><i class="fa fa-check"></i><b>6.1</b> Concept</a></li>
<li class="chapter" data-level="6.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#data-checks-and-screening"><i class="fa fa-check"></i><b>6.2</b> Data checks and screening</a></li>
<li class="chapter" data-level="6.3" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#imputation-in-coinr"><i class="fa fa-check"></i><b>6.3</b> Imputation in COINr</a><ul>
<li class="chapter" data-level="6.3.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-column"><i class="fa fa-check"></i><b>6.3.1</b> By column</a></li>
<li class="chapter" data-level="6.3.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-row"><i class="fa fa-check"></i><b>6.3.2</b> By row</a></li>
<li class="chapter" data-level="6.3.3" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-column-and-row"><i class="fa fa-check"></i><b>6.3.3</b> By column and row</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="denomination.html"><a href="denomination.html"><i class="fa fa-check"></i><b>7</b> Denomination</a><ul>
<li class="chapter" data-level="7.1" data-path="denomination.html"><a href="denomination.html#concept-1"><i class="fa fa-check"></i><b>7.1</b> Concept</a></li>
<li class="chapter" data-level="7.2" data-path="denomination.html"><a href="denomination.html#denominating-in-coinr"><i class="fa fa-check"></i><b>7.2</b> Denominating in COINr</a><ul>
<li class="chapter" data-level="7.2.1" data-path="denomination.html"><a href="denomination.html#on-coins"><i class="fa fa-check"></i><b>7.2.1</b> On COINs</a></li>
<li class="chapter" data-level="7.2.2" data-path="denomination.html"><a href="denomination.html#on-data-frames"><i class="fa fa-check"></i><b>7.2.2</b> On data frames</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="denomination.html"><a href="denomination.html#when-to-denominate-and-by-what"><i class="fa fa-check"></i><b>7.3</b> When to denominate, and by what?</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-treatment.html"><a href="data-treatment.html"><i class="fa fa-check"></i><b>8</b> Data Treatment</a><ul>
<li class="chapter" data-level="8.1" data-path="data-treatment.html"><a href="data-treatment.html#why-treat-data"><i class="fa fa-check"></i><b>8.1</b> Why treat data?</a></li>
<li class="chapter" data-level="8.2" data-path="data-treatment.html"><a href="data-treatment.html#how-to-treat-data"><i class="fa fa-check"></i><b>8.2</b> How to treat data</a><ul>
<li class="chapter" data-level="8.2.1" data-path="data-treatment.html"><a href="data-treatment.html#winsorisation"><i class="fa fa-check"></i><b>8.2.1</b> Winsorisation</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-treatment.html"><a href="data-treatment.html#transformation"><i class="fa fa-check"></i><b>8.2.2</b> Transformation</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-treatment.html"><a href="data-treatment.html#data-treatment-in-coinr"><i class="fa fa-check"></i><b>8.3</b> Data treatment in COINr</a><ul>
<li class="chapter" data-level="8.3.1" data-path="data-treatment.html"><a href="data-treatment.html#global-treatment"><i class="fa fa-check"></i><b>8.3.1</b> Global treatment</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-treatment.html"><a href="data-treatment.html#individual-treatment"><i class="fa fa-check"></i><b>8.3.2</b> Individual treatment</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-treatment.html"><a href="data-treatment.html#interactive-visualisation"><i class="fa fa-check"></i><b>8.4</b> Interactive visualisation</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="normalisation.html"><a href="normalisation.html"><i class="fa fa-check"></i><b>9</b> Normalisation</a><ul>
<li class="chapter" data-level="9.1" data-path="normalisation.html"><a href="normalisation.html#approaches"><i class="fa fa-check"></i><b>9.1</b> Approaches</a><ul>
<li class="chapter" data-level="9.1.1" data-path="normalisation.html"><a href="normalisation.html#first-adjust-direction"><i class="fa fa-check"></i><b>9.1.1</b> First: adjust direction</a></li>
<li class="chapter" data-level="9.1.2" data-path="normalisation.html"><a href="normalisation.html#linear-transformations"><i class="fa fa-check"></i><b>9.1.2</b> Linear transformations</a></li>
<li class="chapter" data-level="9.1.3" data-path="normalisation.html"><a href="normalisation.html#nonlinear-transformations"><i class="fa fa-check"></i><b>9.1.3</b> Nonlinear transformations</a></li>
<li class="chapter" data-level="9.1.4" data-path="normalisation.html"><a href="normalisation.html#distances"><i class="fa fa-check"></i><b>9.1.4</b> Distances</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="normalisation.html"><a href="normalisation.html#normalisation-in-coinr"><i class="fa fa-check"></i><b>9.2</b> Normalisation in COINr</a></li>
<li class="chapter" data-level="9.3" data-path="normalisation.html"><a href="normalisation.html#individual-normalisation"><i class="fa fa-check"></i><b>9.3</b> Individual normalisation</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="aggregation.html"><a href="aggregation.html"><i class="fa fa-check"></i><b>10</b> Aggregation</a><ul>
<li class="chapter" data-level="10.1" data-path="aggregation.html"><a href="aggregation.html#weighting"><i class="fa fa-check"></i><b>10.1</b> Weighting</a></li>
<li class="chapter" data-level="10.2" data-path="aggregation.html"><a href="aggregation.html#approaches-1"><i class="fa fa-check"></i><b>10.2</b> Approaches</a><ul>
<li class="chapter" data-level="10.2.1" data-path="aggregation.html"><a href="aggregation.html#means"><i class="fa fa-check"></i><b>10.2.1</b> Means</a></li>
<li class="chapter" data-level="10.2.2" data-path="aggregation.html"><a href="aggregation.html#other-methods"><i class="fa fa-check"></i><b>10.2.2</b> Other methods</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="aggregation.html"><a href="aggregation.html#aggregation-in-coinr"><i class="fa fa-check"></i><b>10.3</b> Aggregation in COINr</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="weighting-1.html"><a href="weighting-1.html"><i class="fa fa-check"></i><b>11</b> Weighting</a><ul>
<li class="chapter" data-level="11.1" data-path="weighting-1.html"><a href="weighting-1.html#approaches-to-weighting"><i class="fa fa-check"></i><b>11.1</b> Approaches to weighting</a><ul>
<li class="chapter" data-level="11.1.1" data-path="weighting-1.html"><a href="weighting-1.html#equal-weighting"><i class="fa fa-check"></i><b>11.1.1</b> Equal weighting</a></li>
<li class="chapter" data-level="11.1.2" data-path="weighting-1.html"><a href="weighting-1.html#budget-allocation"><i class="fa fa-check"></i><b>11.1.2</b> Budget allocation</a></li>
<li class="chapter" data-level="11.1.3" data-path="weighting-1.html"><a href="weighting-1.html#principle-component-analysis"><i class="fa fa-check"></i><b>11.1.3</b> Principle component analysis</a></li>
<li class="chapter" data-level="11.1.4" data-path="weighting-1.html"><a href="weighting-1.html#weight-optimisation"><i class="fa fa-check"></i><b>11.1.4</b> Weight optimisation</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="weighting-1.html"><a href="weighting-1.html#weighting-tools-in-coinr"><i class="fa fa-check"></i><b>11.2</b> Weighting tools in COINr</a><ul>
<li class="chapter" data-level="11.2.1" data-path="weighting-1.html"><a href="weighting-1.html#manual-weighting"><i class="fa fa-check"></i><b>11.2.1</b> Manual weighting</a></li>
<li class="chapter" data-level="11.2.2" data-path="weighting-1.html"><a href="weighting-1.html#interactive-re-weighting-with-rew8r"><i class="fa fa-check"></i><b>11.2.2</b> Interactive re-weighting with ReW8R</a></li>
<li class="chapter" data-level="11.2.3" data-path="weighting-1.html"><a href="weighting-1.html#automatic-re-weighting"><i class="fa fa-check"></i><b>11.2.3</b> Automatic re-weighting</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="weighting-1.html"><a href="weighting-1.html#effective-weights"><i class="fa fa-check"></i><b>11.3</b> Effective weights</a></li>
<li class="chapter" data-level="11.4" data-path="weighting-1.html"><a href="weighting-1.html#final-points"><i class="fa fa-check"></i><b>11.4</b> Final points</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="visualising-results.html"><a href="visualising-results.html"><i class="fa fa-check"></i><b>12</b> Visualising results</a><ul>
<li class="chapter" data-level="12.1" data-path="visualising-results.html"><a href="visualising-results.html#tables"><i class="fa fa-check"></i><b>12.1</b> Tables</a></li>
<li class="chapter" data-level="12.2" data-path="visualising-results.html"><a href="visualising-results.html#plots"><i class="fa fa-check"></i><b>12.2</b> Plots</a></li>
<li class="chapter" data-level="12.3" data-path="visualising-results.html"><a href="visualising-results.html#interactive-exploration"><i class="fa fa-check"></i><b>12.3</b> Interactive exploration</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html"><i class="fa fa-check"></i><b>13</b> Adjustments and comparisons</a><ul>
<li class="chapter" data-level="13.1" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#regeneration"><i class="fa fa-check"></i><b>13.1</b> Regeneration</a></li>
<li class="chapter" data-level="13.2" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#adjustments"><i class="fa fa-check"></i><b>13.2</b> Adjustments</a><ul>
<li class="chapter" data-level="13.2.1" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#addingremoving-indicators"><i class="fa fa-check"></i><b>13.2.1</b> Adding/removing indicators</a></li>
<li class="chapter" data-level="13.2.2" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#other-adjustments"><i class="fa fa-check"></i><b>13.2.2</b> Other adjustments</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#comparisons"><i class="fa fa-check"></i><b>13.3</b> Comparisons</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html"><i class="fa fa-check"></i><b>14</b> Sensitivity analysis</a><ul>
<li class="chapter" data-level="14.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#about"><i class="fa fa-check"></i><b>14.1</b> About</a></li>
<li class="chapter" data-level="14.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#five-steps"><i class="fa fa-check"></i><b>14.2</b> Five steps</a><ul>
<li class="chapter" data-level="14.2.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#specifying-the-model"><i class="fa fa-check"></i><b>14.2.1</b> Specifying the model</a></li>
<li class="chapter" data-level="14.2.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#which-assumptions-to-vary"><i class="fa fa-check"></i><b>14.2.2</b> Which assumptions to vary</a></li>
<li class="chapter" data-level="14.2.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#alternative-values"><i class="fa fa-check"></i><b>14.2.3</b> Alternative values</a></li>
<li class="chapter" data-level="14.2.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#selecting-the-output"><i class="fa fa-check"></i><b>14.2.4</b> Selecting the output</a></li>
<li class="chapter" data-level="14.2.5" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#sa-methodology"><i class="fa fa-check"></i><b>14.2.5</b> SA methodology</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#sensitivity-in-coinr"><i class="fa fa-check"></i><b>14.3</b> Sensitivity in COINr</a><ul>
<li class="chapter" data-level="14.3.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#general-specifications"><i class="fa fa-check"></i><b>14.3.1</b> General specifications</a></li>
<li class="chapter" data-level="14.3.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#varying-weights"><i class="fa fa-check"></i><b>14.3.2</b> Varying weights</a></li>
<li class="chapter" data-level="14.3.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#running-an-uncertainty-analysis"><i class="fa fa-check"></i><b>14.3.3</b> Running an uncertainty analysis</a></li>
<li class="chapter" data-level="14.3.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#running-a-sensitivity-analysis"><i class="fa fa-check"></i><b>14.3.4</b> Running a sensitivity analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="helper-functions.html"><a href="helper-functions.html"><i class="fa fa-check"></i><b>15</b> Helper functions</a><ul>
<li class="chapter" data-level="15.1" data-path="helper-functions.html"><a href="helper-functions.html#r-interfaces"><i class="fa fa-check"></i><b>15.1</b> R Interfaces</a><ul>
<li class="chapter" data-level="15.1.1" data-path="helper-functions.html"><a href="helper-functions.html#data-import"><i class="fa fa-check"></i><b>15.1.1</b> Data import</a></li>
<li class="chapter" data-level="15.1.2" data-path="helper-functions.html"><a href="helper-functions.html#export-to-excel"><i class="fa fa-check"></i><b>15.1.2</b> Export to Excel</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="helper-functions.html"><a href="helper-functions.html#selecting-data-sets-and-indicators"><i class="fa fa-check"></i><b>15.2</b> Selecting data sets and indicators</a></li>
<li class="chapter" data-level="15.3" data-path="helper-functions.html"><a href="helper-functions.html#rounding-data-frames"><i class="fa fa-check"></i><b>15.3</b> Rounding data frames</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html"><i class="fa fa-check"></i><b>16</b> Appendix: R Resources</a><ul>
<li class="chapter" data-level="16.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#introduction-to-r"><i class="fa fa-check"></i><b>16.1</b> Introduction to R</a></li>
<li class="chapter" data-level="16.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#advanced-resources"><i class="fa fa-check"></i><b>16.2</b> Advanced resources</a><ul>
<li class="chapter" data-level="16.2.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#programming"><i class="fa fa-check"></i><b>16.2.1</b> Programming</a></li>
<li class="chapter" data-level="16.2.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#visualisation-1"><i class="fa fa-check"></i><b>16.2.2</b> Visualisation</a></li>
<li class="chapter" data-level="16.2.3" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#other"><i class="fa fa-check"></i><b>16.2.3</b> Other</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>17</b> Acknowledgements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Composite Indicator Development and Analysis in R with COINr</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="multivariate-analysis" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Multivariate analysis</h1>
<p>Correlations, and other relationships between indicators, can help to understand the structure of the data and to see whether indicators are redundant or are mistakenly encoded.</p>
<div id="correlations" class="section level2">
<h2><span class="header-section-number">5.1</span> Correlations</h2>
<p>Correlations are a measure of <em>statistical dependence</em> between one variable and another. Often, what is meant by “correlation”, is the <a href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient">Pearson correlation coefficient</a>, which is a measure of <em>linear</em> dependence between two variables.</p>
<p>It’s worth spending a moment to consider what this the implication of the “linear” part actually means. Consider the following example:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="multivariate-analysis.html#cb21-1"></a><span class="co"># numbers in [-1, 1]</span></span>
<span id="cb21-2"><a href="multivariate-analysis.html#cb21-2"></a>x1 &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">0.1</span>)</span>
<span id="cb21-3"><a href="multivariate-analysis.html#cb21-3"></a><span class="co"># x2 is a function of x1</span></span>
<span id="cb21-4"><a href="multivariate-analysis.html#cb21-4"></a>x2 &lt;-<span class="st"> </span>x1<span class="op">^</span><span class="dv">2</span></span>
<span id="cb21-5"><a href="multivariate-analysis.html#cb21-5"></a><span class="co"># plot</span></span>
<span id="cb21-6"><a href="multivariate-analysis.html#cb21-6"></a><span class="kw">library</span>(ggplot2)</span>
<span id="cb21-7"><a href="multivariate-analysis.html#cb21-7"></a><span class="kw">qplot</span>(x1, x2)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-18-1.png" width="768" /></p>
<p>Now, clearly there is a very strong relationship between x1 and x2. In fact, x2 is completely dependent on x2 (there are no other variables or noise that control its values). So what happens if we check the correlation?</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="multivariate-analysis.html#cb22-1"></a><span class="kw">cor</span>(x1, x2, <span class="dt">method =</span> <span class="st">&quot;pearson&quot;</span>)</span>
<span id="cb22-2"><a href="multivariate-analysis.html#cb22-2"></a><span class="co">## [1] 1.216307e-16</span></span></code></pre></div>
<p>We end up with a correlation of zero. This is because although there is a very strong <em>nonlinear</em> relationship between <span class="math inline">\(x_1\)</span> and <span class="math inline">\(x_2\)</span>, the <em>linear</em> relationship is zero. This is made even clearer when we fit a linear regression:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="multivariate-analysis.html#cb23-1"></a><span class="kw">qplot</span>(x1, x2) <span class="op">+</span></span>
<span id="cb23-2"><a href="multivariate-analysis.html#cb23-2"></a><span class="st">    </span><span class="kw">geom_smooth</span>(<span class="dt">method=</span>lm,   <span class="co"># Add linear regression line</span></span>
<span id="cb23-3"><a href="multivariate-analysis.html#cb23-3"></a>                <span class="dt">se=</span><span class="ot">FALSE</span>)    <span class="co"># Don&#39;t add shaded confidence region</span></span>
<span id="cb23-4"><a href="multivariate-analysis.html#cb23-4"></a><span class="co">## `geom_smooth()` using formula &#39;y ~ x&#39;</span></span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-20-1.png" width="768" /></p>
<p>Obviously, this is a very contrived example, and it is very unlikely you will see a relationship like this in real indicator data. However the point is that sometimes, linear measures of dependence don’t tell the whole story.</p>
<p>That said, relationships between indicators can often turn out to be fairly linear. Exceptions arise when indicators are highly skewed, for example. In these cases, a good alternative is to turn to <em>rank correlation</em> measures. Two well-known such measures are the <a href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient">Spearman rank correlation</a> and the <a href="https://en.wikipedia.org/wiki/Kendall_rank_correlation_coefficient">Kendall rank correlation</a>. Rank correlations can handle nonlinearity as long as the relationship is monotonic. You could also argue that since the focus of composite indicators is often on ranks, rank correlation also makes sense on a conceptual level.</p>
<p>COINr offers a few ways to check correlations that are more convenient than <code>stats::cor()</code>. The first is to call the <code>getStats()</code> function that was already mentioned in <a href="initial-visualisation-and-analysis.html#initial-visualisation-and-analysis">Initial visualisation and analysis</a>. This can be pointed at any data set and indicator subset and will give correlation between all indicators present. For example, taking the raw data of our example data set:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="multivariate-analysis.html#cb24-1"></a><span class="kw">library</span>(COINr)</span>
<span id="cb24-2"><a href="multivariate-analysis.html#cb24-2"></a><span class="kw">library</span>(magrittr)</span>
<span id="cb24-3"><a href="multivariate-analysis.html#cb24-3"></a>ASEM &lt;-<span class="st"> </span><span class="kw">build_ASEM</span>()</span>
<span id="cb24-4"><a href="multivariate-analysis.html#cb24-4"></a>statlist &lt;-<span class="st"> </span><span class="kw">getStats</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="dt">out2 =</span> <span class="st">&quot;list&quot;</span>)</span>
<span id="cb24-5"><a href="multivariate-analysis.html#cb24-5"></a></span>
<span id="cb24-6"><a href="multivariate-analysis.html#cb24-6"></a><span class="co"># see a bit of correlation matrix</span></span>
<span id="cb24-7"><a href="multivariate-analysis.html#cb24-7"></a>statlist<span class="op">$</span>Correlations[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb24-8"><a href="multivariate-analysis.html#cb24-8"></a><span class="co">##    IndCode     Goods  Services       FDI    PRemit</span></span>
<span id="cb24-9"><a href="multivariate-analysis.html#cb24-9"></a><span class="co">## 1    Goods        NA 0.8886729 0.8236043 0.8580885</span></span>
<span id="cb24-10"><a href="multivariate-analysis.html#cb24-10"></a><span class="co">## 2 Services 0.8886729        NA 0.8567035 0.8322828</span></span>
<span id="cb24-11"><a href="multivariate-analysis.html#cb24-11"></a><span class="co">## 3      FDI 0.8236043 0.8567035        NA 0.8009064</span></span>
<span id="cb24-12"><a href="multivariate-analysis.html#cb24-12"></a><span class="co">## 4   PRemit 0.8580885 0.8322828 0.8009064        NA</span></span>
<span id="cb24-13"><a href="multivariate-analysis.html#cb24-13"></a><span class="co">## 5  ForPort 0.4750653 0.6955028 0.4366541 0.4837038</span></span>
<span id="cb24-14"><a href="multivariate-analysis.html#cb24-14"></a></span>
<span id="cb24-15"><a href="multivariate-analysis.html#cb24-15"></a><span class="co"># see a bit of correlations with denominators</span></span>
<span id="cb24-16"><a href="multivariate-analysis.html#cb24-16"></a>statlist<span class="op">$</span>DenomCorrelations[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</span>
<span id="cb24-17"><a href="multivariate-analysis.html#cb24-17"></a><span class="co">##   Denominator     Goods  Services       FDI    PRemit</span></span>
<span id="cb24-18"><a href="multivariate-analysis.html#cb24-18"></a><span class="co">## 1    Den_Area 0.2473558 0.2071061 0.3668625 0.2429470</span></span>
<span id="cb24-19"><a href="multivariate-analysis.html#cb24-19"></a><span class="co">## 2  Den_Energy 0.6276219 0.5916882 0.7405170 0.5312195</span></span>
<span id="cb24-20"><a href="multivariate-analysis.html#cb24-20"></a><span class="co">## 3     Den_GDP 0.8026770 0.7708846 0.8482453 0.7111943</span></span>
<span id="cb24-21"><a href="multivariate-analysis.html#cb24-21"></a><span class="co">## 4     Den_Pop 0.4158811 0.4577006 0.6529376 0.4379999</span></span></code></pre></div>
<p>The type of correlation can be changed by the <code>cortype</code> argument, which can be set to “pearson” or “kendall”.</p>
<p>The <code>getStats()</code> function also summarises some of this information in its output in the <code>.$StatTable</code> dataframe:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="multivariate-analysis.html#cb25-1"></a>statlist<span class="op">$</span>StatTable[ <span class="kw">c</span>(<span class="st">&quot;Indicator&quot;</span>, <span class="st">&quot;Collinearity&quot;</span>, <span class="st">&quot;Neg.Correls&quot;</span>, <span class="st">&quot;Denom.correlation&quot;</span>)] <span class="op">%&gt;%</span></span>
<span id="cb25-2"><a href="multivariate-analysis.html#cb25-2"></a><span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>)</span>
<span id="cb25-3"><a href="multivariate-analysis.html#cb25-3"></a><span class="co">## # A tibble: 10 x 4</span></span>
<span id="cb25-4"><a href="multivariate-analysis.html#cb25-4"></a><span class="co">##    Indicator Collinearity Neg.Correls Denom.correlation</span></span>
<span id="cb25-5"><a href="multivariate-analysis.html#cb25-5"></a><span class="co">##    &lt;chr&gt;     &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;            </span></span>
<span id="cb25-6"><a href="multivariate-analysis.html#cb25-6"></a><span class="co">##  1 Goods     Collinear              1 High             </span></span>
<span id="cb25-7"><a href="multivariate-analysis.html#cb25-7"></a><span class="co">##  2 Services  OK                     1 High             </span></span>
<span id="cb25-8"><a href="multivariate-analysis.html#cb25-8"></a><span class="co">##  3 FDI       OK                     1 High             </span></span>
<span id="cb25-9"><a href="multivariate-analysis.html#cb25-9"></a><span class="co">##  4 PRemit    OK                     0 High             </span></span>
<span id="cb25-10"><a href="multivariate-analysis.html#cb25-10"></a><span class="co">##  5 ForPort   OK                     6 OK               </span></span>
<span id="cb25-11"><a href="multivariate-analysis.html#cb25-11"></a><span class="co">##  6 CostImpEx OK                    16 OK               </span></span>
<span id="cb25-12"><a href="multivariate-analysis.html#cb25-12"></a><span class="co">##  7 Tariff    OK                    15 OK               </span></span>
<span id="cb25-13"><a href="multivariate-analysis.html#cb25-13"></a><span class="co">##  8 TBTs      OK                     7 OK               </span></span>
<span id="cb25-14"><a href="multivariate-analysis.html#cb25-14"></a><span class="co">##  9 TIRcon    OK                     5 OK               </span></span>
<span id="cb25-15"><a href="multivariate-analysis.html#cb25-15"></a><span class="co">## 10 RTAs      OK                     9 OK</span></span></code></pre></div>
<p>This flags any indicators that have collinearity with any other indicators, or are significantly negatively correlated, or have correlations with denominators. These flags are activated based on thresholds that are inputs to the <code>getStats()</code> function (<code>t_colin</code> and <code>t_denom</code>).</p>
<p>Correlations can also be plotted using the <code>plotCorr()</code> function. This is a flexible plotting function, powered by ggplot2, which is adapted to the composite indicator context. It has a number of options because there are many ways to plot correlations in a composite indicator, including within an aggregation level, between levels, selecting certain groups, focusing on parents, and so on.</p>
<p>To see this, here are a few examples. First, let’s plot correlations between raw indicators.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="multivariate-analysis.html#cb26-1"></a><span class="kw">plotCorr</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="dt">aglevs =</span> <span class="dv">1</span>, <span class="dt">showvals =</span> F)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-23-1.png" width="768" /></p>
<p>Here, we have plotted raw indicators against indicators. A few things to note:</p>
<ol style="list-style-type: decimal">
<li>By default, if a level is plotted against itself, it only plots correlations within the groups of the next aggregation level above. Use the <code>grouplev</code> argument to control the grouping or disable.</li>
<li>Insignificant correlations (at 5% level) are excluded by default. Use the <code>pval</code> argument to change the significance threshold or to disable.</li>
</ol>
<p>We can repeat the same plot with some variations. First, grouping by sub-index:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="multivariate-analysis.html#cb27-1"></a><span class="kw">plotCorr</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="dt">aglevs =</span> <span class="dv">1</span>, <span class="dt">showvals =</span> F, <span class="dt">grouplev =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-24-1.png" width="768" /></p>
<p>Second, we can plot the whole correlation matrix, and also include insignificant correlations:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="multivariate-analysis.html#cb28-1"></a><span class="kw">plotCorr</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="dt">aglevs =</span> <span class="dv">1</span>, <span class="dt">showvals =</span> F, <span class="dt">grouplev =</span> <span class="dv">0</span>, <span class="dt">pval =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-25-1.png" width="768" /></p>
<p>It may often be more interesting to plot correlations between aggregation levels. Since there is a bit more space, we will also enable the values of the correlations using <code>showvals = TRUE</code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="multivariate-analysis.html#cb29-1"></a><span class="kw">plotCorr</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="dt">aglevs =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="dt">showvals =</span> T)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-26-1.png" width="768" /></p>
<p>Note that again, by default the correlations are grouped with the parent level above. This is disabled by setting <code>withparent = "none"</code>. To see correlations with multiple parents at once, we can set <code>withparent = "family"</code></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="multivariate-analysis.html#cb30-1"></a><span class="kw">plotCorr</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="dt">aglevs =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="dt">showvals =</span> T, <span class="dt">withparent =</span> <span class="st">&quot;family&quot;</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-27-1.png" width="768" /></p>
<p>It is also possible to switch to a discrete colour map to highlight negative, weak and collinear values.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="multivariate-analysis.html#cb31-1"></a><span class="kw">plotCorr</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="dt">aglevs =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="dt">showvals =</span> T, <span class="dt">withparent =</span> <span class="st">&quot;family&quot;</span>,</span>
<span id="cb31-2"><a href="multivariate-analysis.html#cb31-2"></a>         <span class="dt">flagcolours =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-28-1.png" width="768" /></p>
<p>The thresholds for these colours can be controlled by the <code>flagthresh</code> argument. This type of plot helps to see at a glance where there might be a problematic indicator. In the example here, we see that TBTs are negatively correlated with all levels of the index.</p>
<p>Finally, it might be useful to simply have this information as a table rather than a plot. Setting <code>out2</code> to “dflong” or “dfwide” outputs a data frame in long or wide format, instead of a figure. This can be helpful for presenting the information in a report or doing custom formatting.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="multivariate-analysis.html#cb32-1"></a><span class="kw">plotCorr</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="dt">aglevs =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">showvals =</span> T, <span class="dt">withparent =</span> <span class="st">&quot;family&quot;</span>,</span>
<span id="cb32-2"><a href="multivariate-analysis.html#cb32-2"></a>         <span class="dt">flagcolours =</span> <span class="ot">TRUE</span>, <span class="dt">out2 =</span> <span class="st">&quot;dfwide&quot;</span>)</span>
<span id="cb32-3"><a href="multivariate-analysis.html#cb32-3"></a><span class="co">## # A tibble: 8 x 3</span></span>
<span id="cb32-4"><a href="multivariate-analysis.html#cb32-4"></a><span class="co">##   Indicator  Agg2  Agg3</span></span>
<span id="cb32-5"><a href="multivariate-analysis.html#cb32-5"></a><span class="co">##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb32-6"><a href="multivariate-analysis.html#cb32-6"></a><span class="co">## 1 ConEcFin   0.53  0.42</span></span>
<span id="cb32-7"><a href="multivariate-analysis.html#cb32-7"></a><span class="co">## 2 Instit     0.86  0.81</span></span>
<span id="cb32-8"><a href="multivariate-analysis.html#cb32-8"></a><span class="co">## 3 P2P        0.86  0.78</span></span>
<span id="cb32-9"><a href="multivariate-analysis.html#cb32-9"></a><span class="co">## 4 Physical   0.87  0.83</span></span>
<span id="cb32-10"><a href="multivariate-analysis.html#cb32-10"></a><span class="co">## 5 Political  0.64  0.68</span></span>
<span id="cb32-11"><a href="multivariate-analysis.html#cb32-11"></a><span class="co">## 6 Environ    0.48  0   </span></span>
<span id="cb32-12"><a href="multivariate-analysis.html#cb32-12"></a><span class="co">## 7 Social     0.74  0.9 </span></span>
<span id="cb32-13"><a href="multivariate-analysis.html#cb32-13"></a><span class="co">## 8 SusEcFin   0     0</span></span></code></pre></div>
<p>Arguably it’s not so intuitive for a function called <code>plotCorr()</code> to output tables, but that’s how it is for now.</p>
</div>
<div id="pca" class="section level2">
<h2><span class="header-section-number">5.2</span> PCA</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="initial-visualisation-and-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-data-and-imputation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02b-Multivariate.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["COINr-documentation.pdf", "COINr-documentation.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
