<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Multivariate analysis | Composite Indicator Development and Analysis in R with COINr</title>
  <meta name="description" content="Composite indicators with COINr" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Multivariate analysis | Composite Indicator Development and Analysis in R with COINr" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bluefoxr.github.io/COINrDoc/" />
  
  <meta property="og:description" content="Composite indicators with COINr" />
  <meta name="github-repo" content="bluefoxr/COINrDoc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Multivariate analysis | Composite Indicator Development and Analysis in R with COINr" />
  
  <meta name="twitter:description" content="Composite indicators with COINr" />
  

<meta name="author" content="William Becker" />


<meta name="date" content="2021-10-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="initial-visualisation-and-analysis.html"/>
<link rel="next" href="missing-data-and-imputation.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-16.12.0/react.min.js"></script>
<script src="libs/react-16.12.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="libs/reactable-binding-0.2.3/reactable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">COINr Documentation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#what-does-it-do"><i class="fa fa-check"></i><b>1.3</b> What does it do?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#how-to-use-this-manual"><i class="fa fa-check"></i><b>1.4</b> How to use this manual</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#demo"><i class="fa fa-check"></i><b>1.5</b> Demo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="foundations.html"><a href="foundations.html"><i class="fa fa-check"></i><b>2</b> Foundations</a>
<ul>
<li class="chapter" data-level="2.1" data-path="foundations.html"><a href="foundations.html#terminology"><i class="fa fa-check"></i><b>2.1</b> Terminology</a></li>
<li class="chapter" data-level="2.2" data-path="foundations.html"><a href="foundations.html#coinr-syntax"><i class="fa fa-check"></i><b>2.2</b> COINr syntax</a></li>
<li class="chapter" data-level="2.3" data-path="foundations.html"><a href="foundations.html#a-map-of-coinr"><i class="fa fa-check"></i><b>2.3</b> A map of COINr</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="foundations.html"><a href="foundations.html#construction"><i class="fa fa-check"></i><b>2.3.1</b> Construction</a></li>
<li class="chapter" data-level="2.3.2" data-path="foundations.html"><a href="foundations.html#visualisation-and-presenting"><i class="fa fa-check"></i><b>2.3.2</b> Visualisation and presenting</a></li>
<li class="chapter" data-level="2.3.3" data-path="foundations.html"><a href="foundations.html#adjustment-and-comparison"><i class="fa fa-check"></i><b>2.3.3</b> Adjustment and comparison</a></li>
<li class="chapter" data-level="2.3.4" data-path="foundations.html"><a href="foundations.html#analysis"><i class="fa fa-check"></i><b>2.3.4</b> Analysis</a></li>
<li class="chapter" data-level="2.3.5" data-path="foundations.html"><a href="foundations.html#interactive-apps"><i class="fa fa-check"></i><b>2.3.5</b> Interactive apps</a></li>
<li class="chapter" data-level="2.3.6" data-path="foundations.html"><a href="foundations.html#importexport"><i class="fa fa-check"></i><b>2.3.6</b> Import/export</a></li>
<li class="chapter" data-level="2.3.7" data-path="foundations.html"><a href="foundations.html#other-functions"><i class="fa fa-check"></i><b>2.3.7</b> Other functions</a></li>
<li class="chapter" data-level="2.3.8" data-path="foundations.html"><a href="foundations.html#data"><i class="fa fa-check"></i><b>2.3.8</b> Data</a></li>
<li class="chapter" data-level="2.3.9" data-path="foundations.html"><a href="foundations.html#finally"><i class="fa fa-check"></i><b>2.3.9</b> Finally</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="foundations.html"><a href="foundations.html#tips-for-using-coinr"><i class="fa fa-check"></i><b>2.4</b> Tips for using COINr</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="foundations.html"><a href="foundations.html#use-scripts-and-r-markdown"><i class="fa fa-check"></i><b>2.4.1</b> Use scripts and R Markdown</a></li>
<li class="chapter" data-level="2.4.2" data-path="foundations.html"><a href="foundations.html#missing-data"><i class="fa fa-check"></i><b>2.4.2</b> Missing data</a></li>
<li class="chapter" data-level="2.4.3" data-path="foundations.html"><a href="foundations.html#plotting"><i class="fa fa-check"></i><b>2.4.3</b> Plotting</a></li>
<li class="chapter" data-level="2.4.4" data-path="foundations.html"><a href="foundations.html#panel-data-and-multiple-coins"><i class="fa fa-check"></i><b>2.4.4</b> Panel data and multiple COINs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html"><i class="fa fa-check"></i><b>3</b> COINs: the currency of COINr</a>
<ul>
<li class="chapter" data-level="3.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#inside-a-coin"><i class="fa fa-check"></i><b>3.1</b> Inside a COIN</a></li>
<li class="chapter" data-level="3.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#the-three-inputs"><i class="fa fa-check"></i><b>3.2</b> The three inputs</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-data"><i class="fa fa-check"></i><b>3.2.1</b> Indicator data</a></li>
<li class="chapter" data-level="3.2.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-metadata"><i class="fa fa-check"></i><b>3.2.2</b> Indicator metadata</a></li>
<li class="chapter" data-level="3.2.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#aggregation-metadata"><i class="fa fa-check"></i><b>3.2.3</b> Aggregation metadata</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#putting-everything-together"><i class="fa fa-check"></i><b>3.3</b> Putting everything together</a></li>
<li class="chapter" data-level="3.4" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#moving-on"><i class="fa fa-check"></i><b>3.4</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html"><i class="fa fa-check"></i><b>4</b> Initial visualisation and analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#structure"><i class="fa fa-check"></i><b>4.1</b> Structure</a></li>
<li class="chapter" data-level="4.2" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#distributions"><i class="fa fa-check"></i><b>4.2</b> Distributions</a></li>
<li class="chapter" data-level="4.3" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#ranks-and-maps"><i class="fa fa-check"></i><b>4.3</b> Ranks and Maps</a></li>
<li class="chapter" data-level="4.4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#statistics-and-analysis"><i class="fa fa-check"></i><b>4.4</b> Statistics and analysis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html"><i class="fa fa-check"></i><b>5</b> Multivariate analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#correlations"><i class="fa fa-check"></i><b>5.1</b> Correlations</a></li>
<li class="chapter" data-level="5.2" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#pca"><i class="fa fa-check"></i><b>5.2</b> PCA</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html"><i class="fa fa-check"></i><b>6</b> Missing data and Imputation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#concept"><i class="fa fa-check"></i><b>6.1</b> Concept</a></li>
<li class="chapter" data-level="6.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#data-checks-and-screening"><i class="fa fa-check"></i><b>6.2</b> Data checks and screening</a></li>
<li class="chapter" data-level="6.3" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#imputation-in-coinr"><i class="fa fa-check"></i><b>6.3</b> Imputation in COINr</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-column"><i class="fa fa-check"></i><b>6.3.1</b> By column</a></li>
<li class="chapter" data-level="6.3.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-row"><i class="fa fa-check"></i><b>6.3.2</b> By row</a></li>
<li class="chapter" data-level="6.3.3" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-column-and-row"><i class="fa fa-check"></i><b>6.3.3</b> By column and row</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="denomination.html"><a href="denomination.html"><i class="fa fa-check"></i><b>7</b> Denomination</a>
<ul>
<li class="chapter" data-level="7.1" data-path="denomination.html"><a href="denomination.html#concept-1"><i class="fa fa-check"></i><b>7.1</b> Concept</a></li>
<li class="chapter" data-level="7.2" data-path="denomination.html"><a href="denomination.html#denominating-in-coinr"><i class="fa fa-check"></i><b>7.2</b> Denominating in COINr</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="denomination.html"><a href="denomination.html#on-coins"><i class="fa fa-check"></i><b>7.2.1</b> On COINs</a></li>
<li class="chapter" data-level="7.2.2" data-path="denomination.html"><a href="denomination.html#on-data-frames"><i class="fa fa-check"></i><b>7.2.2</b> On data frames</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="denomination.html"><a href="denomination.html#when-to-denominate-and-by-what"><i class="fa fa-check"></i><b>7.3</b> When to denominate, and by what?</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-treatment.html"><a href="data-treatment.html"><i class="fa fa-check"></i><b>8</b> Data Treatment</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-treatment.html"><a href="data-treatment.html#why-treat-data"><i class="fa fa-check"></i><b>8.1</b> Why treat data?</a></li>
<li class="chapter" data-level="8.2" data-path="data-treatment.html"><a href="data-treatment.html#how-to-treat-data"><i class="fa fa-check"></i><b>8.2</b> How to treat data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="data-treatment.html"><a href="data-treatment.html#winsorisation"><i class="fa fa-check"></i><b>8.2.1</b> Winsorisation</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-treatment.html"><a href="data-treatment.html#transformation"><i class="fa fa-check"></i><b>8.2.2</b> Transformation</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-treatment.html"><a href="data-treatment.html#data-treatment-in-coinr"><i class="fa fa-check"></i><b>8.3</b> Data treatment in COINr</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-treatment.html"><a href="data-treatment.html#global-treatment"><i class="fa fa-check"></i><b>8.3.1</b> Global treatment</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-treatment.html"><a href="data-treatment.html#individual-treatment"><i class="fa fa-check"></i><b>8.3.2</b> Individual treatment</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-treatment.html"><a href="data-treatment.html#interactive-visualisation"><i class="fa fa-check"></i><b>8.4</b> Interactive visualisation</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="normalisation.html"><a href="normalisation.html"><i class="fa fa-check"></i><b>9</b> Normalisation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="normalisation.html"><a href="normalisation.html#approaches"><i class="fa fa-check"></i><b>9.1</b> Approaches</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="normalisation.html"><a href="normalisation.html#first-adjust-direction"><i class="fa fa-check"></i><b>9.1.1</b> First: adjust direction</a></li>
<li class="chapter" data-level="9.1.2" data-path="normalisation.html"><a href="normalisation.html#linear-transformations"><i class="fa fa-check"></i><b>9.1.2</b> Linear transformations</a></li>
<li class="chapter" data-level="9.1.3" data-path="normalisation.html"><a href="normalisation.html#nonlinear-transformations"><i class="fa fa-check"></i><b>9.1.3</b> Nonlinear transformations</a></li>
<li class="chapter" data-level="9.1.4" data-path="normalisation.html"><a href="normalisation.html#distances"><i class="fa fa-check"></i><b>9.1.4</b> Distances</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="normalisation.html"><a href="normalisation.html#normalisation-in-coinr"><i class="fa fa-check"></i><b>9.2</b> Normalisation in COINr</a></li>
<li class="chapter" data-level="9.3" data-path="normalisation.html"><a href="normalisation.html#individual-normalisation"><i class="fa fa-check"></i><b>9.3</b> Individual normalisation</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="aggregation.html"><a href="aggregation.html"><i class="fa fa-check"></i><b>10</b> Aggregation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="aggregation.html"><a href="aggregation.html#weighting"><i class="fa fa-check"></i><b>10.1</b> Weighting</a></li>
<li class="chapter" data-level="10.2" data-path="aggregation.html"><a href="aggregation.html#approaches-1"><i class="fa fa-check"></i><b>10.2</b> Approaches</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="aggregation.html"><a href="aggregation.html#means"><i class="fa fa-check"></i><b>10.2.1</b> Means</a></li>
<li class="chapter" data-level="10.2.2" data-path="aggregation.html"><a href="aggregation.html#other-methods"><i class="fa fa-check"></i><b>10.2.2</b> Other methods</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="aggregation.html"><a href="aggregation.html#aggregation-in-coinr"><i class="fa fa-check"></i><b>10.3</b> Aggregation in COINr</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="weighting-1.html"><a href="weighting-1.html"><i class="fa fa-check"></i><b>11</b> Weighting</a>
<ul>
<li class="chapter" data-level="11.1" data-path="weighting-1.html"><a href="weighting-1.html#approaches-to-weighting"><i class="fa fa-check"></i><b>11.1</b> Approaches to weighting</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="weighting-1.html"><a href="weighting-1.html#equal-weighting"><i class="fa fa-check"></i><b>11.1.1</b> Equal weighting</a></li>
<li class="chapter" data-level="11.1.2" data-path="weighting-1.html"><a href="weighting-1.html#budget-allocation"><i class="fa fa-check"></i><b>11.1.2</b> Budget allocation</a></li>
<li class="chapter" data-level="11.1.3" data-path="weighting-1.html"><a href="weighting-1.html#principle-component-analysis"><i class="fa fa-check"></i><b>11.1.3</b> Principle component analysis</a></li>
<li class="chapter" data-level="11.1.4" data-path="weighting-1.html"><a href="weighting-1.html#weight-optimisation"><i class="fa fa-check"></i><b>11.1.4</b> Weight optimisation</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="weighting-1.html"><a href="weighting-1.html#weighting-tools-in-coinr"><i class="fa fa-check"></i><b>11.2</b> Weighting tools in COINr</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="weighting-1.html"><a href="weighting-1.html#manual-weighting"><i class="fa fa-check"></i><b>11.2.1</b> Manual weighting</a></li>
<li class="chapter" data-level="11.2.2" data-path="weighting-1.html"><a href="weighting-1.html#interactive-re-weighting-with-rew8r"><i class="fa fa-check"></i><b>11.2.2</b> Interactive re-weighting with ReW8R</a></li>
<li class="chapter" data-level="11.2.3" data-path="weighting-1.html"><a href="weighting-1.html#automatic-re-weighting"><i class="fa fa-check"></i><b>11.2.3</b> Automatic re-weighting</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="weighting-1.html"><a href="weighting-1.html#effective-weights"><i class="fa fa-check"></i><b>11.3</b> Effective weights</a></li>
<li class="chapter" data-level="11.4" data-path="weighting-1.html"><a href="weighting-1.html#final-points"><i class="fa fa-check"></i><b>11.4</b> Final points</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="visualising-results.html"><a href="visualising-results.html"><i class="fa fa-check"></i><b>12</b> Visualising results</a>
<ul>
<li class="chapter" data-level="12.1" data-path="visualising-results.html"><a href="visualising-results.html#tables"><i class="fa fa-check"></i><b>12.1</b> Tables</a></li>
<li class="chapter" data-level="12.2" data-path="visualising-results.html"><a href="visualising-results.html#plots"><i class="fa fa-check"></i><b>12.2</b> Plots</a></li>
<li class="chapter" data-level="12.3" data-path="visualising-results.html"><a href="visualising-results.html#interactive-exploration"><i class="fa fa-check"></i><b>12.3</b> Interactive exploration</a></li>
<li class="chapter" data-level="12.4" data-path="visualising-results.html"><a href="visualising-results.html#unit-reports"><i class="fa fa-check"></i><b>12.4</b> Unit reports</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html"><i class="fa fa-check"></i><b>13</b> Adjustments and comparisons</a>
<ul>
<li class="chapter" data-level="13.1" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#regeneration"><i class="fa fa-check"></i><b>13.1</b> Regeneration</a></li>
<li class="chapter" data-level="13.2" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#adjustments"><i class="fa fa-check"></i><b>13.2</b> Adjustments</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#addingremoving-indicators"><i class="fa fa-check"></i><b>13.2.1</b> Adding/removing indicators</a></li>
<li class="chapter" data-level="13.2.2" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#other-adjustments"><i class="fa fa-check"></i><b>13.2.2</b> Other adjustments</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#comparisons"><i class="fa fa-check"></i><b>13.3</b> Comparisons</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html"><i class="fa fa-check"></i><b>14</b> Sensitivity analysis</a>
<ul>
<li class="chapter" data-level="14.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#about"><i class="fa fa-check"></i><b>14.1</b> About</a></li>
<li class="chapter" data-level="14.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#five-steps"><i class="fa fa-check"></i><b>14.2</b> Five steps</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#specifying-the-model"><i class="fa fa-check"></i><b>14.2.1</b> Specifying the model</a></li>
<li class="chapter" data-level="14.2.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#which-assumptions-to-vary"><i class="fa fa-check"></i><b>14.2.2</b> Which assumptions to vary</a></li>
<li class="chapter" data-level="14.2.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#alternative-values"><i class="fa fa-check"></i><b>14.2.3</b> Alternative values</a></li>
<li class="chapter" data-level="14.2.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#selecting-the-output"><i class="fa fa-check"></i><b>14.2.4</b> Selecting the output</a></li>
<li class="chapter" data-level="14.2.5" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#sa-methodology"><i class="fa fa-check"></i><b>14.2.5</b> SA methodology</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#variance-based-sensitivity-analysis"><i class="fa fa-check"></i><b>14.3</b> Variance-based sensitivity analysis</a></li>
<li class="chapter" data-level="14.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#sensitivity-in-coinr"><i class="fa fa-check"></i><b>14.4</b> Sensitivity in COINr</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#general-specifications"><i class="fa fa-check"></i><b>14.4.1</b> General specifications</a></li>
<li class="chapter" data-level="14.4.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#varying-weights"><i class="fa fa-check"></i><b>14.4.2</b> Varying weights</a></li>
<li class="chapter" data-level="14.4.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#running-an-uncertainty-analysis"><i class="fa fa-check"></i><b>14.4.3</b> Running an uncertainty analysis</a></li>
<li class="chapter" data-level="14.4.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#running-a-sensitivity-analysis"><i class="fa fa-check"></i><b>14.4.4</b> Running a sensitivity analysis</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#removing-indicators-and-aggregates"><i class="fa fa-check"></i><b>14.5</b> Removing indicators and aggregates</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="helper-functions.html"><a href="helper-functions.html"><i class="fa fa-check"></i><b>15</b> Helper functions</a>
<ul>
<li class="chapter" data-level="15.1" data-path="helper-functions.html"><a href="helper-functions.html#r-interfaces"><i class="fa fa-check"></i><b>15.1</b> R Interfaces</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="helper-functions.html"><a href="helper-functions.html#data-import"><i class="fa fa-check"></i><b>15.1.1</b> Data import</a></li>
<li class="chapter" data-level="15.1.2" data-path="helper-functions.html"><a href="helper-functions.html#export-to-excel"><i class="fa fa-check"></i><b>15.1.2</b> Export to Excel</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="helper-functions.html"><a href="helper-functions.html#selecting-data-sets-and-indicators"><i class="fa fa-check"></i><b>15.2</b> Selecting data sets and indicators</a></li>
<li class="chapter" data-level="15.3" data-path="helper-functions.html"><a href="helper-functions.html#data-frame-tools"><i class="fa fa-check"></i><b>15.3</b> Data frame tools</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html"><i class="fa fa-check"></i><b>16</b> Appendix: R Resources</a>
<ul>
<li class="chapter" data-level="16.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#introduction-to-r"><i class="fa fa-check"></i><b>16.1</b> Introduction to R</a></li>
<li class="chapter" data-level="16.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#advanced-resources"><i class="fa fa-check"></i><b>16.2</b> Advanced resources</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#programming"><i class="fa fa-check"></i><b>16.2.1</b> Programming</a></li>
<li class="chapter" data-level="16.2.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#visualisation"><i class="fa fa-check"></i><b>16.2.2</b> Visualisation</a></li>
<li class="chapter" data-level="16.2.3" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#other"><i class="fa fa-check"></i><b>16.2.3</b> Other</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>17</b> FAQ</a></li>
<li class="chapter" data-level="18" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html"><i class="fa fa-check"></i><b>18</b> Appendix: Building a Composite Indicator Example</a>
<ul>
<li class="chapter" data-level="18.1" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#before-coinr-bc"><i class="fa fa-check"></i><b>18.1</b> Before COINr (BC)</a></li>
<li class="chapter" data-level="18.2" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#load-data-and-assemble"><i class="fa fa-check"></i><b>18.2</b> Load data and assemble</a></li>
<li class="chapter" data-level="18.3" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#check-the-data"><i class="fa fa-check"></i><b>18.3</b> Check the data</a></li>
<li class="chapter" data-level="18.4" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#denomination-1"><i class="fa fa-check"></i><b>18.4</b> Denomination</a></li>
<li class="chapter" data-level="18.5" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#imputation"><i class="fa fa-check"></i><b>18.5</b> Imputation</a></li>
<li class="chapter" data-level="18.6" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#data-treatment-1"><i class="fa fa-check"></i><b>18.6</b> Data treatment</a></li>
<li class="chapter" data-level="18.7" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#normalisation-1"><i class="fa fa-check"></i><b>18.7</b> Normalisation</a></li>
<li class="chapter" data-level="18.8" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#aggregation-1"><i class="fa fa-check"></i><b>18.8</b> Aggregation</a></li>
<li class="chapter" data-level="18.9" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#visualisation-1"><i class="fa fa-check"></i><b>18.9</b> Visualisation</a></li>
<li class="chapter" data-level="18.10" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#comparison"><i class="fa fa-check"></i><b>18.10</b> Comparison</a></li>
<li class="chapter" data-level="18.11" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#export"><i class="fa fa-check"></i><b>18.11</b> Export</a></li>
<li class="chapter" data-level="18.12" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#summary"><i class="fa fa-check"></i><b>18.12</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html"><i class="fa fa-check"></i><b>19</b> Appendix: Analysing a Composite Indicator Example</a>
<ul>
<li class="chapter" data-level="19.1" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#loading-data"><i class="fa fa-check"></i><b>19.1</b> Loading data</a></li>
<li class="chapter" data-level="19.2" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#check-calculations"><i class="fa fa-check"></i><b>19.2</b> Check calculations</a></li>
<li class="chapter" data-level="19.3" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#indicator-statistics"><i class="fa fa-check"></i><b>19.3</b> Indicator statistics</a></li>
<li class="chapter" data-level="19.4" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#multivariate-analysis-1"><i class="fa fa-check"></i><b>19.4</b> Multivariate analysis</a></li>
<li class="chapter" data-level="19.5" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#weights"><i class="fa fa-check"></i><b>19.5</b> Weights</a></li>
<li class="chapter" data-level="19.6" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#what-ifs"><i class="fa fa-check"></i><b>19.6</b> What-ifs</a></li>
<li class="chapter" data-level="19.7" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#summing-up"><i class="fa fa-check"></i><b>19.7</b> Summing up</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>20</b> Acknowledgements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Composite Indicator Development and Analysis in R with COINr</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="multivariate-analysis" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Multivariate analysis</h1>
<p>Correlations, and other relationships between indicators, can help to understand the structure of the data and to see whether indicators are redundant or are mistakenly encoded.</p>
<div id="correlations" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Correlations</h2>
<p>Correlations are a measure of <em>statistical dependence</em> between one variable and another. Often, what is meant by “correlation,” is the <a href="https://en.wikipedia.org/wiki/Pearson_correlation_coefficient">Pearson correlation coefficient</a>, which is a measure of <em>linear</em> dependence between two variables.</p>
<p>It’s worth spending a moment to consider what this the implication of the “linear” part actually means. Consider the following example:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="multivariate-analysis.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># numbers in [-1, 1]</span></span>
<span id="cb24-2"><a href="multivariate-analysis.html#cb24-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">0.1</span>)</span>
<span id="cb24-3"><a href="multivariate-analysis.html#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="co"># x2 is a function of x1</span></span>
<span id="cb24-4"><a href="multivariate-analysis.html#cb24-4" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> x1<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb24-5"><a href="multivariate-analysis.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb24-6"><a href="multivariate-analysis.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb24-7"><a href="multivariate-analysis.html#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(x1, x2)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-23-1.png" width="768" /></p>
<p>Now, clearly there is a very strong relationship between x1 and x2. In fact, x2 is completely dependent on x2 (there are no other variables or noise that control its values). So what happens if we check the correlation?</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="multivariate-analysis.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(x1, x2, <span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>)</span>
<span id="cb25-2"><a href="multivariate-analysis.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1.216307e-16</span></span></code></pre></div>
<p>We end up with a correlation of zero. This is because although there is a very strong <em>nonlinear</em> relationship between <span class="math inline">\(x_1\)</span> and <span class="math inline">\(x_2\)</span>, the <em>linear</em> relationship is zero. This is made even clearer when we fit a linear regression:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="multivariate-analysis.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(x1, x2) <span class="sc">+</span></span>
<span id="cb26-2"><a href="multivariate-analysis.html#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method=</span>lm,   <span class="co"># Add linear regression line</span></span>
<span id="cb26-3"><a href="multivariate-analysis.html#cb26-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">se=</span><span class="cn">FALSE</span>)    <span class="co"># Don&#39;t add shaded confidence region</span></span>
<span id="cb26-4"><a href="multivariate-analysis.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="do">## `geom_smooth()` using formula &#39;y ~ x&#39;</span></span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-25-1.png" width="768" /></p>
<p>Obviously, this is a very contrived example, and it is unlikely you will see a relationship like this in real indicator data. However the point is that sometimes, linear measures of dependence don’t tell the whole story.</p>
<p>That said, relationships between indicators can often turn out to be fairly linear. Exceptions arise when indicators are highly skewed, for example. In these cases, a good alternative is to turn to <em>rank correlation</em> measures. Two well-known such measures are the <a href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient">Spearman rank correlation</a> and the <a href="https://en.wikipedia.org/wiki/Kendall_rank_correlation_coefficient">Kendall rank correlation</a>. Rank correlations can handle nonlinearity as long as the relationship is monotonic. You could also argue that since the focus of composite indicators is often on ranks, rank correlation also makes sense on a conceptual level.</p>
<p>COINr offers a few ways to check correlations that are more convenient than <code>stats::cor()</code>. The first is to call the <code>getStats()</code> function that was already mentioned in <a href="initial-visualisation-and-analysis.html#initial-visualisation-and-analysis">Initial visualisation and analysis</a>. This can be pointed at any data set and indicator subset and will give correlation between all indicators present. For example, taking the raw data of our example data set:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="multivariate-analysis.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(COINr)</span>
<span id="cb27-2"><a href="multivariate-analysis.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># shortcut to build ASEM COIN</span></span>
<span id="cb27-3"><a href="multivariate-analysis.html#cb27-3" aria-hidden="true" tabindex="-1"></a>ASEM <span class="ot">&lt;-</span> <span class="fu">build_ASEM</span>()</span>
<span id="cb27-4"><a href="multivariate-analysis.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># get statistics of raw data set</span></span>
<span id="cb27-5"><a href="multivariate-analysis.html#cb27-5" aria-hidden="true" tabindex="-1"></a>statlist <span class="ot">&lt;-</span> <span class="fu">getStats</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="at">out2 =</span> <span class="st">&quot;list&quot;</span>)</span>
<span id="cb27-6"><a href="multivariate-analysis.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="co"># see a bit of correlation matrix</span></span>
<span id="cb27-7"><a href="multivariate-analysis.html#cb27-7" aria-hidden="true" tabindex="-1"></a>statlist<span class="sc">$</span>Correlations[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb27-8"><a href="multivariate-analysis.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="do">##    IndCode     Goods  Services       FDI    PRemit</span></span>
<span id="cb27-9"><a href="multivariate-analysis.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 1    Goods        NA 0.8886729 0.8236043 0.8580885</span></span>
<span id="cb27-10"><a href="multivariate-analysis.html#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Services 0.8886729        NA 0.8567035 0.8322828</span></span>
<span id="cb27-11"><a href="multivariate-analysis.html#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 3      FDI 0.8236043 0.8567035        NA 0.8009064</span></span>
<span id="cb27-12"><a href="multivariate-analysis.html#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 4   PRemit 0.8580885 0.8322828 0.8009064        NA</span></span>
<span id="cb27-13"><a href="multivariate-analysis.html#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 5  ForPort 0.4750653 0.6955028 0.4366541 0.4837038</span></span>
<span id="cb27-14"><a href="multivariate-analysis.html#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co"># see a bit of correlations with denominators</span></span>
<span id="cb27-15"><a href="multivariate-analysis.html#cb27-15" aria-hidden="true" tabindex="-1"></a>statlist<span class="sc">$</span>DenomCorrelations[, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb27-16"><a href="multivariate-analysis.html#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="do">##   Denominator     Goods  Services       FDI    PRemit</span></span>
<span id="cb27-17"><a href="multivariate-analysis.html#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 1    Den_Area 0.2473558 0.2071061 0.3668625 0.2429470</span></span>
<span id="cb27-18"><a href="multivariate-analysis.html#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 2  Den_Energy 0.6276219 0.5916882 0.7405170 0.5312195</span></span>
<span id="cb27-19"><a href="multivariate-analysis.html#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="do">## 3     Den_GDP 0.8026770 0.7708846 0.8482453 0.7111943</span></span>
<span id="cb27-20"><a href="multivariate-analysis.html#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="do">## 4     Den_Pop 0.4158811 0.4577006 0.6529376 0.4379999</span></span></code></pre></div>
<p>The type of correlation can be changed by the <code>cortype</code> argument, which can be set to “pearson” or “kendall.”</p>
<p>The <code>getStats()</code> function also summarises some of this information in its output in the <code>.$StatTable</code> data frame:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="multivariate-analysis.html#cb28-1" aria-hidden="true" tabindex="-1"></a>statlist<span class="sc">$</span>StatTable[ <span class="fu">c</span>(<span class="st">&quot;Indicator&quot;</span>, <span class="st">&quot;Collinearity&quot;</span>, <span class="st">&quot;Neg.Correls&quot;</span>, <span class="st">&quot;Denom.correlation&quot;</span>)] <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb28-2"><a href="multivariate-analysis.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb28-3"><a href="multivariate-analysis.html#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 10 x 4</span></span>
<span id="cb28-4"><a href="multivariate-analysis.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="do">##    Indicator Collinearity Neg.Correls Denom.correlation</span></span>
<span id="cb28-5"><a href="multivariate-analysis.html#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;     &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;            </span></span>
<span id="cb28-6"><a href="multivariate-analysis.html#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 Goods     Collinear              1 High             </span></span>
<span id="cb28-7"><a href="multivariate-analysis.html#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Services  OK                     1 High             </span></span>
<span id="cb28-8"><a href="multivariate-analysis.html#cb28-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 FDI       OK                     1 High             </span></span>
<span id="cb28-9"><a href="multivariate-analysis.html#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 PRemit    OK                     0 High             </span></span>
<span id="cb28-10"><a href="multivariate-analysis.html#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 ForPort   OK                     6 OK               </span></span>
<span id="cb28-11"><a href="multivariate-analysis.html#cb28-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 CostImpEx OK                    16 OK               </span></span>
<span id="cb28-12"><a href="multivariate-analysis.html#cb28-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Tariff    OK                    15 OK               </span></span>
<span id="cb28-13"><a href="multivariate-analysis.html#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 TBTs      OK                     7 OK               </span></span>
<span id="cb28-14"><a href="multivariate-analysis.html#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 TIRcon    OK                     5 OK               </span></span>
<span id="cb28-15"><a href="multivariate-analysis.html#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 RTAs      OK                     9 OK</span></span></code></pre></div>
<p>This flags any indicators that have collinearity with any other indicators, or are significantly negatively correlated, or have correlations with denominators. These flags are activated based on thresholds that are inputs to the <code>getStats()</code> function (<code>t_colin</code> and <code>t_denom</code>).</p>
<p>Correlations can also be plotted using the <code>plotCorr()</code> function. This is a flexible correlation plotting function, powered by ggplot2, which is adapted to the composite indicator context. It has a number of options because there are many ways to plot correlations in a composite indicator, including within an aggregation level, between levels, selecting certain groups, focusing on parents, and so on.</p>
<p>To see this, here are a few examples. First, let’s plot correlations between raw indicators.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="multivariate-analysis.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotCorr</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="at">aglevs =</span> <span class="dv">1</span>, <span class="at">showvals =</span> F)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-28-1.png" width="768" /></p>
<p>Here, we have plotted raw indicators against indicators. A few things to note:</p>
<ol style="list-style-type: decimal">
<li>By default, if a level is plotted against itself, it only plots correlations within the groups of the next aggregation level above. Use the <code>grouplev</code> argument to control the grouping or disable.</li>
<li>Insignificant correlations (at 5% level) are coloured grey by default. Use the <code>pval</code> argument to change the significance threshold or to disable.</li>
</ol>
<p>We can repeat the same plot with some variations. First, grouping by sub-index:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="multivariate-analysis.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotCorr</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="at">aglevs =</span> <span class="dv">1</span>, <span class="at">showvals =</span> F, <span class="at">grouplev =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-29-1.png" width="768" /></p>
<p>This gives more information, but the first level of aggregation is not easily visible. To improve it, we can also draw boxes around aggregation groups at any level.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="multivariate-analysis.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotCorr</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="at">aglevs =</span> <span class="dv">1</span>, <span class="at">showvals =</span> F, <span class="at">grouplev =</span> <span class="dv">3</span>, <span class="at">box_level =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-30-1.png" width="768" /></p>
<p>Between <code>grouplev</code> and <code>box_level</code>, it usually possible find a plot which communicates the “important” correlations. But why focus on correlations within aggregation groups? A good reason is that when we aggregate indicators, they should ideally be moderately correlated to avoid losing too much information. This is a long discussion which is outside of the remit of this book, but if your interested you could look at <a href="https://doi.org/10.1016/j.envsoft.2021.105208">this paper</a>.</p>
<p>Of course, we can also plot the whole correlation matrix, and also include insignificant correlations:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="multivariate-analysis.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotCorr</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="at">aglevs =</span> <span class="dv">1</span>, <span class="at">showvals =</span> F, <span class="at">grouplev =</span> <span class="dv">0</span>, <span class="at">pval =</span> <span class="dv">0</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-31-1.png" width="768" /></p>
<p>It may often be more interesting to plot correlations between aggregation levels. Since there is a bit more space, we will also enable the values of the correlations using <code>showvals = TRUE</code>.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="multivariate-analysis.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotCorr</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="at">aglevs =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">showvals =</span> T)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-32-1.png" width="768" /></p>
<p>Note that again, by default the correlations are grouped with the parent level above. This is disabled by setting <code>withparent = "none"</code>. To see correlations with all parent groups at once, we can set <code>withparent = "family"</code>. Here, we will also call a subset of the indicators, in this case only the indicators in the Sustainability sub-index.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="multivariate-analysis.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotCorr</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="at">aglevs =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">icodes =</span> <span class="st">&quot;Sust&quot;</span>,</span>
<span id="cb34-2"><a href="multivariate-analysis.html#cb34-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">showvals =</span> T, <span class="at">withparent =</span> <span class="st">&quot;family&quot;</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-33-1.png" width="768" /></p>
<p>COINr draws rectangles around aggregation groups. The labels on the x-axis here correspond to the column names used in <code>IndMeta</code>.</p>
<p>It is also possible to switch to a discrete colour map to highlight negative, weak and collinear values.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="multivariate-analysis.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotCorr</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="at">aglevs =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">showvals =</span> T, <span class="at">withparent =</span> <span class="st">&quot;family&quot;</span>,</span>
<span id="cb35-2"><a href="multivariate-analysis.html#cb35-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">flagcolours =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-34-1.png" width="768" /></p>
<p>The thresholds for these colours can be controlled by the <code>flagthresh</code> argument. This type of plot helps to see at a glance where there might be a problematic indicator. There are also a number of arguments for controlling the colours of the discrete colour map, insignificant values, the box lines, and so on.</p>
<p>Finally, it might be useful to simply have this information as a table rather than a plot. Setting <code>out2</code> to “dflong” or “dfwide” outputs a data frame in long or wide format, instead of a figure. This can be helpful for presenting the information in a report or doing custom formatting.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="multivariate-analysis.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotCorr</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="at">aglevs =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">showvals =</span> T, <span class="at">withparent =</span> <span class="st">&quot;family&quot;</span>,</span>
<span id="cb36-2"><a href="multivariate-analysis.html#cb36-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">flagcolours =</span> <span class="cn">TRUE</span>, <span class="at">out2 =</span> <span class="st">&quot;dfwide&quot;</span>)</span>
<span id="cb36-3"><a href="multivariate-analysis.html#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 8 x 3</span></span>
<span id="cb36-4"><a href="multivariate-analysis.html#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   Indicator  Agg2  Agg3</span></span>
<span id="cb36-5"><a href="multivariate-analysis.html#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb36-6"><a href="multivariate-analysis.html#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 ConEcFin   0.53  0.42</span></span>
<span id="cb36-7"><a href="multivariate-analysis.html#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Instit     0.86  0.81</span></span>
<span id="cb36-8"><a href="multivariate-analysis.html#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 P2P        0.86  0.78</span></span>
<span id="cb36-9"><a href="multivariate-analysis.html#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 Physical   0.87  0.83</span></span>
<span id="cb36-10"><a href="multivariate-analysis.html#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 Political  0.64  0.68</span></span>
<span id="cb36-11"><a href="multivariate-analysis.html#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 Environ    0.48 NA   </span></span>
<span id="cb36-12"><a href="multivariate-analysis.html#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 7 Social     0.74  0.9 </span></span>
<span id="cb36-13"><a href="multivariate-analysis.html#cb36-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 8 SusEcFin  NA    NA</span></span></code></pre></div>
<p>Arguably it’s not so intuitive for a function called <code>plotCorr()</code> to output tables, but that’s how it is for now.</p>
<p>If you like your correlation heatmaps interactive, COINr has another function called <code>iplotCorr()</code>. It functions in a similar way <code>plotCorr()</code>, but is designed in particular as a component of the <code>rew8r()</code> app and can be used in HTML documents. For a basic correlation map:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="multivariate-analysis.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iplotCorr</span>(ASEM, <span class="at">aglevs =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>))</span></code></pre></div>
<div id="htmlwidget-b7e43d2bd95de51fea11" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-b7e43d2bd95de51fea11">{"x":{"visdat":{"1ee85324274e":["function () ","plotlyVisDat"]},"cur_data":"1ee85324274e","attrs":{"1ee85324274e":{"z":[[0.53,null],[0.86,0.52],[0.86,0.44],[0.87,0.55],[0.64,0.56],[null,0.48],[0.86,0.74],[null,null]],"x":["Conn","Sust"],"xgap":2,"y":["ConEcFin","Instit","P2P","Physical","Political","Environ","Social","SusEcFin"],"ygap":2,"colorscale":[{"z":0,"col":"#FF5733"},{"z":0.3,"col":"#FF5733"},{"z":0.3,"col":"#A6ACAF"},{"z":0.7,"col":"#A6ACAF"},{"z":0.7,"col":"#D6EAF8"},{"z":0.925,"col":"#D6EAF8"},{"z":0.925,"col":"#84BB60"},{"z":1,"col":"#84BB60"}],"zmin":-1,"zmax":1,"hovertemplate":"corr(%{x}, %{y}) = %{z}<extra><\/extra>","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"heatmap"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"shapes":[{"type":"rect","layer":"above","line":{"color":"purple","width":2},"opacity":0.5,"x0":-0.5,"x1":0.5,"xref":"x","y0":-0.5,"y1":4.5,"yref":"y"},{"type":"rect","layer":"above","line":{"color":"purple","width":2},"opacity":0.5,"x0":0.5,"x1":1.5,"xref":"x","y0":4.5,"y1":7.5,"yref":"y"}],"annotations":[{"text":0.53,"x":"Conn","y":"ConEcFin","showarrow":false},{"text":0.86,"x":"Conn","y":"Instit","showarrow":false},{"text":0.86,"x":"Conn","y":"P2P","showarrow":false},{"text":0.87,"x":"Conn","y":"Physical","showarrow":false},{"text":0.64,"x":"Conn","y":"Political","showarrow":false},{"text":0.86,"x":"Conn","y":"Social","showarrow":false},{"text":0.52,"x":"Sust","y":"Instit","showarrow":false},{"text":0.44,"x":"Sust","y":"P2P","showarrow":false},{"text":0.55,"x":"Sust","y":"Physical","showarrow":false},{"text":0.56,"x":"Sust","y":"Political","showarrow":false},{"text":0.48,"x":"Sust","y":"Environ","showarrow":false},{"text":0.74,"x":"Sust","y":"Social","showarrow":false}],"xaxis":{"domain":[0,1],"automargin":true,"title":[]},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"scene":{"zaxis":{"title":[]}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"showSendToCloud":false},"data":[{"colorbar":{"title":"","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[[0,"#FF5733"],[0.3,"#FF5733"],[0.3,"#A6ACAF"],[0.7,"#A6ACAF"],[0.7,"#D6EAF8"],[0.925,"#D6EAF8"],[0.925,"#84BB60"],[1,"#84BB60"]],"showscale":true,"z":[[0.53,null],[0.86,0.52],[0.86,0.44],[0.87,0.55],[0.64,0.56],[null,0.48],[0.86,0.74],[null,null]],"x":["Conn","Sust"],"xgap":2,"y":["ConEcFin","Instit","P2P","Physical","Political","Environ","Social","SusEcFin"],"ygap":2,"zmin":-1,"zmax":1,"hovertemplate":"corr(%{x}, %{y}) = %{z}<extra><\/extra>","type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Like <code>plotCorr()</code>, indicators are grouped by rectangles around the groups. This might be better for small plots but can be a bit confusing when there are many elements plotted at the same time. The <code>iplotCorr()</code> function can also show a continuous colour scale, and values can be removed.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="multivariate-analysis.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iplotCorr</span>(ASEM, <span class="at">aglevs =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">showvals =</span> F, <span class="at">flagcolours =</span> F)</span></code></pre></div>
<div id="htmlwidget-78bfcc9b836dfc3c41f3" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-78bfcc9b836dfc3c41f3">{"x":{"visdat":{"1ee813c23bd9":["function () ","plotlyVisDat"]},"cur_data":"1ee813c23bd9","attrs":{"1ee813c23bd9":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"z":[[0.67,null,0.37,0.32,null,null,null,0.38],[0.84,0.41,0.74,0.53,null,null,0.45,null],[0.56,-0.35,null,null,-0.61,null,null,null],[0.52,null,null,null,-0.42,null,null,null],[0.59,0.47,0.67,0.73,0.32,null,0.69,null],[0.32,0.86,0.57,0.6,0.62,null,0.63,null],[null,0.69,0.64,0.52,0.38,null,0.61,null],[null,-0.62,-0.45,-0.49,-0.74,null,-0.59,null],[null,0.66,0.3,null,0.62,null,0.46,null],[null,0.76,0.53,0.59,0.68,null,0.63,null],[0.31,0.74,0.64,0.63,0.5,null,0.6,null],[0.37,0.38,0.73,0.33,null,-0.36,0.52,-0.31],[0.32,0.59,0.75,0.51,0.38,null,0.67,null],[0.37,0.51,0.66,0.65,0.46,null,0.72,null],[0.48,0.46,0.64,0.4,null,null,0.39,null],[0.55,0.4,0.57,0.52,null,null,null,null],[0.46,0.52,0.74,0.44,null,null,0.4,null],[0.57,0.35,0.69,0.43,null,-0.37,0.37,null],[0.37,0.59,0.81,0.63,0.41,null,0.78,null],[null,0.53,0.51,0.77,0.73,null,0.72,null],[0.66,0.48,0.78,0.65,null,null,0.51,-0.32],[null,null,null,null,0.31,null,null,null],[0.54,0.39,0.54,0.67,null,null,0.43,null],[0.33,0.52,0.58,0.45,null,null,0.5,null],[null,null,null,0.35,null,null,null,null],[null,0.32,null,0.56,0.35,null,0.54,0.32],[null,0.66,0.64,0.75,0.6,-0.32,0.76,null],[-0.54,null,null,null,0.68,null,null,null],[null,0.6,null,0.47,0.95,null,0.6,null],[null,0.8,0.63,0.59,0.71,null,0.78,null],[null,null,null,-0.32,null,0.58,null,null],[null,0.29,0.35,0.36,null,0.64,null,-0.29],[null,null,-0.4,-0.41,null,0.78,-0.33,null],[-0.33,null,-0.48,null,null,0.81,-0.38,null],[null,null,null,null,null,null,null,null],[null,0.63,0.47,0.44,0.62,null,0.68,null],[null,0.39,0.36,0.37,0.38,null,0.61,null],[0.4,0.46,0.59,0.58,0.29,null,0.72,null],[null,0.71,0.61,0.58,0.68,null,0.85,null],[0.36,0.53,0.53,0.59,0.39,null,0.72,null],[0.49,0.55,0.78,0.77,0.42,null,0.8,null],[null,0.63,0.72,0.8,0.58,null,0.87,null],[null,0.42,0.38,0.31,null,-0.3,0.6,null],[null,0.38,0.35,0.42,0.49,null,0.69,null],[null,null,null,null,-0.41,null,null,0.53],[-0.44,-0.43,-0.64,-0.59,-0.37,null,-0.66,0.46],[null,-0.34,-0.43,-0.39,-0.33,null,-0.48,0.56],[null,0.34,0.31,0.64,0.56,null,0.58,null],[0.37,0.48,0.54,0.64,0.45,-0.31,0.66,null]],"x":["ConEcFin","Instit","P2P","Physical","Political","Environ","Social","SusEcFin"],"y":["Goods","Services","FDI","PRemit","ForPort","CostImpEx","Tariff","TBTs","TIRcon","RTAs","Visa","StMob","Research","Pat","CultServ","CultGood","Tourist","MigStock","Lang","LPI","Flights","Ship","Bord","Elec","Gas","ConSpeed","Cov4G","Embs","IGOs","UNVote","Renew","PrimEner","CO2","MatCon","Forest","Poverty","Palma","TertGrad","FreePress","TolMin","NGOs","CPI","FemLab","WomParl","PubDebt","PrivDebt","GDPGrow","RDExp","NEET"],"type":"heatmap","zmin":-1,"zmid":0,"zmax":1,"colors":"RdBu","hovertemplate":"corr(%{x}, %{y}) = %{z}<extra><\/extra>","xgap":2,"ygap":2,"inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"shapes":[{"type":"rect","layer":"above","line":{"color":"purple","width":2},"opacity":0.5,"x0":-0.5,"x1":0.5,"xref":"x","y0":-0.5,"y1":4.5,"yref":"y"},{"type":"rect","layer":"above","line":{"color":"purple","width":2},"opacity":0.5,"x0":0.5,"x1":1.5,"xref":"x","y0":4.5,"y1":10.5,"yref":"y"},{"type":"rect","layer":"above","line":{"color":"purple","width":2},"opacity":0.5,"x0":1.5,"x1":2.5,"xref":"x","y0":10.5,"y1":18.5,"yref":"y"},{"type":"rect","layer":"above","line":{"color":"purple","width":2},"opacity":0.5,"x0":2.5,"x1":3.5,"xref":"x","y0":18.5,"y1":26.5,"yref":"y"},{"type":"rect","layer":"above","line":{"color":"purple","width":2},"opacity":0.5,"x0":3.5,"x1":4.5,"xref":"x","y0":26.5,"y1":29.5,"yref":"y"},{"type":"rect","layer":"above","line":{"color":"purple","width":2},"opacity":0.5,"x0":4.5,"x1":5.5,"xref":"x","y0":29.5,"y1":34.5,"yref":"y"},{"type":"rect","layer":"above","line":{"color":"purple","width":2},"opacity":0.5,"x0":5.5,"x1":6.5,"xref":"x","y0":34.5,"y1":43.5,"yref":"y"},{"type":"rect","layer":"above","line":{"color":"purple","width":2},"opacity":0.5,"x0":6.5,"x1":7.5,"xref":"x","y0":43.5,"y1":48.5,"yref":"y"}],"xaxis":{"domain":[0,1],"automargin":true,"title":[]},"yaxis":{"domain":[0,1],"automargin":true,"title":[]},"scene":{"zaxis":{"title":[]}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"showSendToCloud":false},"data":[{"colorbar":{"title":"","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(103,0,31,1)"],["0.0416666666666667","rgba(133,8,36,1)"],["0.0833333333333334","rgba(165,20,41,1)"],["0.125","rgba(187,47,51,1)"],["0.166666666666667","rgba(202,76,65,1)"],["0.208333333333333","rgba(217,102,81,1)"],["0.25","rgba(230,131,103,1)"],["0.291666666666667","rgba(242,159,125,1)"],["0.333333333333333","rgba(248,183,153,1)"],["0.375","rgba(252,205,181,1)"],["0.416666666666667","rgba(252,224,207,1)"],["0.458333333333333","rgba(250,235,227,1)"],["0.5","rgba(247,247,247,1)"],["0.541666666666667","rgba(231,239,244,1)"],["0.583333333333333","rgba(215,232,241,1)"],["0.625","rgba(194,221,236,1)"],["0.666666666666667","rgba(168,208,228,1)"],["0.708333333333333","rgba(140,193,220,1)"],["0.75","rgba(110,172,209,1)"],["0.791666666666667","rgba(75,151,197,1)"],["0.833333333333333","rgba(57,132,187,1)"],["0.875","rgba(43,113,178,1)"],["0.916666666666667","rgba(28,93,159,1)"],["0.958333333333333","rgba(17,70,127,1)"],["1","rgba(5,48,97,1)"]],"showscale":true,"z":[[0.67,null,0.37,0.32,null,null,null,0.38],[0.84,0.41,0.74,0.53,null,null,0.45,null],[0.56,-0.35,null,null,-0.61,null,null,null],[0.52,null,null,null,-0.42,null,null,null],[0.59,0.47,0.67,0.73,0.32,null,0.69,null],[0.32,0.86,0.57,0.6,0.62,null,0.63,null],[null,0.69,0.64,0.52,0.38,null,0.61,null],[null,-0.62,-0.45,-0.49,-0.74,null,-0.59,null],[null,0.66,0.3,null,0.62,null,0.46,null],[null,0.76,0.53,0.59,0.68,null,0.63,null],[0.31,0.74,0.64,0.63,0.5,null,0.6,null],[0.37,0.38,0.73,0.33,null,-0.36,0.52,-0.31],[0.32,0.59,0.75,0.51,0.38,null,0.67,null],[0.37,0.51,0.66,0.65,0.46,null,0.72,null],[0.48,0.46,0.64,0.4,null,null,0.39,null],[0.55,0.4,0.57,0.52,null,null,null,null],[0.46,0.52,0.74,0.44,null,null,0.4,null],[0.57,0.35,0.69,0.43,null,-0.37,0.37,null],[0.37,0.59,0.81,0.63,0.41,null,0.78,null],[null,0.53,0.51,0.77,0.73,null,0.72,null],[0.66,0.48,0.78,0.65,null,null,0.51,-0.32],[null,null,null,null,0.31,null,null,null],[0.54,0.39,0.54,0.67,null,null,0.43,null],[0.33,0.52,0.58,0.45,null,null,0.5,null],[null,null,null,0.35,null,null,null,null],[null,0.32,null,0.56,0.35,null,0.54,0.32],[null,0.66,0.64,0.75,0.6,-0.32,0.76,null],[-0.54,null,null,null,0.68,null,null,null],[null,0.6,null,0.47,0.95,null,0.6,null],[null,0.8,0.63,0.59,0.71,null,0.78,null],[null,null,null,-0.32,null,0.58,null,null],[null,0.29,0.35,0.36,null,0.64,null,-0.29],[null,null,-0.4,-0.41,null,0.78,-0.33,null],[-0.33,null,-0.48,null,null,0.81,-0.38,null],[null,null,null,null,null,null,null,null],[null,0.63,0.47,0.44,0.62,null,0.68,null],[null,0.39,0.36,0.37,0.38,null,0.61,null],[0.4,0.46,0.59,0.58,0.29,null,0.72,null],[null,0.71,0.61,0.58,0.68,null,0.85,null],[0.36,0.53,0.53,0.59,0.39,null,0.72,null],[0.49,0.55,0.78,0.77,0.42,null,0.8,null],[null,0.63,0.72,0.8,0.58,null,0.87,null],[null,0.42,0.38,0.31,null,-0.3,0.6,null],[null,0.38,0.35,0.42,0.49,null,0.69,null],[null,null,null,null,-0.41,null,null,0.53],[-0.44,-0.43,-0.64,-0.59,-0.37,null,-0.66,0.46],[null,-0.34,-0.43,-0.39,-0.33,null,-0.48,0.56],[null,0.34,0.31,0.64,0.56,null,0.58,null],[0.37,0.48,0.54,0.64,0.45,-0.31,0.66,null]],"x":["ConEcFin","Instit","P2P","Physical","Political","Environ","Social","SusEcFin"],"y":["Goods","Services","FDI","PRemit","ForPort","CostImpEx","Tariff","TBTs","TIRcon","RTAs","Visa","StMob","Research","Pat","CultServ","CultGood","Tourist","MigStock","Lang","LPI","Flights","Ship","Bord","Elec","Gas","ConSpeed","Cov4G","Embs","IGOs","UNVote","Renew","PrimEner","CO2","MatCon","Forest","Poverty","Palma","TertGrad","FreePress","TolMin","NGOs","CPI","FemLab","WomParl","PubDebt","PrivDebt","GDPGrow","RDExp","NEET"],"type":"heatmap","zmin":-1,"zmid":0,"zmax":1,"hovertemplate":"corr(%{x}, %{y}) = %{z}<extra><\/extra>","xgap":2,"ygap":2,"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Like <code>plotCorr()</code>, threshold values can be controlled for the discrete colour map. The function is powered by <em>plotly</em>, which means it can be further altered by using Plotly commands. It’s also worth pointing out that any ggplot plot (so all the static plots in COINr) can be made interactive by the <code>plotly::ggplotly()</code> command.</p>
<p>An additional tool that can be used in checking correlations is <a href="https://en.wikipedia.org/wiki/Cronbach%27s_alpha">Cronbach’s alpha</a> - this is a measure of internal consistency or “reliability” of the data, based on the strength of correlations between indicators. COINr has a simple in-built function for calculating this, which can be directed at any data set and subset of indicators as with other functions. To see the consistency of the entire raw data set:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="multivariate-analysis.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCronbach</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Raw&quot;</span>)</span>
<span id="cb39-2"><a href="multivariate-analysis.html#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.2186314</span></span></code></pre></div>
<p>Often, it may be more relevant to look at consistency within aggregation groups. For example, the indicators within the “Physical” pillar of the ASEM data set:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="multivariate-analysis.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCronbach</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="at">icodes =</span> <span class="st">&quot;Physical&quot;</span>, <span class="at">aglev =</span> <span class="dv">1</span>)</span>
<span id="cb40-2"><a href="multivariate-analysis.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.6198804</span></span></code></pre></div>
<p>This shows that the consistency is much stronger within a sub-group. This can also apply to the aggregated data:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="multivariate-analysis.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getCronbach</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="at">icodes =</span> <span class="st">&quot;Conn&quot;</span>, <span class="at">aglev =</span> <span class="dv">2</span>)</span>
<span id="cb41-2"><a href="multivariate-analysis.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.7827171</span></span></code></pre></div>
<p>This shows that the consistency of the sub-pillars within the Connectivity sub-index is quite high.</p>
</div>
<div id="pca" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> PCA</h2>
<p>Another facet of multivariate analysis is principle component analysis (PCA). PCA is used in at least two main ways in composite indicators, first to understand the structure of the data and check for latent variables (the subject of this section); and second as a weighting approach (see the chapter on <a href="weighting-1.html#weighting-2">Weighting</a>).</p>
<p>PCA often seems to occupy an unusual niche where it’s relatively well known, but not always so well-understood. I’m not going to attempt a full explanation of PCA here, because there are many nice explanations available in books and online. However, here is a very rough guide.</p>
<p>The first thing to know is that PCA is based on correlations between indicators, i.e. <em>linear</em> relationships (see caveats of this above). PCA tries to find the linear combination of your indicators that explains the most variance. It’s a bit easier to understand this visually. Let’s consider two variables which are strongly correlated:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="multivariate-analysis.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb42-2"><a href="multivariate-analysis.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co"># random numbers</span></span>
<span id="cb42-3"><a href="multivariate-analysis.html#cb42-3" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">50</span>, <span class="dv">10</span>, <span class="dv">1</span>)</span>
<span id="cb42-4"><a href="multivariate-analysis.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># x2 is 0.5*x1 + gaussian noise</span></span>
<span id="cb42-5"><a href="multivariate-analysis.html#cb42-5" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fl">0.5</span><span class="sc">*</span>x1 <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">50</span>, <span class="dv">0</span>, <span class="fl">0.2</span>)</span>
<span id="cb42-6"><a href="multivariate-analysis.html#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb42-7"><a href="multivariate-analysis.html#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">qplot</span>(x1, x2)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-41-1.png" width="768" /></p>
<p>At the moment, each point/observation lives in a two dimensional space, i.e. it is defined by both its <span class="math inline">\(x_1\)</span> and <span class="math inline">\(x_2\)</span> values. But in a way, this is inefficient because actually the data more or less lives on a straight line.</p>
<p>What PCA does is to rotate the axes (or rotate the data, depending on which way you look at it), so that the first axis aligns itself with the “shape” or “spread” of the data, and the remaining axes are orthogonal to that. We can demonstrate this using R’s built in PCA function.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="multivariate-analysis.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># perform PCA</span></span>
<span id="cb43-2"><a href="multivariate-analysis.html#cb43-2" aria-hidden="true" tabindex="-1"></a>PCAres <span class="ot">&lt;-</span> stats<span class="sc">::</span><span class="fu">prcomp</span>(<span class="fu">cbind</span>(x1, x2), <span class="at">scale =</span> F, <span class="at">center =</span> F)</span>
<span id="cb43-3"><a href="multivariate-analysis.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># get rotated data</span></span>
<span id="cb43-4"><a href="multivariate-analysis.html#cb43-4" aria-hidden="true" tabindex="-1"></a>xr <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(PCAres<span class="sc">$</span>x)</span>
<span id="cb43-5"><a href="multivariate-analysis.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co"># plot on principle components (set y axis to similar scale to orig data)</span></span>
<span id="cb43-6"><a href="multivariate-analysis.html#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(xr, <span class="fu">aes</span>(<span class="at">x =</span> <span class="sc">-</span>PC1, <span class="at">y =</span> PC2)) <span class="sc">+</span></span>
<span id="cb43-7"><a href="multivariate-analysis.html#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb43-8"><a href="multivariate-analysis.html#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span>(<span class="fu">max</span>(x2) <span class="sc">-</span> <span class="fu">min</span>(x2))<span class="sc">/</span><span class="dv">2</span>, (<span class="fu">max</span>(x2) <span class="sc">-</span> <span class="fu">min</span>(x2))<span class="sc">/</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-42-1.png" width="768" /></p>
<p>If you look carefully, you can see that the data corresponds to the previous plot, but just rotated slightly, so that the direction of greatest spread (i.e. greatest variance) is aligned with the first principle component. Here, I have set the y axis to a similar scale to the previous plot to make it easier to see.</p>
<p>There are many reasons for doing PCA, but they often correspond to two main categories: exploratory analysis and dimension reduction. In the context of composite indicators, both of these goals are relevant.</p>
<p>In terms of exploratory analysis, PCA provides somewhat similar information to correlation analysis and Cronbach’s alpha. For any given set of indicators, or aggregates, we can check to see how much variance is explained by the first (few) principle component(s). If the data can be explained by a few PCs, then it suggests that there is a strong latent variable, i.e. the data is shaped something like the figure above, such that if we rotate it, we can find an axis (linear combination) which explains the data pretty well. This is quite similar to the idea of “consistency” in Cronbach’s alpha.</p>
<p>R has built in functions for PCA (as shown above), and there is no need to reinvent the wheel here. But COINr has a function <code>getPCA()</code> which makes it easier to interact with COINs, and follows the familiar COINr syntax. It serves both to give general PCA information, and to provide PCA weights for aggregation.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="multivariate-analysis.html#cb44-1" aria-hidden="true" tabindex="-1"></a>PCAres <span class="ot">&lt;-</span> <span class="fu">getPCA</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="at">aglev =</span> <span class="dv">2</span>, <span class="at">out2 =</span> <span class="st">&quot;list&quot;</span>)</span></code></pre></div>
<p>The <code>getPCA()</code> function allows you to obtain PCA weights for any aggregation level and group(s) of indicators, but we should keep a in mind a few things. First, that PCA weights are created <em>inside groups</em>. So, calling <code>getPCA()</code> with <code>icodes = NULL</code> performs a separate PCA for each aggregation group inside the specified level. In the example above, where <code>aglev = 2</code>, there are two aggregation groups - the pillars belonging to the Connectivity sub-index, and the pillars belonging to the Sustainability sub-index. This means that two PCAs were performed - one for the first group, and one for the second. In other words, by default <code>getPCA()</code> follows the structure of the index.</p>
<p>This is more evident when we examine the output:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="multivariate-analysis.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(PCAres, <span class="at">max.level =</span> <span class="dv">2</span>)</span>
<span id="cb45-2"><a href="multivariate-analysis.html#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="do">## List of 2</span></span>
<span id="cb45-3"><a href="multivariate-analysis.html#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ Weights   :&#39;data.frame&#39;:  60 obs. of  3 variables:</span></span>
<span id="cb45-4"><a href="multivariate-analysis.html#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..$ AgLevel: num [1:60] 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span id="cb45-5"><a href="multivariate-analysis.html#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..$ Code   : chr [1:60] &quot;Goods&quot; &quot;Services&quot; &quot;FDI&quot; &quot;PRemit&quot; ...</span></span>
<span id="cb45-6"><a href="multivariate-analysis.html#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..$ Weight : num [1:60] 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span id="cb45-7"><a href="multivariate-analysis.html#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  $ PCAresults:List of 2</span></span>
<span id="cb45-8"><a href="multivariate-analysis.html#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..$ Conn:List of 3</span></span>
<span id="cb45-9"><a href="multivariate-analysis.html#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="do">##   ..$ Sust:List of 3</span></span></code></pre></div>
<p>The output is <code>.$Weights</code>, which is a full data frame of weights with the corresponding PCA weights substituted in; and <code>.$PCAresults</code> which has one entry for each aggregation group in the level specified. So here, since we targeted <code>aglev = 2</code>, it has done a PCA for each of the two groups - Connectivity and Sustainability.</p>
<p>If you want to perform a PCA over all indicators/aggregates in a specified level, for example all indicators (ignoring any aggregation groups), set <code>by_groups = FALSE</code>.</p>
<p>R has built in tools for inspecting PCA. For example, we can see a summary of the results. Each of the entries in the <code>.$PCAresults</code> folder is a PCA object generated by <code>stats::prcomp()</code>, which can be fed into functions like <code>summary()</code>:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="multivariate-analysis.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(PCAres<span class="sc">$</span>PCAresults<span class="sc">$</span>Conn<span class="sc">$</span>PCAres)</span>
<span id="cb46-2"><a href="multivariate-analysis.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Importance of components:</span></span>
<span id="cb46-3"><a href="multivariate-analysis.html#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="do">##                           PC1    PC2     PC3     PC4     PC5</span></span>
<span id="cb46-4"><a href="multivariate-analysis.html#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Standard deviation     1.7156 1.1598 0.58897 0.46337 0.38718</span></span>
<span id="cb46-5"><a href="multivariate-analysis.html#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Proportion of Variance 0.5887 0.2690 0.06938 0.04294 0.02998</span></span>
<span id="cb46-6"><a href="multivariate-analysis.html#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Cumulative Proportion  0.5887 0.8577 0.92708 0.97002 1.00000</span></span></code></pre></div>
<p>This tells us that using the five pillars inside the Connectivity sub-index, we can explain 59% of the variance with the first principle component. This could be interpreted as a “latent variable.” In terms of composite indicators, we generally prefer to be able to explain a significant proportion of the variance with the first principle component. This is also useful information because if we now apply the weights stored in <code>.$Weights</code>, this would result in explaining 59% of the variance of the underlying indicators. In other words, we are passing on a decent amount of information to the sub-index.</p>
<p>Another way to look at PCA results is using a biplot. Again there is no need to build anything in COINr for this. You can always use base R or in this case the <strong>ggbiplot</strong> package (needs to be installed from Github):</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="multivariate-analysis.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install ggbiplot if you don&#39;t have it</span></span>
<span id="cb47-2"><a href="multivariate-analysis.html#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co"># library(devtools)</span></span>
<span id="cb47-3"><a href="multivariate-analysis.html#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co"># install_github(&quot;vqv/ggbiplot&quot;)</span></span>
<span id="cb47-4"><a href="multivariate-analysis.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggbiplot)</span>
<span id="cb47-5"><a href="multivariate-analysis.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Loading required package: plyr</span></span>
<span id="cb47-6"><a href="multivariate-analysis.html#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Loading required package: scales</span></span>
<span id="cb47-7"><a href="multivariate-analysis.html#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Loading required package: grid</span></span>
<span id="cb47-8"><a href="multivariate-analysis.html#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggbiplot</span>(PCAres<span class="sc">$</span>PCAresults<span class="sc">$</span>Conn<span class="sc">$</span>PCAres)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-46-1.png" width="768" /></p>
<p>We can make this more interesting by pulling in some information from the COIN, such as the names of units, and grouping them using one of the grouping variables we have present with the data.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="multivariate-analysis.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggbiplot</span>(PCAres<span class="sc">$</span>PCAresults<span class="sc">$</span>Conn<span class="sc">$</span>PCAres,</span>
<span id="cb48-2"><a href="multivariate-analysis.html#cb48-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">labels =</span> ASEM<span class="sc">$</span>Data<span class="sc">$</span>Aggregated<span class="sc">$</span>UnitCode,</span>
<span id="cb48-3"><a href="multivariate-analysis.html#cb48-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">groups =</span> ASEM<span class="sc">$</span>Data<span class="sc">$</span>Aggregated<span class="sc">$</span>Group_EurAsia)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-47-1.png" width="768" /></p>
<p>Now this looks quite interesting: we see that the distinction between Asian and European countries is quite strong. We can also see the clustering of countries - many European countries are clustered in the upper right, except some small countries like Luxembourg, Malta and Singapore which form their own group.</p>
<p>We will not go any further to these results. But we will wrap it up by reminding that PCA is used in two ways here. First is <em>exploratory analysis</em>, which aims to understand the structure of the data and can help to pick out groups. Second is <em>dimensionality reduction</em> - this might be a bit less obvious, but composite indicators are really an exercise in dimensionality reduction. We begin with a large number of variables and try to condense them down into one. PCA can help to find the weights that satisfy certain properties, such as maximising variance explained.</p>
<p>Last but not least, consider some caveats. PCA rests on assumptions of linearity and joint-normality, which are rarely true in real indicator data. Like correlations, however, that doesn’t mean that the results are meaningless, and modest departures from linearity should still allow relevant conclusions to be drawn.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="initial-visualisation-and-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-data-and-imputation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02b-Multivariate.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
