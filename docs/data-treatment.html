<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Data Treatment | Composite Indicator Development and Analysis in R with COINr</title>
  <meta name="description" content="Composite indicators with COINr" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Data Treatment | Composite Indicator Development and Analysis in R with COINr" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Composite indicators with COINr" />
  <meta name="github-repo" content="bluefoxr/COINrDoc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Data Treatment | Composite Indicator Development and Analysis in R with COINr" />
  
  <meta name="twitter:description" content="Composite indicators with COINr" />
  

<meta name="author" content="William Becker" />


<meta name="date" content="2021-07-02" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="denomination.html"/>
<link rel="next" href="normalisation.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-16.12.0/react.min.js"></script>
<script src="libs/react-16.12.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="libs/reactable-binding-0.2.3/reactable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">COINr Documentation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#what-does-it-do"><i class="fa fa-check"></i><b>1.3</b> What does it do?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#how-to-use-this-manual"><i class="fa fa-check"></i><b>1.4</b> How to use this manual</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#demo"><i class="fa fa-check"></i><b>1.5</b> Demo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="foundations.html"><a href="foundations.html"><i class="fa fa-check"></i><b>2</b> Foundations</a>
<ul>
<li class="chapter" data-level="2.1" data-path="foundations.html"><a href="foundations.html#terminology"><i class="fa fa-check"></i><b>2.1</b> Terminology</a></li>
<li class="chapter" data-level="2.2" data-path="foundations.html"><a href="foundations.html#coinr-syntax"><i class="fa fa-check"></i><b>2.2</b> COINr syntax</a></li>
<li class="chapter" data-level="2.3" data-path="foundations.html"><a href="foundations.html#a-map-of-coinr"><i class="fa fa-check"></i><b>2.3</b> A map of COINr</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="foundations.html"><a href="foundations.html#construction"><i class="fa fa-check"></i><b>2.3.1</b> Construction</a></li>
<li class="chapter" data-level="2.3.2" data-path="foundations.html"><a href="foundations.html#visualisation-and-presenting"><i class="fa fa-check"></i><b>2.3.2</b> Visualisation and presenting</a></li>
<li class="chapter" data-level="2.3.3" data-path="foundations.html"><a href="foundations.html#adjustment-and-comparison"><i class="fa fa-check"></i><b>2.3.3</b> Adjustment and comparison</a></li>
<li class="chapter" data-level="2.3.4" data-path="foundations.html"><a href="foundations.html#analysis"><i class="fa fa-check"></i><b>2.3.4</b> Analysis</a></li>
<li class="chapter" data-level="2.3.5" data-path="foundations.html"><a href="foundations.html#interactive-apps"><i class="fa fa-check"></i><b>2.3.5</b> Interactive apps</a></li>
<li class="chapter" data-level="2.3.6" data-path="foundations.html"><a href="foundations.html#importexport"><i class="fa fa-check"></i><b>2.3.6</b> Import/export</a></li>
<li class="chapter" data-level="2.3.7" data-path="foundations.html"><a href="foundations.html#other-functions"><i class="fa fa-check"></i><b>2.3.7</b> Other functions</a></li>
<li class="chapter" data-level="2.3.8" data-path="foundations.html"><a href="foundations.html#data"><i class="fa fa-check"></i><b>2.3.8</b> Data</a></li>
<li class="chapter" data-level="2.3.9" data-path="foundations.html"><a href="foundations.html#finally"><i class="fa fa-check"></i><b>2.3.9</b> Finally</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="foundations.html"><a href="foundations.html#tips-for-using-coinr"><i class="fa fa-check"></i><b>2.4</b> Tips for using COINr</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="foundations.html"><a href="foundations.html#use-scripts-and-r-markdown"><i class="fa fa-check"></i><b>2.4.1</b> Use scripts and R Markdown</a></li>
<li class="chapter" data-level="2.4.2" data-path="foundations.html"><a href="foundations.html#missing-data"><i class="fa fa-check"></i><b>2.4.2</b> Missing data</a></li>
<li class="chapter" data-level="2.4.3" data-path="foundations.html"><a href="foundations.html#plotting"><i class="fa fa-check"></i><b>2.4.3</b> Plotting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html"><i class="fa fa-check"></i><b>3</b> COINs: the currency of COINr</a>
<ul>
<li class="chapter" data-level="3.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#inside-a-coin"><i class="fa fa-check"></i><b>3.1</b> Inside a COIN</a></li>
<li class="chapter" data-level="3.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#the-three-inputs"><i class="fa fa-check"></i><b>3.2</b> The three inputs</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-data"><i class="fa fa-check"></i><b>3.2.1</b> Indicator data</a></li>
<li class="chapter" data-level="3.2.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-metadata"><i class="fa fa-check"></i><b>3.2.2</b> Indicator metadata</a></li>
<li class="chapter" data-level="3.2.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#aggregation-metadata"><i class="fa fa-check"></i><b>3.2.3</b> Aggregation metadata</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#putting-everything-together"><i class="fa fa-check"></i><b>3.3</b> Putting everything together</a></li>
<li class="chapter" data-level="3.4" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#moving-on"><i class="fa fa-check"></i><b>3.4</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html"><i class="fa fa-check"></i><b>4</b> Initial visualisation and analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#structure"><i class="fa fa-check"></i><b>4.1</b> Structure</a></li>
<li class="chapter" data-level="4.2" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#distributions"><i class="fa fa-check"></i><b>4.2</b> Distributions</a></li>
<li class="chapter" data-level="4.3" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#ranks-and-maps"><i class="fa fa-check"></i><b>4.3</b> Ranks and Maps</a></li>
<li class="chapter" data-level="4.4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#statistics-and-analysis"><i class="fa fa-check"></i><b>4.4</b> Statistics and analysis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html"><i class="fa fa-check"></i><b>5</b> Multivariate analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#correlations"><i class="fa fa-check"></i><b>5.1</b> Correlations</a></li>
<li class="chapter" data-level="5.2" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#pca"><i class="fa fa-check"></i><b>5.2</b> PCA</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html"><i class="fa fa-check"></i><b>6</b> Missing data and Imputation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#concept"><i class="fa fa-check"></i><b>6.1</b> Concept</a></li>
<li class="chapter" data-level="6.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#data-checks-and-screening"><i class="fa fa-check"></i><b>6.2</b> Data checks and screening</a></li>
<li class="chapter" data-level="6.3" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#imputation-in-coinr"><i class="fa fa-check"></i><b>6.3</b> Imputation in COINr</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-column"><i class="fa fa-check"></i><b>6.3.1</b> By column</a></li>
<li class="chapter" data-level="6.3.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-row"><i class="fa fa-check"></i><b>6.3.2</b> By row</a></li>
<li class="chapter" data-level="6.3.3" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-column-and-row"><i class="fa fa-check"></i><b>6.3.3</b> By column and row</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="denomination.html"><a href="denomination.html"><i class="fa fa-check"></i><b>7</b> Denomination</a>
<ul>
<li class="chapter" data-level="7.1" data-path="denomination.html"><a href="denomination.html#concept-1"><i class="fa fa-check"></i><b>7.1</b> Concept</a></li>
<li class="chapter" data-level="7.2" data-path="denomination.html"><a href="denomination.html#denominating-in-coinr"><i class="fa fa-check"></i><b>7.2</b> Denominating in COINr</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="denomination.html"><a href="denomination.html#on-coins"><i class="fa fa-check"></i><b>7.2.1</b> On COINs</a></li>
<li class="chapter" data-level="7.2.2" data-path="denomination.html"><a href="denomination.html#on-data-frames"><i class="fa fa-check"></i><b>7.2.2</b> On data frames</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="denomination.html"><a href="denomination.html#when-to-denominate-and-by-what"><i class="fa fa-check"></i><b>7.3</b> When to denominate, and by what?</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-treatment.html"><a href="data-treatment.html"><i class="fa fa-check"></i><b>8</b> Data Treatment</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-treatment.html"><a href="data-treatment.html#why-treat-data"><i class="fa fa-check"></i><b>8.1</b> Why treat data?</a></li>
<li class="chapter" data-level="8.2" data-path="data-treatment.html"><a href="data-treatment.html#how-to-treat-data"><i class="fa fa-check"></i><b>8.2</b> How to treat data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="data-treatment.html"><a href="data-treatment.html#winsorisation"><i class="fa fa-check"></i><b>8.2.1</b> Winsorisation</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-treatment.html"><a href="data-treatment.html#transformation"><i class="fa fa-check"></i><b>8.2.2</b> Transformation</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-treatment.html"><a href="data-treatment.html#data-treatment-in-coinr"><i class="fa fa-check"></i><b>8.3</b> Data treatment in COINr</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-treatment.html"><a href="data-treatment.html#global-treatment"><i class="fa fa-check"></i><b>8.3.1</b> Global treatment</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-treatment.html"><a href="data-treatment.html#individual-treatment"><i class="fa fa-check"></i><b>8.3.2</b> Individual treatment</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-treatment.html"><a href="data-treatment.html#interactive-visualisation"><i class="fa fa-check"></i><b>8.4</b> Interactive visualisation</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="normalisation.html"><a href="normalisation.html"><i class="fa fa-check"></i><b>9</b> Normalisation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="normalisation.html"><a href="normalisation.html#approaches"><i class="fa fa-check"></i><b>9.1</b> Approaches</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="normalisation.html"><a href="normalisation.html#first-adjust-direction"><i class="fa fa-check"></i><b>9.1.1</b> First: adjust direction</a></li>
<li class="chapter" data-level="9.1.2" data-path="normalisation.html"><a href="normalisation.html#linear-transformations"><i class="fa fa-check"></i><b>9.1.2</b> Linear transformations</a></li>
<li class="chapter" data-level="9.1.3" data-path="normalisation.html"><a href="normalisation.html#nonlinear-transformations"><i class="fa fa-check"></i><b>9.1.3</b> Nonlinear transformations</a></li>
<li class="chapter" data-level="9.1.4" data-path="normalisation.html"><a href="normalisation.html#distances"><i class="fa fa-check"></i><b>9.1.4</b> Distances</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="normalisation.html"><a href="normalisation.html#normalisation-in-coinr"><i class="fa fa-check"></i><b>9.2</b> Normalisation in COINr</a></li>
<li class="chapter" data-level="9.3" data-path="normalisation.html"><a href="normalisation.html#individual-normalisation"><i class="fa fa-check"></i><b>9.3</b> Individual normalisation</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="aggregation.html"><a href="aggregation.html"><i class="fa fa-check"></i><b>10</b> Aggregation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="aggregation.html"><a href="aggregation.html#weighting"><i class="fa fa-check"></i><b>10.1</b> Weighting</a></li>
<li class="chapter" data-level="10.2" data-path="aggregation.html"><a href="aggregation.html#approaches-1"><i class="fa fa-check"></i><b>10.2</b> Approaches</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="aggregation.html"><a href="aggregation.html#means"><i class="fa fa-check"></i><b>10.2.1</b> Means</a></li>
<li class="chapter" data-level="10.2.2" data-path="aggregation.html"><a href="aggregation.html#other-methods"><i class="fa fa-check"></i><b>10.2.2</b> Other methods</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="aggregation.html"><a href="aggregation.html#aggregation-in-coinr"><i class="fa fa-check"></i><b>10.3</b> Aggregation in COINr</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="weighting-1.html"><a href="weighting-1.html"><i class="fa fa-check"></i><b>11</b> Weighting</a>
<ul>
<li class="chapter" data-level="11.1" data-path="weighting-1.html"><a href="weighting-1.html#approaches-to-weighting"><i class="fa fa-check"></i><b>11.1</b> Approaches to weighting</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="weighting-1.html"><a href="weighting-1.html#equal-weighting"><i class="fa fa-check"></i><b>11.1.1</b> Equal weighting</a></li>
<li class="chapter" data-level="11.1.2" data-path="weighting-1.html"><a href="weighting-1.html#budget-allocation"><i class="fa fa-check"></i><b>11.1.2</b> Budget allocation</a></li>
<li class="chapter" data-level="11.1.3" data-path="weighting-1.html"><a href="weighting-1.html#principle-component-analysis"><i class="fa fa-check"></i><b>11.1.3</b> Principle component analysis</a></li>
<li class="chapter" data-level="11.1.4" data-path="weighting-1.html"><a href="weighting-1.html#weight-optimisation"><i class="fa fa-check"></i><b>11.1.4</b> Weight optimisation</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="weighting-1.html"><a href="weighting-1.html#weighting-tools-in-coinr"><i class="fa fa-check"></i><b>11.2</b> Weighting tools in COINr</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="weighting-1.html"><a href="weighting-1.html#manual-weighting"><i class="fa fa-check"></i><b>11.2.1</b> Manual weighting</a></li>
<li class="chapter" data-level="11.2.2" data-path="weighting-1.html"><a href="weighting-1.html#interactive-re-weighting-with-rew8r"><i class="fa fa-check"></i><b>11.2.2</b> Interactive re-weighting with ReW8R</a></li>
<li class="chapter" data-level="11.2.3" data-path="weighting-1.html"><a href="weighting-1.html#automatic-re-weighting"><i class="fa fa-check"></i><b>11.2.3</b> Automatic re-weighting</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="weighting-1.html"><a href="weighting-1.html#effective-weights"><i class="fa fa-check"></i><b>11.3</b> Effective weights</a></li>
<li class="chapter" data-level="11.4" data-path="weighting-1.html"><a href="weighting-1.html#final-points"><i class="fa fa-check"></i><b>11.4</b> Final points</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="visualising-results.html"><a href="visualising-results.html"><i class="fa fa-check"></i><b>12</b> Visualising results</a>
<ul>
<li class="chapter" data-level="12.1" data-path="visualising-results.html"><a href="visualising-results.html#tables"><i class="fa fa-check"></i><b>12.1</b> Tables</a></li>
<li class="chapter" data-level="12.2" data-path="visualising-results.html"><a href="visualising-results.html#plots"><i class="fa fa-check"></i><b>12.2</b> Plots</a></li>
<li class="chapter" data-level="12.3" data-path="visualising-results.html"><a href="visualising-results.html#interactive-exploration"><i class="fa fa-check"></i><b>12.3</b> Interactive exploration</a></li>
<li class="chapter" data-level="12.4" data-path="visualising-results.html"><a href="visualising-results.html#unit-reports"><i class="fa fa-check"></i><b>12.4</b> Unit reports</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html"><i class="fa fa-check"></i><b>13</b> Adjustments and comparisons</a>
<ul>
<li class="chapter" data-level="13.1" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#regeneration"><i class="fa fa-check"></i><b>13.1</b> Regeneration</a></li>
<li class="chapter" data-level="13.2" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#adjustments"><i class="fa fa-check"></i><b>13.2</b> Adjustments</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#addingremoving-indicators"><i class="fa fa-check"></i><b>13.2.1</b> Adding/removing indicators</a></li>
<li class="chapter" data-level="13.2.2" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#other-adjustments"><i class="fa fa-check"></i><b>13.2.2</b> Other adjustments</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#comparisons"><i class="fa fa-check"></i><b>13.3</b> Comparisons</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html"><i class="fa fa-check"></i><b>14</b> Sensitivity analysis</a>
<ul>
<li class="chapter" data-level="14.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#about"><i class="fa fa-check"></i><b>14.1</b> About</a></li>
<li class="chapter" data-level="14.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#five-steps"><i class="fa fa-check"></i><b>14.2</b> Five steps</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#specifying-the-model"><i class="fa fa-check"></i><b>14.2.1</b> Specifying the model</a></li>
<li class="chapter" data-level="14.2.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#which-assumptions-to-vary"><i class="fa fa-check"></i><b>14.2.2</b> Which assumptions to vary</a></li>
<li class="chapter" data-level="14.2.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#alternative-values"><i class="fa fa-check"></i><b>14.2.3</b> Alternative values</a></li>
<li class="chapter" data-level="14.2.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#selecting-the-output"><i class="fa fa-check"></i><b>14.2.4</b> Selecting the output</a></li>
<li class="chapter" data-level="14.2.5" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#sa-methodology"><i class="fa fa-check"></i><b>14.2.5</b> SA methodology</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#variance-based-sensitivity-analysis"><i class="fa fa-check"></i><b>14.3</b> Variance-based sensitivity analysis</a></li>
<li class="chapter" data-level="14.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#sensitivity-in-coinr"><i class="fa fa-check"></i><b>14.4</b> Sensitivity in COINr</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#general-specifications"><i class="fa fa-check"></i><b>14.4.1</b> General specifications</a></li>
<li class="chapter" data-level="14.4.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#varying-weights"><i class="fa fa-check"></i><b>14.4.2</b> Varying weights</a></li>
<li class="chapter" data-level="14.4.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#running-an-uncertainty-analysis"><i class="fa fa-check"></i><b>14.4.3</b> Running an uncertainty analysis</a></li>
<li class="chapter" data-level="14.4.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#running-a-sensitivity-analysis"><i class="fa fa-check"></i><b>14.4.4</b> Running a sensitivity analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="helper-functions.html"><a href="helper-functions.html"><i class="fa fa-check"></i><b>15</b> Helper functions</a>
<ul>
<li class="chapter" data-level="15.1" data-path="helper-functions.html"><a href="helper-functions.html#r-interfaces"><i class="fa fa-check"></i><b>15.1</b> R Interfaces</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="helper-functions.html"><a href="helper-functions.html#data-import"><i class="fa fa-check"></i><b>15.1.1</b> Data import</a></li>
<li class="chapter" data-level="15.1.2" data-path="helper-functions.html"><a href="helper-functions.html#export-to-excel"><i class="fa fa-check"></i><b>15.1.2</b> Export to Excel</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="helper-functions.html"><a href="helper-functions.html#selecting-data-sets-and-indicators"><i class="fa fa-check"></i><b>15.2</b> Selecting data sets and indicators</a></li>
<li class="chapter" data-level="15.3" data-path="helper-functions.html"><a href="helper-functions.html#rounding-data-frames"><i class="fa fa-check"></i><b>15.3</b> Rounding data frames</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html"><i class="fa fa-check"></i><b>16</b> Appendix: R Resources</a>
<ul>
<li class="chapter" data-level="16.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#introduction-to-r"><i class="fa fa-check"></i><b>16.1</b> Introduction to R</a></li>
<li class="chapter" data-level="16.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#advanced-resources"><i class="fa fa-check"></i><b>16.2</b> Advanced resources</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#programming"><i class="fa fa-check"></i><b>16.2.1</b> Programming</a></li>
<li class="chapter" data-level="16.2.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#visualisation"><i class="fa fa-check"></i><b>16.2.2</b> Visualisation</a></li>
<li class="chapter" data-level="16.2.3" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#other"><i class="fa fa-check"></i><b>16.2.3</b> Other</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>17</b> FAQ</a></li>
<li class="chapter" data-level="18" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html"><i class="fa fa-check"></i><b>18</b> Appendix: Building a Composite Indicator Example</a>
<ul>
<li class="chapter" data-level="18.1" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#before-coinr-bc"><i class="fa fa-check"></i><b>18.1</b> Before COINr (BC)</a></li>
<li class="chapter" data-level="18.2" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#load-data-and-assemble"><i class="fa fa-check"></i><b>18.2</b> Load data and assemble</a></li>
<li class="chapter" data-level="18.3" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#check-the-data"><i class="fa fa-check"></i><b>18.3</b> Check the data</a></li>
<li class="chapter" data-level="18.4" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#denomination-1"><i class="fa fa-check"></i><b>18.4</b> Denomination</a></li>
<li class="chapter" data-level="18.5" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#imputation"><i class="fa fa-check"></i><b>18.5</b> Imputation</a></li>
<li class="chapter" data-level="18.6" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#data-treatment-1"><i class="fa fa-check"></i><b>18.6</b> Data treatment</a></li>
<li class="chapter" data-level="18.7" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#normalisation-1"><i class="fa fa-check"></i><b>18.7</b> Normalisation</a></li>
<li class="chapter" data-level="18.8" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#aggregation-1"><i class="fa fa-check"></i><b>18.8</b> Aggregation</a></li>
<li class="chapter" data-level="18.9" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#visualisation-1"><i class="fa fa-check"></i><b>18.9</b> Visualisation</a></li>
<li class="chapter" data-level="18.10" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#comparison"><i class="fa fa-check"></i><b>18.10</b> Comparison</a></li>
<li class="chapter" data-level="18.11" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#export"><i class="fa fa-check"></i><b>18.11</b> Export</a></li>
<li class="chapter" data-level="18.12" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#summary"><i class="fa fa-check"></i><b>18.12</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html"><i class="fa fa-check"></i><b>19</b> Appendix: Analysing a Composite Indicator Example</a>
<ul>
<li class="chapter" data-level="19.1" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#loading-data"><i class="fa fa-check"></i><b>19.1</b> Loading data</a></li>
<li class="chapter" data-level="19.2" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#check-calculations"><i class="fa fa-check"></i><b>19.2</b> Check calculations</a></li>
<li class="chapter" data-level="19.3" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#indicator-statistics"><i class="fa fa-check"></i><b>19.3</b> Indicator statistics</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>20</b> Acknowledgements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Composite Indicator Development and Analysis in R with COINr</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-treatment" class="section level1" number="8">
<h1><span class="header-section-number">Chapter 8</span> Data Treatment</h1>
<p>Data treatment is the process of altering indicators to improve their statistical properties, mainly for the purposes of aggregation.</p>
<p>Data treatment is a delicate subject, because it essentially involves changing the values of certain observations, or transforming an entire distribution. This entails balancing two opposing considerations:</p>
<ul>
<li>On the one hand, treatment should be used as sparingly as possible, because you are altering one or more known data points.</li>
<li>On the other hand, <em>this is only done for the purposes of aggregation,</em> (i.e. creating a composite score), and since composite indicators are normally presented with the index scores and original data accessible underneath, the underlying data would normally be presented in its original form.</li>
</ul>
<p>Therefore, be careful, but also realise that data treatment is not unethical, it’s simply an assumption in a statistical process. Like any other step or assumption though, any data treatment should be carefully recorded.</p>
<div id="why-treat-data" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Why treat data?</h2>
<p>There can be many reasons to treat data, but in composite indicators the main reason is to remove outliers or adjust heavily-skewed distributions. Outliers can exist because of errors in measurement and data processing, and should always be double-checked. But often, they are simply a reflection of reality. Outliers and skewed distributions are common in economics. One has to look no further than the in-built ASEM data set, and the denominating variables of population, GDP, energy consumption and country area:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data-treatment.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plotIndDist</span>(WorldDenoms)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/DenomOutlierplots-1.png" width="768" /></p>
<p>To illustrate why this can be a problem, consider the following artificial example.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data-treatment.html#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb64-2"><a href="data-treatment.html#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb64-3"><a href="data-treatment.html#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="co"># normally-distributed data</span></span>
<span id="cb64-4"><a href="data-treatment.html#cb64-4" aria-hidden="true" tabindex="-1"></a>outlierdata <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">100</span>)</span>
<span id="cb64-5"><a href="data-treatment.html#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="co"># two outliers</span></span>
<span id="cb64-6"><a href="data-treatment.html#cb64-6" aria-hidden="true" tabindex="-1"></a>outlierdata <span class="ot">&lt;-</span> <span class="fu">c</span>(outlierdata, <span class="dv">10</span>, <span class="dv">25</span>)</span>
<span id="cb64-7"><a href="data-treatment.html#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb64-8"><a href="data-treatment.html#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">x =</span> outlierdata, <span class="at">type =</span> <span class="st">&quot;histogram&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-afd0aba5d8c83be7a32c" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-afd0aba5d8c83be7a32c">{"x":{"visdat":{"d7034fa2779":["function () ","plotlyVisDat"]},"cur_data":"d7034fa2779","attrs":{"d7034fa2779":{"x":[0.414617189073889,1.15417746581474,1.09347557872021,-1.7208457517911,-1.66302885781596,1.31778992834093,-0.288176434654804,0.171581028232729,-1.21542861311687,-0.060930673535362,1.17020303880467,-1.24121193650175,-1.14249437040402,-0.509419666774255,0.23612480552607,0.195874529501383,-0.0297587200968011,0.358585854614579,-1.22427096458399,2.46593197188645,1.09994593375565,-1.06610727960012,-0.790351775897396,-0.955532682297517,1.13414493145382,0.914047717604892,0.162838586123277,-0.171417234321875,-2.22150292997222,-0.757226036292351,-0.366955109213183,0.375058727086742,0.542776410813224,1.87437984462289,0.292082800432866,1.49657261377941,-1.29594770980117,1.32223632074968,0.731612021968569,-2.94869558934603,-1.87092886841649,-0.105983713176499,1.12394765874395,-0.184490809181441,1.50438944084318,1.60558915568575,-0.568556171587073,-0.421642376630585,-0.175561718420773,0.426294694420831,-0.621747470247542,-0.544197716269026,-0.0209186492183654,0.512724639329838,0.718680899538959,-1.38602006855341,0.571072786591492,0.260020405422142,0.99335772300036,-0.823199826363684,-0.0970563305170975,0.864518995328813,0.168628722678243,1.64847706784817,0.107278793205992,0.470131437377618,-0.599226987629339,-0.572187902333367,0.920053451233409,0.767021427032959,-0.299732367365457,0.411768713069872,0.852726432563353,-0.089352229854433,0.795884766513923,0.226619439640669,1.36647868984002,0.544884091485714,0.425683311198575,-1.04967306618386,0.00229488223042521,-1.09364005682075,-0.129886022783616,0.087310859277973,-0.113984535330739,-1.09846177590815,0.0725871345335238,0.179295309191971,-0.573290202882657,0.151094539257337,1.43176754288814,-0.29610665794187,-0.432574453978757,-0.928227090668107,0.562657865274858,-1.14604786201405,0.163100770955193,-0.6379476130553,-0.086966939820072,-0.250543598006957,10,25],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"histogram"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":[]},"yaxis":{"domain":[0,1],"automargin":true},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[0.414617189073889,1.15417746581474,1.09347557872021,-1.7208457517911,-1.66302885781596,1.31778992834093,-0.288176434654804,0.171581028232729,-1.21542861311687,-0.060930673535362,1.17020303880467,-1.24121193650175,-1.14249437040402,-0.509419666774255,0.23612480552607,0.195874529501383,-0.0297587200968011,0.358585854614579,-1.22427096458399,2.46593197188645,1.09994593375565,-1.06610727960012,-0.790351775897396,-0.955532682297517,1.13414493145382,0.914047717604892,0.162838586123277,-0.171417234321875,-2.22150292997222,-0.757226036292351,-0.366955109213183,0.375058727086742,0.542776410813224,1.87437984462289,0.292082800432866,1.49657261377941,-1.29594770980117,1.32223632074968,0.731612021968569,-2.94869558934603,-1.87092886841649,-0.105983713176499,1.12394765874395,-0.184490809181441,1.50438944084318,1.60558915568575,-0.568556171587073,-0.421642376630585,-0.175561718420773,0.426294694420831,-0.621747470247542,-0.544197716269026,-0.0209186492183654,0.512724639329838,0.718680899538959,-1.38602006855341,0.571072786591492,0.260020405422142,0.99335772300036,-0.823199826363684,-0.0970563305170975,0.864518995328813,0.168628722678243,1.64847706784817,0.107278793205992,0.470131437377618,-0.599226987629339,-0.572187902333367,0.920053451233409,0.767021427032959,-0.299732367365457,0.411768713069872,0.852726432563353,-0.089352229854433,0.795884766513923,0.226619439640669,1.36647868984002,0.544884091485714,0.425683311198575,-1.04967306618386,0.00229488223042521,-1.09364005682075,-0.129886022783616,0.087310859277973,-0.113984535330739,-1.09846177590815,0.0725871345335238,0.179295309191971,-0.573290202882657,0.151094539257337,1.43176754288814,-0.29610665794187,-0.432574453978757,-0.928227090668107,0.562657865274858,-1.14604786201405,0.163100770955193,-0.6379476130553,-0.086966939820072,-0.250543598006957,10,25],"type":"histogram","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Here we have the large majority of observations with values which are crammed into the bottom fifth of the scale, and two observations that are much higher, i.e. they are outliers. If we were to normalise this distribution using a min-max method scaled to [0, 100], for example, this would produce an indicator where the large majority of units have a very low score.</p>
<p>This might not reflect the narrative that you want to convey. It may be, for example, that values above the median are “good,” and in this case, values in the 1.5-2.5 range are “very good.” Two units have truly exception values, but that shouldn’t take away from the fact that other units have values that are considered to be good.</p>
<p>The problem is that by normalising to [0, 100], these units with “very good” values will have normalised scores of around 20 (out of 100), which when compared to other indicators, is a “bad” score. And this will be reflected in the aggregated score. In summary, the outlying values are “dominating” the scale, which reduces the discriminatory power of the indicator.</p>
<p>A few things to consider here are that:</p>
<ol style="list-style-type: decimal">
<li>The outlier problem in composite indicators is mostly linked to the fact that you are aggregating indicators. If you are not aggregating, the outlying values may not be so much of a problem.</li>
<li>It might be that you <em>want</em> to keep the distribution as it is, and let the indicator be defined by its outliers. This will depend on the objectives of the index.</li>
<li>If you do wish to do something about the outlying values, there are two possibilities. One is to treat the data, and this is described in the rest of this chapter The second is to use a normalisation method that is less sensitive to outliers - this is dealt with in the <a href="appendix-building-a-composite-indicator-example.html#normalisation-1">Normalisation</a> chapter.</li>
</ol>
</div>
<div id="how-to-treat-data" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> How to treat data</h2>
<p>If you decide to treat the data before normalising, there are a two main options.</p>
<div id="winsorisation" class="section level3" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Winsorisation</h3>
<p>The first is to <em>Winsorise</em> the data. Winsorisation involves reassigning outlying points to the next highest point, or to a percentile value. To do this manually, using the data from the previous section, it would look like this:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data-treatment.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get position of maximum value</span></span>
<span id="cb65-2"><a href="data-treatment.html#cb65-2" aria-hidden="true" tabindex="-1"></a>imax <span class="ot">&lt;-</span> <span class="fu">which</span>(outlierdata<span class="sc">==</span><span class="fu">max</span>(outlierdata))</span>
<span id="cb65-3"><a href="data-treatment.html#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># reassign with next highest value</span></span>
<span id="cb65-4"><a href="data-treatment.html#cb65-4" aria-hidden="true" tabindex="-1"></a>outlierdata[imax] <span class="ot">&lt;-</span> <span class="fu">max</span>(outlierdata[<span class="sc">-</span>imax])</span>
<span id="cb65-5"><a href="data-treatment.html#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(<span class="at">x =</span> outlierdata, <span class="at">type =</span> <span class="st">&quot;histogram&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-5f0500e7a6df2d318593" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-5f0500e7a6df2d318593">{"x":{"visdat":{"d705d64695":["function () ","plotlyVisDat"]},"cur_data":"d705d64695","attrs":{"d705d64695":{"x":[0.414617189073889,1.15417746581474,1.09347557872021,-1.7208457517911,-1.66302885781596,1.31778992834093,-0.288176434654804,0.171581028232729,-1.21542861311687,-0.060930673535362,1.17020303880467,-1.24121193650175,-1.14249437040402,-0.509419666774255,0.23612480552607,0.195874529501383,-0.0297587200968011,0.358585854614579,-1.22427096458399,2.46593197188645,1.09994593375565,-1.06610727960012,-0.790351775897396,-0.955532682297517,1.13414493145382,0.914047717604892,0.162838586123277,-0.171417234321875,-2.22150292997222,-0.757226036292351,-0.366955109213183,0.375058727086742,0.542776410813224,1.87437984462289,0.292082800432866,1.49657261377941,-1.29594770980117,1.32223632074968,0.731612021968569,-2.94869558934603,-1.87092886841649,-0.105983713176499,1.12394765874395,-0.184490809181441,1.50438944084318,1.60558915568575,-0.568556171587073,-0.421642376630585,-0.175561718420773,0.426294694420831,-0.621747470247542,-0.544197716269026,-0.0209186492183654,0.512724639329838,0.718680899538959,-1.38602006855341,0.571072786591492,0.260020405422142,0.99335772300036,-0.823199826363684,-0.0970563305170975,0.864518995328813,0.168628722678243,1.64847706784817,0.107278793205992,0.470131437377618,-0.599226987629339,-0.572187902333367,0.920053451233409,0.767021427032959,-0.299732367365457,0.411768713069872,0.852726432563353,-0.089352229854433,0.795884766513923,0.226619439640669,1.36647868984002,0.544884091485714,0.425683311198575,-1.04967306618386,0.00229488223042521,-1.09364005682075,-0.129886022783616,0.087310859277973,-0.113984535330739,-1.09846177590815,0.0725871345335238,0.179295309191971,-0.573290202882657,0.151094539257337,1.43176754288814,-0.29610665794187,-0.432574453978757,-0.928227090668107,0.562657865274858,-1.14604786201405,0.163100770955193,-0.6379476130553,-0.086966939820072,-0.250543598006957,10,10],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"histogram"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":[]},"yaxis":{"domain":[0,1],"automargin":true},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[0.414617189073889,1.15417746581474,1.09347557872021,-1.7208457517911,-1.66302885781596,1.31778992834093,-0.288176434654804,0.171581028232729,-1.21542861311687,-0.060930673535362,1.17020303880467,-1.24121193650175,-1.14249437040402,-0.509419666774255,0.23612480552607,0.195874529501383,-0.0297587200968011,0.358585854614579,-1.22427096458399,2.46593197188645,1.09994593375565,-1.06610727960012,-0.790351775897396,-0.955532682297517,1.13414493145382,0.914047717604892,0.162838586123277,-0.171417234321875,-2.22150292997222,-0.757226036292351,-0.366955109213183,0.375058727086742,0.542776410813224,1.87437984462289,0.292082800432866,1.49657261377941,-1.29594770980117,1.32223632074968,0.731612021968569,-2.94869558934603,-1.87092886841649,-0.105983713176499,1.12394765874395,-0.184490809181441,1.50438944084318,1.60558915568575,-0.568556171587073,-0.421642376630585,-0.175561718420773,0.426294694420831,-0.621747470247542,-0.544197716269026,-0.0209186492183654,0.512724639329838,0.718680899538959,-1.38602006855341,0.571072786591492,0.260020405422142,0.99335772300036,-0.823199826363684,-0.0970563305170975,0.864518995328813,0.168628722678243,1.64847706784817,0.107278793205992,0.470131437377618,-0.599226987629339,-0.572187902333367,0.920053451233409,0.767021427032959,-0.299732367365457,0.411768713069872,0.852726432563353,-0.089352229854433,0.795884766513923,0.226619439640669,1.36647868984002,0.544884091485714,0.425683311198575,-1.04967306618386,0.00229488223042521,-1.09364005682075,-0.129886022783616,0.087310859277973,-0.113984535330739,-1.09846177590815,0.0725871345335238,0.179295309191971,-0.573290202882657,0.151094539257337,1.43176754288814,-0.29610665794187,-0.432574453978757,-0.928227090668107,0.562657865274858,-1.14604786201405,0.163100770955193,-0.6379476130553,-0.086966939820072,-0.250543598006957,10,10],"type":"histogram","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>

# and let's do it again
imax <- which(outlierdata==max(outlierdata))
outlierdata[imax] <- max(outlierdata[-imax])
plot_ly(x = outlierdata, type = "histogram")
<div id="htmlwidget-5583c8a4dd3fcc1b2fd7" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-5583c8a4dd3fcc1b2fd7">{"x":{"visdat":{"d70285b45a2":["function () ","plotlyVisDat"]},"cur_data":"d70285b45a2","attrs":{"d70285b45a2":{"x":[0.414617189073889,1.15417746581474,1.09347557872021,-1.7208457517911,-1.66302885781596,1.31778992834093,-0.288176434654804,0.171581028232729,-1.21542861311687,-0.060930673535362,1.17020303880467,-1.24121193650175,-1.14249437040402,-0.509419666774255,0.23612480552607,0.195874529501383,-0.0297587200968011,0.358585854614579,-1.22427096458399,2.46593197188645,1.09994593375565,-1.06610727960012,-0.790351775897396,-0.955532682297517,1.13414493145382,0.914047717604892,0.162838586123277,-0.171417234321875,-2.22150292997222,-0.757226036292351,-0.366955109213183,0.375058727086742,0.542776410813224,1.87437984462289,0.292082800432866,1.49657261377941,-1.29594770980117,1.32223632074968,0.731612021968569,-2.94869558934603,-1.87092886841649,-0.105983713176499,1.12394765874395,-0.184490809181441,1.50438944084318,1.60558915568575,-0.568556171587073,-0.421642376630585,-0.175561718420773,0.426294694420831,-0.621747470247542,-0.544197716269026,-0.0209186492183654,0.512724639329838,0.718680899538959,-1.38602006855341,0.571072786591492,0.260020405422142,0.99335772300036,-0.823199826363684,-0.0970563305170975,0.864518995328813,0.168628722678243,1.64847706784817,0.107278793205992,0.470131437377618,-0.599226987629339,-0.572187902333367,0.920053451233409,0.767021427032959,-0.299732367365457,0.411768713069872,0.852726432563353,-0.089352229854433,0.795884766513923,0.226619439640669,1.36647868984002,0.544884091485714,0.425683311198575,-1.04967306618386,0.00229488223042521,-1.09364005682075,-0.129886022783616,0.087310859277973,-0.113984535330739,-1.09846177590815,0.0725871345335238,0.179295309191971,-0.573290202882657,0.151094539257337,1.43176754288814,-0.29610665794187,-0.432574453978757,-0.928227090668107,0.562657865274858,-1.14604786201405,0.163100770955193,-0.6379476130553,-0.086966939820072,-0.250543598006957,2.46593197188645,2.46593197188645],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"histogram"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":[]},"yaxis":{"domain":[0,1],"automargin":true},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[0.414617189073889,1.15417746581474,1.09347557872021,-1.7208457517911,-1.66302885781596,1.31778992834093,-0.288176434654804,0.171581028232729,-1.21542861311687,-0.060930673535362,1.17020303880467,-1.24121193650175,-1.14249437040402,-0.509419666774255,0.23612480552607,0.195874529501383,-0.0297587200968011,0.358585854614579,-1.22427096458399,2.46593197188645,1.09994593375565,-1.06610727960012,-0.790351775897396,-0.955532682297517,1.13414493145382,0.914047717604892,0.162838586123277,-0.171417234321875,-2.22150292997222,-0.757226036292351,-0.366955109213183,0.375058727086742,0.542776410813224,1.87437984462289,0.292082800432866,1.49657261377941,-1.29594770980117,1.32223632074968,0.731612021968569,-2.94869558934603,-1.87092886841649,-0.105983713176499,1.12394765874395,-0.184490809181441,1.50438944084318,1.60558915568575,-0.568556171587073,-0.421642376630585,-0.175561718420773,0.426294694420831,-0.621747470247542,-0.544197716269026,-0.0209186492183654,0.512724639329838,0.718680899538959,-1.38602006855341,0.571072786591492,0.260020405422142,0.99335772300036,-0.823199826363684,-0.0970563305170975,0.864518995328813,0.168628722678243,1.64847706784817,0.107278793205992,0.470131437377618,-0.599226987629339,-0.572187902333367,0.920053451233409,0.767021427032959,-0.299732367365457,0.411768713069872,0.852726432563353,-0.089352229854433,0.795884766513923,0.226619439640669,1.36647868984002,0.544884091485714,0.425683311198575,-1.04967306618386,0.00229488223042521,-1.09364005682075,-0.129886022783616,0.087310859277973,-0.113984535330739,-1.09846177590815,0.0725871345335238,0.179295309191971,-0.573290202882657,0.151094539257337,1.43176754288814,-0.29610665794187,-0.432574453978757,-0.928227090668107,0.562657865274858,-1.14604786201405,0.163100770955193,-0.6379476130553,-0.086966939820072,-0.250543598006957,2.46593197188645,2.46593197188645],"type":"histogram","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>And now we have arrived back to a normal distribution with no outliers, which is well-spread over the scale. Of course, this has come at the cost of actually moving data points. However keep in mind that this is only done for the purposes of aggregation, and the original indicator data would still be retained. A helpful way of looking at Winsorisation is that it is like capping the scale: it is enough to know that certain units have the highest score, without needing to know that they are ten times higher than the other units.</p>
<p>Clearly, outliers could also occur from the lower end of the scale, in which case Winsorisation would use the minimum values.</p>
<p>Notice that in general, Winsorisation does not change the shape of the distribution, apart from the outlying values. Therefore it is suited to distributions like the example, which are well-spread except for some few outlying values.</p>
</div>
<div id="transformation" class="section level3" number="8.2.2">
<h3><span class="header-section-number">8.2.2</span> Transformation</h3>
<p>The second option is to transform the distribution, by applying a transformation that changes all of the data points and thus the overall shape of the distribution.</p>
<p>The most obvious transformation in this respect is to take the logarithm. Denoting <span class="math inline">\(x\)</span> as the original indicator and <span class="math inline">\(x&#39;\)</span> as the transformed indicator, this would simply be:</p>
<p><span class="math display">\[ x&#39; = \ln(x) \]</span>
This is a sensible choice because skewed distributions are often roughly log-normal, and taking the log of a log-normal distrinbution results in a normal distribution. However, this will not work for negative values. In that case, an alternative is:</p>
<p><span class="math display">\[ x&#39; = \ln(x- \text{min}(x)+a), \; \; \text{where}\; \; a = 0.01(\text{max}(x)-\text{min}(x)) \]</span>
The logic being that by subtracting the minimum and adding something, all values will be positive, so they can be safely log-transformed. This formula is similar to that used in the COIN Tool, but with an adjustment. In the COIN Tool, <span class="math inline">\(a=1\)</span>, which, depending on the range of the indicator, can give only a gentle and sometimes near-linear transformation. By setting <span class="math inline">\(a\)</span> to be a set percentage of the range, it is ensured that the shape of the transformation is consistent.</p>
<p>A general family of transformations are called the <em>Box-Cox</em> transformations. These are given as:</p>
<p><span class="math display">\[ x&#39;(\lambda) =
    \begin{cases}
      \frac{x^\lambda-1}{\lambda} &amp; \text{if}\ \lambda  \neq 0 \\
      \ln(x) &amp; \text{if}\ \lambda = 0
    \end{cases} \]</span></p>
<p>In other words, a log transformation or a power transformation. The Box Cox transformation is often accompanied by an optimisation which chooses the <span class="math inline">\(\lambda\)</span> value to best approximate the normal distribution.</p>
<p>Comparing to Winsorisation, log transforms and Box Cox transforms perform the transformation on every data point. To see the effect of this, we can take the log of one of the denominator indicators in <code>WorldDenoms</code>, the national GDPs of over 200 countries in 2019.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-treatment.html#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make df with original indicator and log-transformed version</span></span>
<span id="cb66-2"><a href="data-treatment.html#cb66-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">GDP =</span> WorldDenoms<span class="sc">$</span>Den_GDP,</span>
<span id="cb66-3"><a href="data-treatment.html#cb66-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">LogGDP =</span> <span class="fu">log</span>(WorldDenoms<span class="sc">$</span>Den_GDP))</span>
<span id="cb66-4"><a href="data-treatment.html#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="fu">plotIndDist</span>(df, <span class="at">type =</span> <span class="st">&quot;Histogram&quot;</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/LogWorlddenoms-1.png" width="768" /></p>
<p>And there we see a beautiful normal distribution as a result.</p>
</div>
</div>
<div id="data-treatment-in-coinr" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Data treatment in COINr</h2>
<p>COINr data treatment has a number of options and gives the user a fairly high degree of control in terms of which kind of treatment should be applied, either for all indicators at once, or for individual indicators. We will first explore the default data treatment options that are applied to all indicators, then see how to make exceptions and specific treatment requests.</p>
<div id="global-treatment" class="section level3" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Global treatment</h3>
<p>The “default” treatment in COINr is similar to that applied in the <a href="https://knowledge4policy.ec.europa.eu/composite-indicators/coin-tool_en">COIN Tool</a>, and widely used in composite indicator construction. It follows a basic process of trying to Winsorise up to a specified limit, followed by a transformation if the Winsorisation does not sufficiently “correct” the distribution. In short, for each indicator it:</p>
<ol style="list-style-type: decimal">
<li>Checks skew and kurtosis values</li>
<li>If absolute skew is greater than a threshold (default 2) AND kurtosis is greater than a threshold (default 3.5):
<ol style="list-style-type: lower-alpha">
<li>Successively Winsorise up to a specified maximum number of points. If either skew or kurtosis goes below thresholds, stop. If after reaching the maximum number of points, both thresholds are still exceeded, then:</li>
<li>Perform a transformation</li>
</ol></li>
</ol>
<p>This is the default process, although individual specifications can be made for individual indicators - see the next section.</p>
<p>The data treatment function in COINr is called <code>treat()</code>. To perform a default data treatment, we can simply use the “COIN in, COIN out” approach as usual.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data-treatment.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># build ASEM data set, up to denomination</span></span>
<span id="cb67-2"><a href="data-treatment.html#cb67-2" aria-hidden="true" tabindex="-1"></a>ASEM <span class="ot">&lt;-</span> <span class="fu">assemble</span>(<span class="at">IndData =</span> COINr<span class="sc">::</span>ASEMIndData, <span class="at">IndMeta =</span> COINr<span class="sc">::</span>ASEMIndMeta,</span>
<span id="cb67-3"><a href="data-treatment.html#cb67-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">AggMeta =</span> COINr<span class="sc">::</span>ASEMAggMeta)</span>
<span id="cb67-4"><a href="data-treatment.html#cb67-4" aria-hidden="true" tabindex="-1"></a>ASEM <span class="ot">&lt;-</span> <span class="fu">denominate</span>(ASEM)</span>
<span id="cb67-5"><a href="data-treatment.html#cb67-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-6"><a href="data-treatment.html#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="co"># treat at defaults</span></span>
<span id="cb67-7"><a href="data-treatment.html#cb67-7" aria-hidden="true" tabindex="-1"></a>ASEM <span class="ot">&lt;-</span> <span class="fu">treat</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Denominated&quot;</span>, <span class="at">winmax =</span> <span class="dv">5</span>)</span>
<span id="cb67-8"><a href="data-treatment.html#cb67-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-9"><a href="data-treatment.html#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Check which indicators were treated, and how</span></span>
<span id="cb67-10"><a href="data-treatment.html#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">quietly =</span> T, <span class="at">verbose =</span> F)</span>
<span id="cb67-11"><a href="data-treatment.html#cb67-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb67-12"><a href="data-treatment.html#cb67-12" aria-hidden="true" tabindex="-1"></a>ASEM<span class="sc">$</span>Analysis<span class="sc">$</span>Treated<span class="sc">$</span>TreatSummary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Treatment <span class="sc">!=</span> <span class="st">&quot;None&quot;</span>)</span>
<span id="cb67-13"><a href="data-treatment.html#cb67-13" aria-hidden="true" tabindex="-1"></a><span class="do">##       IndCode Low High           TreatSpec           Treatment</span></span>
<span id="cb67-14"><a href="data-treatment.html#cb67-14" aria-hidden="true" tabindex="-1"></a><span class="do">## V2   Services   0    4 Default, winmax = 5 Winsorised 4 points</span></span>
<span id="cb67-15"><a href="data-treatment.html#cb67-15" aria-hidden="true" tabindex="-1"></a><span class="do">## V3        FDI   0    2 Default, winmax = 5 Winsorised 2 points</span></span>
<span id="cb67-16"><a href="data-treatment.html#cb67-16" aria-hidden="true" tabindex="-1"></a><span class="do">## V5    ForPort   0    3 Default, winmax = 5 Winsorised 3 points</span></span>
<span id="cb67-17"><a href="data-treatment.html#cb67-17" aria-hidden="true" tabindex="-1"></a><span class="do">## V6  CostImpEx   0    1 Default, winmax = 5 Winsorised 1 points</span></span>
<span id="cb67-18"><a href="data-treatment.html#cb67-18" aria-hidden="true" tabindex="-1"></a><span class="do">## V7     Tariff   0    3 Default, winmax = 5 Winsorised 3 points</span></span>
<span id="cb67-19"><a href="data-treatment.html#cb67-19" aria-hidden="true" tabindex="-1"></a><span class="do">## V12     StMob   0    2 Default, winmax = 5 Winsorised 2 points</span></span>
<span id="cb67-20"><a href="data-treatment.html#cb67-20" aria-hidden="true" tabindex="-1"></a><span class="do">## V15  CultServ   0    2 Default, winmax = 5 Winsorised 2 points</span></span>
<span id="cb67-21"><a href="data-treatment.html#cb67-21" aria-hidden="true" tabindex="-1"></a><span class="do">## V21   Flights   0    1 Default, winmax = 5 Winsorised 1 points</span></span>
<span id="cb67-22"><a href="data-treatment.html#cb67-22" aria-hidden="true" tabindex="-1"></a><span class="do">## V23      Bord   0    3 Default, winmax = 5 Winsorised 3 points</span></span>
<span id="cb67-23"><a href="data-treatment.html#cb67-23" aria-hidden="true" tabindex="-1"></a><span class="do">## V25       Gas   0    3 Default, winmax = 5 Winsorised 3 points</span></span>
<span id="cb67-24"><a href="data-treatment.html#cb67-24" aria-hidden="true" tabindex="-1"></a><span class="do">## V35    Forest   0    2 Default, winmax = 5 Winsorised 2 points</span></span>
<span id="cb67-25"><a href="data-treatment.html#cb67-25" aria-hidden="true" tabindex="-1"></a><span class="do">## V36   Poverty   0    3 Default, winmax = 5 Winsorised 3 points</span></span>
<span id="cb67-26"><a href="data-treatment.html#cb67-26" aria-hidden="true" tabindex="-1"></a><span class="do">## V41      NGOs   0    3 Default, winmax = 5 Winsorised 3 points</span></span>
<span id="cb67-27"><a href="data-treatment.html#cb67-27" aria-hidden="true" tabindex="-1"></a><span class="do">## V43    FemLab   1    0 Default, winmax = 5 Winsorised 1 points</span></span></code></pre></div>
<p>The results of <code>treat()</code> are a new data set <code>.Data$Treated</code> with the treated data in it, and a details of the data treatment in <code>$Analysis$Treated</code>, including <code>TreatSummary</code> (shown above), which gives a summary of the data treatment specified and actually applied for each indicator. In this case, all indicators were successfully brought within the specified skew and kurtosis limits by Winsorisation, within the specified Winsorisation limit <code>winmax</code> of five points.</p>
<p>To see what happens if <code>winmax</code> is exceeded, we will lower the threshold to <code>winmax = 3</code>. Additionally, we can control what type of log transform should be applied when <code>winmax</code> is exceeded, using the <code>deflog</code> argument. We will set <code>deflog = "CTlog"</code> which ensures that negative values will not cause errors.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-treatment.html#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># treat at defaults</span></span>
<span id="cb68-2"><a href="data-treatment.html#cb68-2" aria-hidden="true" tabindex="-1"></a>ASEM <span class="ot">&lt;-</span> <span class="fu">treat</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Denominated&quot;</span>, <span class="at">winmax =</span> <span class="dv">3</span>, <span class="at">deflog =</span> <span class="st">&quot;CTlog&quot;</span>)</span>
<span id="cb68-3"><a href="data-treatment.html#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="data-treatment.html#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Check which indicators were treated, and how</span></span>
<span id="cb68-5"><a href="data-treatment.html#cb68-5" aria-hidden="true" tabindex="-1"></a>ASEM<span class="sc">$</span>Analysis<span class="sc">$</span>Treated<span class="sc">$</span>TreatSummary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Treatment <span class="sc">!=</span> <span class="st">&quot;None&quot;</span>)</span>
<span id="cb68-6"><a href="data-treatment.html#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="do">##       IndCode Low High           TreatSpec               Treatment</span></span>
<span id="cb68-7"><a href="data-treatment.html#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="do">## V2   Services   0    0 Default, winmax = 3 CTLog (exceeded winmax)</span></span>
<span id="cb68-8"><a href="data-treatment.html#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="do">## V3        FDI   0    2 Default, winmax = 3     Winsorised 2 points</span></span>
<span id="cb68-9"><a href="data-treatment.html#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="do">## V5    ForPort   0    3 Default, winmax = 3     Winsorised 3 points</span></span>
<span id="cb68-10"><a href="data-treatment.html#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="do">## V6  CostImpEx   0    1 Default, winmax = 3     Winsorised 1 points</span></span>
<span id="cb68-11"><a href="data-treatment.html#cb68-11" aria-hidden="true" tabindex="-1"></a><span class="do">## V7     Tariff   0    3 Default, winmax = 3     Winsorised 3 points</span></span>
<span id="cb68-12"><a href="data-treatment.html#cb68-12" aria-hidden="true" tabindex="-1"></a><span class="do">## V12     StMob   0    2 Default, winmax = 3     Winsorised 2 points</span></span>
<span id="cb68-13"><a href="data-treatment.html#cb68-13" aria-hidden="true" tabindex="-1"></a><span class="do">## V15  CultServ   0    2 Default, winmax = 3     Winsorised 2 points</span></span>
<span id="cb68-14"><a href="data-treatment.html#cb68-14" aria-hidden="true" tabindex="-1"></a><span class="do">## V21   Flights   0    1 Default, winmax = 3     Winsorised 1 points</span></span>
<span id="cb68-15"><a href="data-treatment.html#cb68-15" aria-hidden="true" tabindex="-1"></a><span class="do">## V23      Bord   0    3 Default, winmax = 3     Winsorised 3 points</span></span>
<span id="cb68-16"><a href="data-treatment.html#cb68-16" aria-hidden="true" tabindex="-1"></a><span class="do">## V25       Gas   0    3 Default, winmax = 3     Winsorised 3 points</span></span>
<span id="cb68-17"><a href="data-treatment.html#cb68-17" aria-hidden="true" tabindex="-1"></a><span class="do">## V35    Forest   0    2 Default, winmax = 3     Winsorised 2 points</span></span>
<span id="cb68-18"><a href="data-treatment.html#cb68-18" aria-hidden="true" tabindex="-1"></a><span class="do">## V36   Poverty   0    3 Default, winmax = 3     Winsorised 3 points</span></span>
<span id="cb68-19"><a href="data-treatment.html#cb68-19" aria-hidden="true" tabindex="-1"></a><span class="do">## V41      NGOs   0    3 Default, winmax = 3     Winsorised 3 points</span></span>
<span id="cb68-20"><a href="data-treatment.html#cb68-20" aria-hidden="true" tabindex="-1"></a><span class="do">## V43    FemLab   1    0 Default, winmax = 3     Winsorised 1 points</span></span>
<span id="cb68-21"><a href="data-treatment.html#cb68-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-22"><a href="data-treatment.html#cb68-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare before and after treatment</span></span>
<span id="cb68-23"><a href="data-treatment.html#cb68-23" aria-hidden="true" tabindex="-1"></a><span class="fu">iplotIndDist2</span>(ASEM, <span class="at">dsets =</span> <span class="fu">c</span>(<span class="st">&quot;Denominated&quot;</span>, <span class="st">&quot;Treated&quot;</span>), <span class="at">icodes =</span> <span class="st">&quot;Services&quot;</span>,</span>
<span id="cb68-24"><a href="data-treatment.html#cb68-24" aria-hidden="true" tabindex="-1"></a>              <span class="at">ptype =</span> <span class="st">&quot;Histogram&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-e720e25ea000843ff0e5" style="width:768px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e720e25ea000843ff0e5">{"x":{"visdat":{"d70266c1c59":["function () ","plotlyVisDat"]},"cur_data":"d70266c1c59","attrs":{"d70266c1c59":{"alpha":0.6,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"type":"histogram","name":"Trade in services","inherit":true},"d70266c1c59.1":{"alpha":0.6,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"x":{},"type":"histogram","name":"Trade in services","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"barmode":"overlay","xaxis":{"domain":[0,1],"automargin":true,"title":""},"yaxis":{"domain":[0,1],"automargin":true},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[0.276681940794445,0.462254867226653,0.243742052901564,0.338794072256007,0.760098867666084,0.222543207322299,0.370398919453455,0.438248128135714,0.225605264893292,0.191158749982344,0.166319805540168,0.198135393098302,0.310924849651287,1.10917783352835,0.108956030826193,0.263149434041176,0.288904481310413,2.82768641582263,1.82464239937715,0.445881137056196,0.224642950519038,0.175530424570937,0.213728847524469,0.166318536379482,0.180966399813671,0.263728015550315,0.15938355214756,0.256778035747555,0.310029600268569,0.195712022067552,0.0833020877198363,0.0456396445810669,0.185490394414346,0.289391165863444,0.058574838537451,0.13023397074421,0.0579954816204536,0.0711933183269379,0.124883704482977,0.142319736141744,0.0872184959616381,0.245944958634483,0.243897222607497,0.0949810719669238,0.141592261176336,0.0389460389950171,0.181091173647035,0.0983541886685242,1.02616844245993,0.265365886247069,0.148738354805822],"type":"histogram","name":"Trade in services","marker":{"color":"rgba(31,119,180,0.6)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,0.6)"},"error_x":{"color":"rgba(31,119,180,0.6)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[-1.32567611836303,-0.795852929897182,-1.45807647174238,-1.11554859049327,-0.288962582035223,-1.5536032283311,-1.02348547250926,-0.850527586889151,-1.5392281765165,-1.71424238962329,-1.8626466102678,-1.67623627644588,-1.20441885571025,0.0935988966684203,-2.3238353324609,-1.37796594361207,-1.28068882957969,1.03554034690007,0.595304867894096,-0.832817372936517,-1.54372360487174,-1.80501621683173,-1.59617519094701,-1.86265478466112,-1.77249955042485,-1.37567344199863,-1.90835002695342,-1.40356504237352,-1.20740881719015,-1.68927479590317,-2.62771357902904,-3.3644506101904,-1.74622167865293,-1.27893872674354,-3.0466845037798,-2.12715946256087,-3.05895227458882,-2.81116851403976,-2.17309248931662,-2.03056680268693,-2.57492071708661,-1.44865361205299,-1.45740982350666,-2.47786227885017,-2.03612441529879,-3.57958016994119,-1.77176545777467,-2.43845575166306,0.0149967911084272,-1.36921209331398,-1.98282516383949],"type":"histogram","name":"Trade in services","marker":{"color":"rgba(255,127,14,0.6)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,0.6)"},"error_x":{"color":"rgba(255,127,14,0.6)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Now we can see from the table that the Services indicator has had a log transformation applied, and from the histograms that the skewness has been treated. The range of the indicator is now different, and this introduces negative values, however this will be anyway fixed in the normalisation step. The important thing here is the shape of the distribution.</p>
<p>Other options for <code>deflog</code> are “log” (a standard log transform), “GIIlog,” which is a scaled log transformation used by the <a href="https://www.globalinnovationindex.org/">Global Innovation Index</a>, and “boxcox,” which uses a Box-Cox transformation with the <span class="math inline">\(\lambda\)</span> parameter set by the <code>boxlam</code> argument to <code>treat()</code>. Optimised <span class="math inline">\(\lambda\)</span> values are not currently available in COINr, though this may be considered for future versions, along with custom transformation functions.</p>
<p>A further point to note is that Winsorisation can work in two ways in COINr, specified by the <code>winchange</code> argument. If set to <code>FALSE</code>, then Winsorisation works in the following way:</p>
<ol style="list-style-type: decimal">
<li>Perform an initial check of skew and kurtosis (call them <span class="math inline">\(s_0\)</span> and <span class="math inline">\(k_0\)</span>). Only if <strong>both</strong> exceed thresholds, continue to 2. Otherwise no treatment is applied.</li>
<li>If <span class="math inline">\(s_0\)</span> is positive (usually the case), begin by Winsorising the highest value (assign the value of the second-highest point).</li>
<li>If <span class="math inline">\(s_0\)</span> is negative, begin by Winsorising the lowest value (assign the value of the second-lowest point).</li>
<li>If either skew or kurtosis thesholds are below thresholds, stop, otherwise</li>
<li>Go to 2. if <span class="math inline">\(s_0\)</span> was positive, or 3. if <span class="math inline">\(s_0\)</span> was negative.</li>
</ol>
<p>Notably, the <em>direction</em> of the Winsorisation here is always the same, i.e. if <span class="math inline">\(s_0\)</span> was positive, Winsorisation will always be applied to the highest values. The only drawback here is that the sign of the skew can conceivably change during the Winsorisation process. For that reason, if you set <code>winchange = TRUE</code> (which is anyway default), the function will check after every Winsorised point to see whether to Winsorise high values or low values.</p>
<p>It might seem unlikely that the skew could change sign from one iteration to the next, <em>and</em> still remain outside the absolute threshold. But this has been observed to happen in some cases.</p>
<p>Finally, you can set the skewness and kurtosis threshold values to your favourite values using the <code>t_skew</code> and <code>t_kurt</code> arguments to <code>treat()</code>.</p>
</div>
<div id="individual-treatment" class="section level3" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Individual treatment</h3>
<p>If you want more control over the treatment of individual indicators, this can be done by specifying the optional <code>individual</code> and <code>indiv_only</code> arguments. <code>individual</code> is a data frame which specifies the treatment to apply to specific indicators. It looks like this:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="data-treatment.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example of &quot;individual&quot; data frame spec</span></span>
<span id="cb69-2"><a href="data-treatment.html#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="data-treatment.html#cb69-3" aria-hidden="true" tabindex="-1"></a>individual <span class="ot">=</span> <span class="fu">data.frame</span>(</span>
<span id="cb69-4"><a href="data-treatment.html#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">IndCode =</span> <span class="fu">c</span>(<span class="st">&quot;Bord&quot;</span>, <span class="st">&quot;Services&quot;</span>, <span class="st">&quot;Flights&quot;</span>, <span class="st">&quot;Tariff&quot;</span>),</span>
<span id="cb69-5"><a href="data-treatment.html#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Treat =</span> <span class="fu">c</span>(<span class="st">&quot;win&quot;</span>, <span class="st">&quot;log&quot;</span>, <span class="st">&quot;none&quot;</span>, <span class="st">&quot;boxcox&quot;</span>),</span>
<span id="cb69-6"><a href="data-treatment.html#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Winmax =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="cb69-7"><a href="data-treatment.html#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Thresh =</span> <span class="fu">c</span>(<span class="st">&quot;thresh&quot;</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="cb69-8"><a href="data-treatment.html#cb69-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Boxlam =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="dv">2</span>)</span>
<span id="cb69-9"><a href="data-treatment.html#cb69-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb69-10"><a href="data-treatment.html#cb69-10" aria-hidden="true" tabindex="-1"></a>individual</span>
<span id="cb69-11"><a href="data-treatment.html#cb69-11" aria-hidden="true" tabindex="-1"></a><span class="do">##    IndCode  Treat Winmax Thresh Boxlam</span></span>
<span id="cb69-12"><a href="data-treatment.html#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="do">## 1     Bord    win     10 thresh     NA</span></span>
<span id="cb69-13"><a href="data-treatment.html#cb69-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Services    log     NA   &lt;NA&gt;     NA</span></span>
<span id="cb69-14"><a href="data-treatment.html#cb69-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 3  Flights   none     NA   &lt;NA&gt;     NA</span></span>
<span id="cb69-15"><a href="data-treatment.html#cb69-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 4   Tariff boxcox     NA   &lt;NA&gt;      2</span></span></code></pre></div>
<p>The “IndCode” column is the list of indicators to apply a specific treatment. The “Treat” column dictates which treatment to apply: options are either Winsorise (“win”), or any of the <code>deflog</code> options described previously. The “Winmax” column gives the maximum number of points to Winsorise for that indicator. This value is only used if the corresponding row of “Treat” is set to “win.” The “Thresh” column specifies whether to use skew/kurtosis thresholds or not. If “thresh,” it uses the thresholds specified in the <code>thresh</code> argument of <code>treat()</code>. If instead it is set at <code>NA</code>, then it will ignore the thresholds and force the Winsorisation to Winsorise exactly <code>winmax</code> points. Finally, the “Boxlam” column allows an individual setting of the <code>boxlam</code> parameter if the corresponding entry of the “Treat” column is set to “boxcox.” If <code>Individual</code> is specified, all of these columns need to be present regardless of the individual treatments specified. Where entries are not needed, you can simply put <code>NA</code>.</p>
<p>An important point is that if the treatment specified in the “Treat” column is forced upon the specified indicator, for example, if “CTlog” is specified, this will be applied, without any Winsorisation first. Conversely, if “win” is specified, this will be applied, without any subsequent log transform even if it fails to correct the distribution.</p>
<p>Finally, the <code>indiv_only</code> argument specifies if <code>TRUE</code>, ONLY the indicators listed in <code>individual</code> are treated, and the rest get no treatment. Otherwise, if <code>FALSE</code> then the remaining indicators are subject to the default treatment process.</p>
<p>Let’s now put this into practice.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-treatment.html#cb70-1" aria-hidden="true" tabindex="-1"></a>ASEM <span class="ot">&lt;-</span> <span class="fu">treat</span>(ASEM, <span class="at">dset =</span> <span class="st">&quot;Denominated&quot;</span>, <span class="at">individual =</span> individual,</span>
<span id="cb70-2"><a href="data-treatment.html#cb70-2" aria-hidden="true" tabindex="-1"></a>              <span class="at">indiv_only =</span> <span class="cn">FALSE</span>)</span>
<span id="cb70-3"><a href="data-treatment.html#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Check which indicators were treated, and how</span></span>
<span id="cb70-4"><a href="data-treatment.html#cb70-4" aria-hidden="true" tabindex="-1"></a>ASEM<span class="sc">$</span>Analysis<span class="sc">$</span>Treated<span class="sc">$</span>TreatSummary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Treatment <span class="sc">!=</span> <span class="st">&quot;None&quot;</span>)</span>
<span id="cb70-5"><a href="data-treatment.html#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="do">##       IndCode Low High               TreatSpec               Treatment</span></span>
<span id="cb70-6"><a href="data-treatment.html#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="do">## V2   Services   0    0              Forced log                     Log</span></span>
<span id="cb70-7"><a href="data-treatment.html#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="do">## V3        FDI   0    2     Default, winmax = 6     Winsorised 2 points</span></span>
<span id="cb70-8"><a href="data-treatment.html#cb70-8" aria-hidden="true" tabindex="-1"></a><span class="do">## V5    ForPort   0    3     Default, winmax = 6     Winsorised 3 points</span></span>
<span id="cb70-9"><a href="data-treatment.html#cb70-9" aria-hidden="true" tabindex="-1"></a><span class="do">## V6  CostImpEx   0    1     Default, winmax = 6     Winsorised 1 points</span></span>
<span id="cb70-10"><a href="data-treatment.html#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="do">## V7     Tariff   0    0          Forced Box-Cox Box Cox with lambda = 2</span></span>
<span id="cb70-11"><a href="data-treatment.html#cb70-11" aria-hidden="true" tabindex="-1"></a><span class="do">## V12     StMob   0    2     Default, winmax = 6     Winsorised 2 points</span></span>
<span id="cb70-12"><a href="data-treatment.html#cb70-12" aria-hidden="true" tabindex="-1"></a><span class="do">## V15  CultServ   0    2     Default, winmax = 6     Winsorised 2 points</span></span>
<span id="cb70-13"><a href="data-treatment.html#cb70-13" aria-hidden="true" tabindex="-1"></a><span class="do">## V23      Bord   0    3 Forced Win, winmax = 10     Winsorised 3 points</span></span>
<span id="cb70-14"><a href="data-treatment.html#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="do">## V25       Gas   0    3     Default, winmax = 6     Winsorised 3 points</span></span>
<span id="cb70-15"><a href="data-treatment.html#cb70-15" aria-hidden="true" tabindex="-1"></a><span class="do">## V35    Forest   0    2     Default, winmax = 6     Winsorised 2 points</span></span>
<span id="cb70-16"><a href="data-treatment.html#cb70-16" aria-hidden="true" tabindex="-1"></a><span class="do">## V36   Poverty   0    3     Default, winmax = 6     Winsorised 3 points</span></span>
<span id="cb70-17"><a href="data-treatment.html#cb70-17" aria-hidden="true" tabindex="-1"></a><span class="do">## V41      NGOs   0    3     Default, winmax = 6     Winsorised 3 points</span></span>
<span id="cb70-18"><a href="data-treatment.html#cb70-18" aria-hidden="true" tabindex="-1"></a><span class="do">## V43    FemLab   1    0     Default, winmax = 6     Winsorised 1 points</span></span></code></pre></div>
<p>And this shows how some indicators have had certain treatments applied. Of course here, the individual treatments have been chosen arbitrarily, and the default treatment would have sufficed. In practice, you would apply individual treatment for specific indicators for good reasons, such as excessive skew, or not wanting to treat certain indicators for conceptual reasons.</p>
</div>
</div>
<div id="interactive-visualisation" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Interactive visualisation</h2>
<p>As we have seen in this chapter, it’s essential to visualise your indicator distributions and check what treatment has been applied, and what the main differences are. This can be achieved with the plotting functions previously described, but could become cumbersome if you want to check many indicators.</p>
<p>COINr has an built-in Shiny app which lets you compare indicator distributions interactively. Shiny is an R package which allows you to build interactive apps, dashboards and gadgets that can run R code. Shiny is a powerful tool for interactively exploring, communicating and presenting results, and can be used to host apps on the web. If you would like to know more about Shiny, I would recommend the book <a href="https://mastering-shiny.org/index.html">Mastering Shiny</a>.</p>
<p>To run the indicator visualisation app, simply run <code>indDash(ASEM)</code>. This will open a window which should look like this:</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-64"></span>
<img src="images/inddash_screenshot.png" alt="indDash screenshot" width="100%" />
<p class="caption">
Figure 8.1: indDash screenshot
</p>
</div>
<p>The <code>indDash()</code> app is purely illustrative - it does not return anything back to R, but simply displays the distributions of the existing indicators.</p>
<p>In the side panel, all data sets that exist in the <code>.$Data</code> folder are accessible, as well as any denominators, if they exist. Any of the indicators from any of these data sets can be plotted against each other.</p>
<p>In the context of data treatment, this gives a fast way to check the effects of treating indicators. In the ASEM example, we can set the the data set of indicator 1 to “Denominated,” and the data set of indicator 2 to “Treated.” This will compare denominated against treated indicators, which is a sensible comparison since <code>treat()</code> was applied to <code>.Data$Denominated</code> in this case.</p>
<p>When a treated data set is selected, a table of treated indicators appears in the side panel - this lists all indicators that had treatment applied to them, and gives the details of the treatments applied. You can click on column headings to sort by values, and this can give an easy way to see which indicators were treated. You can then select an indicator of interest using the dropdown menus. In the screenshot above, we are comparing “Gas” in the denominated and treated data sets.</p>
<p>This gives several comparison plots: histograms of each indicator, violin plots, and a scatter plot of one indicator against the other, as well as overlaid histograms. As with any Plotly plot, any of these can be instantly downloaded using the camera button that appears when you hover over the plot. This might be useful for generating quick reports, for example.</p>
<p>Below the violin plots are details of the skew and kurtosis of the indicator, and details of the treatment applied, if any.</p>
<p>Finally, when comparing a treated indicator against its un-treated version, it can be helpful to check or un-check the “Plot indicators on the same axis range” box. Checking this box gives a like-for-like comparison which shows how the data points have moved, particularly useful in the case of Winsorisation. Unchecking it may be more helpful to compare the shapes of the two distributions.</p>
<p>While <code>indDash()</code> has specific features for treated data, it is also useful as a general purpose tool for fast indicator visualisation and exploration. It can help, for example, to observe trends and relationships between indicators and denominators, and will work with the aggregated data, i.e. to see how the index may depend on its indicators.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="denomination.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="normalisation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/04a-treatment.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["COINr-documentation.pdf", "COINr-documentation.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
