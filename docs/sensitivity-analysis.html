<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 14 Sensitivity analysis | Composite Indicator Development and Analysis in R with COINr</title>
  <meta name="description" content="Composite indicators with COINr" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 14 Sensitivity analysis | Composite Indicator Development and Analysis in R with COINr" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Composite indicators with COINr" />
  <meta name="github-repo" content="bluefoxr/COINrDoc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 14 Sensitivity analysis | Composite Indicator Development and Analysis in R with COINr" />
  
  <meta name="twitter:description" content="Composite indicators with COINr" />
  

<meta name="author" content="William Becker" />


<meta name="date" content="2021-06-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="adjustments-and-comparisons.html"/>
<link rel="next" href="helper-functions.html"/>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-16.12.0/react.min.js"></script>
<script src="libs/react-16.12.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="libs/reactable-binding-0.2.3/reactable.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">COINr Documentation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#whats-it-for"><i class="fa fa-check"></i><b>1.3</b> What’s it for?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#demo"><i class="fa fa-check"></i><b>1.4</b> Demo</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#features-and-status"><i class="fa fa-check"></i><b>1.5</b> Features and status</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="foundations.html"><a href="foundations.html"><i class="fa fa-check"></i><b>2</b> Foundations</a><ul>
<li class="chapter" data-level="2.1" data-path="foundations.html"><a href="foundations.html#how-to-use-coinr"><i class="fa fa-check"></i><b>2.1</b> How to use COINr</a></li>
<li class="chapter" data-level="2.2" data-path="foundations.html"><a href="foundations.html#suggested-workflows"><i class="fa fa-check"></i><b>2.2</b> Suggested workflows</a></li>
<li class="chapter" data-level="2.3" data-path="foundations.html"><a href="foundations.html#a-map-of-coinr"><i class="fa fa-check"></i><b>2.3</b> A map of COINr</a><ul>
<li class="chapter" data-level="2.3.1" data-path="foundations.html"><a href="foundations.html#construction"><i class="fa fa-check"></i><b>2.3.1</b> Construction</a></li>
<li class="chapter" data-level="2.3.2" data-path="foundations.html"><a href="foundations.html#visualisation"><i class="fa fa-check"></i><b>2.3.2</b> Visualisation</a></li>
<li class="chapter" data-level="2.3.3" data-path="foundations.html"><a href="foundations.html#analysis"><i class="fa fa-check"></i><b>2.3.3</b> Analysis</a></li>
<li class="chapter" data-level="2.3.4" data-path="foundations.html"><a href="foundations.html#interactive-apps"><i class="fa fa-check"></i><b>2.3.4</b> Interactive apps</a></li>
<li class="chapter" data-level="2.3.5" data-path="foundations.html"><a href="foundations.html#importexport"><i class="fa fa-check"></i><b>2.3.5</b> Import/export</a></li>
<li class="chapter" data-level="2.3.6" data-path="foundations.html"><a href="foundations.html#other-functions"><i class="fa fa-check"></i><b>2.3.6</b> Other functions</a></li>
<li class="chapter" data-level="2.3.7" data-path="foundations.html"><a href="foundations.html#data"><i class="fa fa-check"></i><b>2.3.7</b> Data</a></li>
<li class="chapter" data-level="2.3.8" data-path="foundations.html"><a href="foundations.html#finally"><i class="fa fa-check"></i><b>2.3.8</b> Finally</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="foundations.html"><a href="foundations.html#terminology"><i class="fa fa-check"></i><b>2.4</b> Terminology</a></li>
<li class="chapter" data-level="2.5" data-path="foundations.html"><a href="foundations.html#levels"><i class="fa fa-check"></i><b>2.5</b> Levels</a></li>
<li class="chapter" data-level="2.6" data-path="foundations.html"><a href="foundations.html#tips-for-using-coinr"><i class="fa fa-check"></i><b>2.6</b> Tips for using COINr</a><ul>
<li class="chapter" data-level="2.6.1" data-path="foundations.html"><a href="foundations.html#missing-data"><i class="fa fa-check"></i><b>2.6.1</b> Missing data</a></li>
<li class="chapter" data-level="2.6.2" data-path="foundations.html"><a href="foundations.html#ordering"><i class="fa fa-check"></i><b>2.6.2</b> Ordering</a></li>
<li class="chapter" data-level="2.6.3" data-path="foundations.html"><a href="foundations.html#syntax"><i class="fa fa-check"></i><b>2.6.3</b> Syntax</a></li>
<li class="chapter" data-level="2.6.4" data-path="foundations.html"><a href="foundations.html#plotting"><i class="fa fa-check"></i><b>2.6.4</b> Plotting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html"><i class="fa fa-check"></i><b>3</b> COINs: the currency of COINr</a><ul>
<li class="chapter" data-level="3.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#the-three-inputs"><i class="fa fa-check"></i><b>3.2</b> The three inputs</a><ul>
<li class="chapter" data-level="3.2.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-data"><i class="fa fa-check"></i><b>3.2.1</b> Indicator data</a></li>
<li class="chapter" data-level="3.2.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-metadata"><i class="fa fa-check"></i><b>3.2.2</b> Indicator metadata</a></li>
<li class="chapter" data-level="3.2.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#aggregation-metadata"><i class="fa fa-check"></i><b>3.2.3</b> Aggregation metadata</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#putting-everything-together"><i class="fa fa-check"></i><b>3.3</b> Putting everything together</a></li>
<li class="chapter" data-level="3.4" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#moving-on"><i class="fa fa-check"></i><b>3.4</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html"><i class="fa fa-check"></i><b>4</b> Initial visualisation and analysis</a><ul>
<li class="chapter" data-level="4.1" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#structure"><i class="fa fa-check"></i><b>4.1</b> Structure</a></li>
<li class="chapter" data-level="4.2" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#distributions"><i class="fa fa-check"></i><b>4.2</b> Distributions</a></li>
<li class="chapter" data-level="4.3" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#ranks-and-maps"><i class="fa fa-check"></i><b>4.3</b> Ranks and Maps</a></li>
<li class="chapter" data-level="4.4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#statistics-and-analysis"><i class="fa fa-check"></i><b>4.4</b> Statistics and analysis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html"><i class="fa fa-check"></i><b>5</b> Multivariate analysis</a></li>
<li class="chapter" data-level="6" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html"><i class="fa fa-check"></i><b>6</b> Missing data and Imputation</a><ul>
<li class="chapter" data-level="6.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#concept"><i class="fa fa-check"></i><b>6.1</b> Concept</a></li>
<li class="chapter" data-level="6.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#data-checks-and-screening"><i class="fa fa-check"></i><b>6.2</b> Data checks and screening</a></li>
<li class="chapter" data-level="6.3" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#imputation-in-coinr"><i class="fa fa-check"></i><b>6.3</b> Imputation in COINr</a><ul>
<li class="chapter" data-level="6.3.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-column"><i class="fa fa-check"></i><b>6.3.1</b> By column</a></li>
<li class="chapter" data-level="6.3.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-row"><i class="fa fa-check"></i><b>6.3.2</b> By row</a></li>
<li class="chapter" data-level="6.3.3" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-column-and-row"><i class="fa fa-check"></i><b>6.3.3</b> By column and row</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="denomination.html"><a href="denomination.html"><i class="fa fa-check"></i><b>7</b> Denomination</a><ul>
<li class="chapter" data-level="7.1" data-path="denomination.html"><a href="denomination.html#concept-1"><i class="fa fa-check"></i><b>7.1</b> Concept</a></li>
<li class="chapter" data-level="7.2" data-path="denomination.html"><a href="denomination.html#denominating-in-coinr"><i class="fa fa-check"></i><b>7.2</b> Denominating in COINr</a><ul>
<li class="chapter" data-level="7.2.1" data-path="denomination.html"><a href="denomination.html#on-coins"><i class="fa fa-check"></i><b>7.2.1</b> On COINs</a></li>
<li class="chapter" data-level="7.2.2" data-path="denomination.html"><a href="denomination.html#on-data-frames"><i class="fa fa-check"></i><b>7.2.2</b> On data frames</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="denomination.html"><a href="denomination.html#when-to-denominate-and-by-what"><i class="fa fa-check"></i><b>7.3</b> When to denominate, and by what?</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-treatment.html"><a href="data-treatment.html"><i class="fa fa-check"></i><b>8</b> Data Treatment</a><ul>
<li class="chapter" data-level="8.1" data-path="data-treatment.html"><a href="data-treatment.html#why-treat-data"><i class="fa fa-check"></i><b>8.1</b> Why treat data?</a></li>
<li class="chapter" data-level="8.2" data-path="data-treatment.html"><a href="data-treatment.html#how-to-treat-data"><i class="fa fa-check"></i><b>8.2</b> How to treat data</a><ul>
<li class="chapter" data-level="8.2.1" data-path="data-treatment.html"><a href="data-treatment.html#winsorisation"><i class="fa fa-check"></i><b>8.2.1</b> Winsorisation</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-treatment.html"><a href="data-treatment.html#transformation"><i class="fa fa-check"></i><b>8.2.2</b> Transformation</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-treatment.html"><a href="data-treatment.html#data-treatment-in-coinr"><i class="fa fa-check"></i><b>8.3</b> Data treatment in COINr</a><ul>
<li class="chapter" data-level="8.3.1" data-path="data-treatment.html"><a href="data-treatment.html#global-treatment"><i class="fa fa-check"></i><b>8.3.1</b> Global treatment</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-treatment.html"><a href="data-treatment.html#individual-treatment"><i class="fa fa-check"></i><b>8.3.2</b> Individual treatment</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-treatment.html"><a href="data-treatment.html#interactive-visualisation"><i class="fa fa-check"></i><b>8.4</b> Interactive visualisation</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="normalisation.html"><a href="normalisation.html"><i class="fa fa-check"></i><b>9</b> Normalisation</a><ul>
<li class="chapter" data-level="9.1" data-path="normalisation.html"><a href="normalisation.html#approaches"><i class="fa fa-check"></i><b>9.1</b> Approaches</a><ul>
<li class="chapter" data-level="9.1.1" data-path="normalisation.html"><a href="normalisation.html#first-adjust-direction"><i class="fa fa-check"></i><b>9.1.1</b> First: adjust direction</a></li>
<li class="chapter" data-level="9.1.2" data-path="normalisation.html"><a href="normalisation.html#linear-transformations"><i class="fa fa-check"></i><b>9.1.2</b> Linear transformations</a></li>
<li class="chapter" data-level="9.1.3" data-path="normalisation.html"><a href="normalisation.html#nonlinear-transformations"><i class="fa fa-check"></i><b>9.1.3</b> Nonlinear transformations</a></li>
<li class="chapter" data-level="9.1.4" data-path="normalisation.html"><a href="normalisation.html#distances"><i class="fa fa-check"></i><b>9.1.4</b> Distances</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="normalisation.html"><a href="normalisation.html#normalisation-in-coinr"><i class="fa fa-check"></i><b>9.2</b> Normalisation in COINr</a></li>
<li class="chapter" data-level="9.3" data-path="normalisation.html"><a href="normalisation.html#individual-normalisation"><i class="fa fa-check"></i><b>9.3</b> Individual normalisation</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="aggregation.html"><a href="aggregation.html"><i class="fa fa-check"></i><b>10</b> Aggregation</a><ul>
<li class="chapter" data-level="10.1" data-path="aggregation.html"><a href="aggregation.html#weighting"><i class="fa fa-check"></i><b>10.1</b> Weighting</a></li>
<li class="chapter" data-level="10.2" data-path="aggregation.html"><a href="aggregation.html#approaches-1"><i class="fa fa-check"></i><b>10.2</b> Approaches</a><ul>
<li class="chapter" data-level="10.2.1" data-path="aggregation.html"><a href="aggregation.html#means"><i class="fa fa-check"></i><b>10.2.1</b> Means</a></li>
<li class="chapter" data-level="10.2.2" data-path="aggregation.html"><a href="aggregation.html#other-methods"><i class="fa fa-check"></i><b>10.2.2</b> Other methods</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="aggregation.html"><a href="aggregation.html#aggregation-in-coinr"><i class="fa fa-check"></i><b>10.3</b> Aggregation in COINr</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="weighting-1.html"><a href="weighting-1.html"><i class="fa fa-check"></i><b>11</b> Weighting</a><ul>
<li class="chapter" data-level="11.1" data-path="weighting-1.html"><a href="weighting-1.html#approaches-to-weighting"><i class="fa fa-check"></i><b>11.1</b> Approaches to weighting</a><ul>
<li class="chapter" data-level="11.1.1" data-path="weighting-1.html"><a href="weighting-1.html#equal-weighting"><i class="fa fa-check"></i><b>11.1.1</b> Equal weighting</a></li>
<li class="chapter" data-level="11.1.2" data-path="weighting-1.html"><a href="weighting-1.html#budget-allocation"><i class="fa fa-check"></i><b>11.1.2</b> Budget allocation</a></li>
<li class="chapter" data-level="11.1.3" data-path="weighting-1.html"><a href="weighting-1.html#principle-component-analysis"><i class="fa fa-check"></i><b>11.1.3</b> Principle component analysis</a></li>
<li class="chapter" data-level="11.1.4" data-path="weighting-1.html"><a href="weighting-1.html#weight-optimisation"><i class="fa fa-check"></i><b>11.1.4</b> Weight optimisation</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="weighting-1.html"><a href="weighting-1.html#weighting-tools-in-coinr"><i class="fa fa-check"></i><b>11.2</b> Weighting tools in COINr</a><ul>
<li class="chapter" data-level="11.2.1" data-path="weighting-1.html"><a href="weighting-1.html#manual-weighting"><i class="fa fa-check"></i><b>11.2.1</b> Manual weighting</a></li>
<li class="chapter" data-level="11.2.2" data-path="weighting-1.html"><a href="weighting-1.html#interactive-re-weighting-with-rew8r"><i class="fa fa-check"></i><b>11.2.2</b> Interactive re-weighting with ReW8R</a></li>
<li class="chapter" data-level="11.2.3" data-path="weighting-1.html"><a href="weighting-1.html#automatic-re-weighting"><i class="fa fa-check"></i><b>11.2.3</b> Automatic re-weighting</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="weighting-1.html"><a href="weighting-1.html#effective-weights"><i class="fa fa-check"></i><b>11.3</b> Effective weights</a></li>
<li class="chapter" data-level="11.4" data-path="weighting-1.html"><a href="weighting-1.html#final-points"><i class="fa fa-check"></i><b>11.4</b> Final points</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="visualising-results.html"><a href="visualising-results.html"><i class="fa fa-check"></i><b>12</b> Visualising results</a><ul>
<li class="chapter" data-level="12.1" data-path="visualising-results.html"><a href="visualising-results.html#tables"><i class="fa fa-check"></i><b>12.1</b> Tables</a></li>
<li class="chapter" data-level="12.2" data-path="visualising-results.html"><a href="visualising-results.html#plots"><i class="fa fa-check"></i><b>12.2</b> Plots</a></li>
<li class="chapter" data-level="12.3" data-path="visualising-results.html"><a href="visualising-results.html#interactive-exploration"><i class="fa fa-check"></i><b>12.3</b> Interactive exploration</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html"><i class="fa fa-check"></i><b>13</b> Adjustments and comparisons</a><ul>
<li class="chapter" data-level="13.1" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#regeneration"><i class="fa fa-check"></i><b>13.1</b> Regeneration</a></li>
<li class="chapter" data-level="13.2" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#adjustments"><i class="fa fa-check"></i><b>13.2</b> Adjustments</a><ul>
<li class="chapter" data-level="13.2.1" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#addingremoving-indicators"><i class="fa fa-check"></i><b>13.2.1</b> Adding/removing indicators</a></li>
<li class="chapter" data-level="13.2.2" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#other-adjustments"><i class="fa fa-check"></i><b>13.2.2</b> Other adjustments</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#comparisons"><i class="fa fa-check"></i><b>13.3</b> Comparisons</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html"><i class="fa fa-check"></i><b>14</b> Sensitivity analysis</a><ul>
<li class="chapter" data-level="14.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#about"><i class="fa fa-check"></i><b>14.1</b> About</a></li>
<li class="chapter" data-level="14.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#five-steps"><i class="fa fa-check"></i><b>14.2</b> Five steps</a><ul>
<li class="chapter" data-level="14.2.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#specifying-the-model"><i class="fa fa-check"></i><b>14.2.1</b> Specifying the model</a></li>
<li class="chapter" data-level="14.2.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#which-assumptions-to-vary"><i class="fa fa-check"></i><b>14.2.2</b> Which assumptions to vary</a></li>
<li class="chapter" data-level="14.2.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#alternative-values"><i class="fa fa-check"></i><b>14.2.3</b> Alternative values</a></li>
<li class="chapter" data-level="14.2.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#selecting-the-output"><i class="fa fa-check"></i><b>14.2.4</b> Selecting the output</a></li>
<li class="chapter" data-level="14.2.5" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#sa-methodology"><i class="fa fa-check"></i><b>14.2.5</b> SA methodology</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#sensitivity-in-coinr"><i class="fa fa-check"></i><b>14.3</b> Sensitivity in COINr</a><ul>
<li class="chapter" data-level="14.3.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#general-specifications"><i class="fa fa-check"></i><b>14.3.1</b> General specifications</a></li>
<li class="chapter" data-level="14.3.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#varying-weights"><i class="fa fa-check"></i><b>14.3.2</b> Varying weights</a></li>
<li class="chapter" data-level="14.3.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#running-an-uncertainty-analysis"><i class="fa fa-check"></i><b>14.3.3</b> Running an uncertainty analysis</a></li>
<li class="chapter" data-level="14.3.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#running-a-sensitivity-analysis"><i class="fa fa-check"></i><b>14.3.4</b> Running a sensitivity analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="helper-functions.html"><a href="helper-functions.html"><i class="fa fa-check"></i><b>15</b> Helper functions</a><ul>
<li class="chapter" data-level="15.1" data-path="helper-functions.html"><a href="helper-functions.html#r-interfaces"><i class="fa fa-check"></i><b>15.1</b> R Interfaces</a><ul>
<li class="chapter" data-level="15.1.1" data-path="helper-functions.html"><a href="helper-functions.html#data-import"><i class="fa fa-check"></i><b>15.1.1</b> Data import</a></li>
<li class="chapter" data-level="15.1.2" data-path="helper-functions.html"><a href="helper-functions.html#export-to-excel"><i class="fa fa-check"></i><b>15.1.2</b> Export to Excel</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="helper-functions.html"><a href="helper-functions.html#selecting-data-sets-and-indicators"><i class="fa fa-check"></i><b>15.2</b> Selecting data sets and indicators</a></li>
<li class="chapter" data-level="15.3" data-path="helper-functions.html"><a href="helper-functions.html#rounding-data-frames"><i class="fa fa-check"></i><b>15.3</b> Rounding data frames</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html"><i class="fa fa-check"></i><b>16</b> Appendix: R Resources</a><ul>
<li class="chapter" data-level="16.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#introduction-to-r"><i class="fa fa-check"></i><b>16.1</b> Introduction to R</a></li>
<li class="chapter" data-level="16.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#advanced-resources"><i class="fa fa-check"></i><b>16.2</b> Advanced resources</a><ul>
<li class="chapter" data-level="16.2.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#programming"><i class="fa fa-check"></i><b>16.2.1</b> Programming</a></li>
<li class="chapter" data-level="16.2.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#visualisation-1"><i class="fa fa-check"></i><b>16.2.2</b> Visualisation</a></li>
<li class="chapter" data-level="16.2.3" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#other"><i class="fa fa-check"></i><b>16.2.3</b> Other</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>17</b> Acknowledgements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Composite Indicator Development and Analysis in R with COINr</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="sensitivity-analysis" class="section level1">
<h1><span class="header-section-number">Chapter 14</span> Sensitivity analysis</h1>
<p>Composite indicators, like any model, have many associated uncertainties.</p>
<p><em>Sensitivity analysis</em> can help to quantify the uncertainty in the scores and rankings of the composite indicator, and to identify which assumptions are driving this uncertainty, and which are less important.</p>
<div id="about" class="section level2">
<h2><span class="header-section-number">14.1</span> About</h2>
<p>Sensitivity analysis is often confused with <em>uncertainty analysis</em>. Uncertainty analysis involves estimating the uncertainty in the ouputs of a system (here, the scores and ranks of the composite indicator), given the uncertainties in the inputs (here, methodological decisions, weights, etc.). The results of an uncertainty include for example confidence intervals over the ranks, median ranks, and so on.</p>
<p>Sensitivity analysis is an extra step after uncertainty analysis, and estimates which of the input uncertainties are driving the output uncertainty, and by how much. A rule of thumb, known as the <a href="https://en.wikipedia.org/wiki/Pareto_principle">Pareto Principle</a> (or the 80/20 Rule) suggests that often, only a small proportion of the input uncertainties are causing the majority of the output uncertainty. Sensitivity analysis allows us to find which input uncertainties are significant (and therefore perhaps worthy of extra attention), and which are not important.</p>
<p>In reality, sensitivity analysis and uncertainty analysis can be performed simultaneously. However in both cases, the main technique is to use Monte Carlo methods. This essentially involves re-calculating the composite indicator many times, each time randomly varying the uncertain variables (assumptions, parameters), in order to estimate the output distributions.</p>
<p>At first glance, one might think that sensitivity analysis can be performed by switching one assumption at a time, using the tools outlined in <a href="adjustments-and-comparisons.html#adjustments-and-comparisons">Adjustments and comparisons</a>. However, uncertainties interact with one another, and to properly understand the impact of uncertainties, one must vary uncertain parameters and assumptions <em>simultaneously</em>.</p>
<p>Sensitivity analysis and uncertainty analysis are large topics and are in fact research fields in their own right. To better understand them, a good starting point is <a href="https://onlinelibrary.wiley.com/doi/book/10.1002/9780470725184">Global Sensitivity Analysis: The Primer</a>, and a recent summary of sensitivity analysis research can be found <a href="https://www.sciencedirect.com/science/article/pii/S1364815220310112?via%3Dihub">here</a>.</p>
</div>
<div id="five-steps" class="section level2">
<h2><span class="header-section-number">14.2</span> Five steps</h2>
<p>To perform an uncertainty or sensitivity analysis, one must define several things:</p>
<ol style="list-style-type: decimal">
<li>The system or model (in this case it is a composite indicator, represented as a COIN)</li>
<li>Which assumptions to treat as uncertain</li>
<li>The alternative values or distributions assigned to each uncertain assumption</li>
<li>Which output or outputs to target (i.e. to calculate confidence intervals for)</li>
<li>Methodological specifications for the sensitivity analysis itself, for example the method and the number of replications to run.</li>
</ol>
<p>This should dispel the common idea that one can simply “run a sensitivity analysis”. In fact, all of these steps require some thought and attention, and the results of the sensitivity analysis will be themselves dependent on these choices. Let’s go through them one by one.</p>
<div id="specifying-the-model" class="section level3">
<h3><span class="header-section-number">14.2.1</span> Specifying the model</h3>
<p>First, the <strong>system or model</strong>. This should be clear: you need to have already built your (nominal) composite indicator in order to check the uncertainties. Usually this would involve calculating the results up to and including the aggregated index. The choices in this model should represent your “best” choices for each methodological step, for example your preferred aggregration method, preferred set of weights, and so on.</p>
</div>
<div id="which-assumptions-to-vary" class="section level3">
<h3><span class="header-section-number">14.2.2</span> Which assumptions to vary</h3>
<p>Specifying <strong>which assumptions to vary</strong> is more complicated. It is impossible to fully quantify the uncertainty in a composite indicator (or any model, for that matter) because there are simply so many sources of uncertainty, ranging from the input data, the choice of indicators, the structure of the index, and all the methodological steps along the way (imputation, treatment, normalisation, etc.). A reasonable approach is to identify specific assumptions and parameters that could have plausible alternatives, and can be practically varied.</p>
<p>The construction of composite indicators in COINr (deliberately) lends itself well to uncertainty analysis, because as we have seen in the <a href="adjustments-and-comparisons.html#adjustments-and-comparisons">Adjustments and comparisons</a> chapter, all the methodological choices used to build the composite indicator are recorded inside the COIN, and changes can be made by simply altering these parameters and calling the <code>regen()</code> function. Sensitivity and uncertainty analysis is simply an extension of this concept - where we create a large number of alternative COINs, each with methodological variations following the distributions assigned to each uncertain assumption.</p>
<p>The upshot here is that (at least in theory) any parameter from any of the construction functions (see again the table in <a href="adjustments-and-comparisons.html#adjustments-and-comparisons">Adjustments and comparisons</a>) can be varied as part of a sensitivity analysis. This includes, for example:</p>
<ul>
<li>Inclusion and exclusion of indicators</li>
<li>Data availability thresholds for screening units</li>
<li>Alternative choices of denominators</li>
<li>Alternative imputation methods</li>
<li>Alternative data treatment, Winsorisation thresholds, skew and kurtosis values, transformations</li>
<li>Alternative normalisation methods and parameters</li>
<li>Alternative aggregration methods and weight sets</li>
</ul>
<p>On top of this, it is possible to randomly perturb weights at each level by a specified noise factor. This is explained in more detail later in this chapter.</p>
<p>The reason that these can be varied <em>in theory</em> is because there may arise conflicts between methodological choices. For example, if a normalisation method results in negative values, we cannot use a default geometric mean aggregation method. For this reason, it is recommended to focus on key uncertainties and start modestly with a sensitivity analysis, working up to a more complex version if required.</p>
</div>
<div id="alternative-values" class="section level3">
<h3><span class="header-section-number">14.2.3</span> Alternative values</h3>
<p>Having selected some key uncertain assumptions, we must assign plausible alternative values. For example, let’s say that an uncertain assumption is the normalisation method. By default, we have used min-max, but perhaps other methods could be reasonable alternatives. The question is then, which alternatives to test?</p>
<p>The answer here should not be to blindly apply all possible alternatives available, but rather to select some alternatives that represent <strong>plausible</strong> alternatives, ruling out any that do not fit the requirements of the index. For example, using rank normalisation is a robust method that neatly deals with outliers but by doing so, also ignores whether a unit is an exceptional performer. This may be good or bad depending on what you want to capture. If it is “good” then it could be considered as an alternative. If it does not fit the objectives, it is not a plausible alternative, so should not be included in the sensitivity analysis.</p>
<p>Finding plausible alternatives is not necessarily an easy task, and we must recall that in any case we will end up with a lower bound on the uncertainty, since we cannot fully test all uncertainties, as discussed previously (we recall that this is the same in any model, not just in composite indicators). Yet, we can still do a lot better than no uncertainty analysis at all.</p>
<p>In the end, for each uncertain parameter, we should end up with a list of alternative plausible values. Note that at the moment, COINr assumes equal probability for all alternatives, i.e. uniform distributions. This may be extended to other distributions in future releases.</p>
</div>
<div id="selecting-the-output" class="section level3">
<h3><span class="header-section-number">14.2.4</span> Selecting the output</h3>
<p>Composite indicators have multidimensional outputs - one value for each unit and for each aggregate or normalised indicator. Typically, the most interesting outputs to look at in the context of a sensitivity analysis are the final index values, and possibly some of the underlying aggregate scores (sub-indexes, pillars, etc.).</p>
<p>COINr allows us to select which inputs to target, and this is explained more below.</p>
</div>
<div id="sa-methodology" class="section level3">
<h3><span class="header-section-number">14.2.5</span> SA methodology</h3>
<p>Finally, we have to specify what kind of analysis to perform, and how many model runs. Currently, COINr offers either an uncertainty analysis (resulting in distributions over ranks), or a sensitivity analysis (additionally showing which input uncertainties cause the most output uncertainty). As mentioned, sensitivity analysis methodology is a rabbit hole in itself, and interested readers could refer to the references at the beginning of this chapter to find out more.</p>
<p>Sensitivity analysis usually requires more model runs (replications of the composite indicator). Still, composite indicators are fairly cheap to evaluate, depending on the number of indicators and the complexity of the construction. Regardless of whether you run an uncertainty or sensitivity analysis, more model runs is always better because it increases the accuracy of the estimations of the distributions over ranks. If you are prepared to wait some minutes or possibly hour(s), normally this is enough to perform a fairly solid sensitivity analysis.</p>
</div>
</div>
<div id="sensitivity-in-coinr" class="section level2">
<h2><span class="header-section-number">14.3</span> Sensitivity in COINr</h2>
<p>To run a sensitivity analysis in COINr, the function of interest is <code>sensitivity()</code>. We must follow the steps outlined above, so first, you should have a nominal composite indicator constructed up to and including the aggregation step. Here, we use our old friend the ASEM index.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="sensitivity-analysis.html#cb77-1"></a><span class="kw">library</span>(COINr)</span>
<span id="cb77-2"><a href="sensitivity-analysis.html#cb77-2"></a><span class="co"># build ASEM index</span></span>
<span id="cb77-3"><a href="sensitivity-analysis.html#cb77-3"></a>ASEM &lt;-<span class="st"> </span><span class="kw">build_ASEM</span>()</span>
<span id="cb77-4"><a href="sensitivity-analysis.html#cb77-4"></a><span class="co">## -----------------</span></span>
<span id="cb77-5"><a href="sensitivity-analysis.html#cb77-5"></a><span class="co">## Denominators detected - stored in .$Input$Denominators</span></span>
<span id="cb77-6"><a href="sensitivity-analysis.html#cb77-6"></a><span class="co">## -----------------</span></span>
<span id="cb77-7"><a href="sensitivity-analysis.html#cb77-7"></a><span class="co">## -----------------</span></span>
<span id="cb77-8"><a href="sensitivity-analysis.html#cb77-8"></a><span class="co">## Indicator codes cross-checked and OK.</span></span>
<span id="cb77-9"><a href="sensitivity-analysis.html#cb77-9"></a><span class="co">## -----------------</span></span>
<span id="cb77-10"><a href="sensitivity-analysis.html#cb77-10"></a><span class="co">## Number of indicators = 49</span></span>
<span id="cb77-11"><a href="sensitivity-analysis.html#cb77-11"></a><span class="co">## Number of units = 51</span></span>
<span id="cb77-12"><a href="sensitivity-analysis.html#cb77-12"></a><span class="co">## Number of reference years of data = 1</span></span>
<span id="cb77-13"><a href="sensitivity-analysis.html#cb77-13"></a><span class="co">## Years from 2018 to 2018</span></span>
<span id="cb77-14"><a href="sensitivity-analysis.html#cb77-14"></a><span class="co">## Number of aggregation levels = 3 above indicator level.</span></span>
<span id="cb77-15"><a href="sensitivity-analysis.html#cb77-15"></a><span class="co">## -----------------</span></span>
<span id="cb77-16"><a href="sensitivity-analysis.html#cb77-16"></a><span class="co">## Aggregation level 1 with 8 aggregate groups: Physical, ConEcFin, Political, Instit, P2P, Environ, Social, SusEcFin</span></span>
<span id="cb77-17"><a href="sensitivity-analysis.html#cb77-17"></a><span class="co">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb77-18"><a href="sensitivity-analysis.html#cb77-18"></a><span class="co">## Aggregation level 2 with 2 aggregate groups: Conn, Sust</span></span>
<span id="cb77-19"><a href="sensitivity-analysis.html#cb77-19"></a><span class="co">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb77-20"><a href="sensitivity-analysis.html#cb77-20"></a><span class="co">## Aggregation level 3 with 1 aggregate groups: Index</span></span>
<span id="cb77-21"><a href="sensitivity-analysis.html#cb77-21"></a><span class="co">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb77-22"><a href="sensitivity-analysis.html#cb77-22"></a><span class="co">## -----------------</span></span>
<span id="cb77-23"><a href="sensitivity-analysis.html#cb77-23"></a><span class="co">## Missing data points detected = 65</span></span>
<span id="cb77-24"><a href="sensitivity-analysis.html#cb77-24"></a><span class="co">## Missing data points imputed = 65, using method = indgroup_mean</span></span></code></pre></div>
<div id="general-specifications" class="section level3">
<h3><span class="header-section-number">14.3.1</span> General specifications</h3>
<p>Next, we have to decide which parameters to treat as uncertain. Here, we will consider three things:</p>
<ol style="list-style-type: decimal">
<li>The imputation method</li>
<li>The normalisation method</li>
<li>The weights</li>
</ol>
<p>These are chosen as a limited set to keep things relatively simple, and because imputation is always a significant uncertainty (we are basically guessing data points). We will also consider a couple of alternative normalisation methods. Finally, we will randomly perturb the weights.</p>
<p>For the distributions (i.e. the plausible alternatives), we will consider the following:</p>
<ul>
<li>Imputation using either indicator group mean, indicator mean, or no imputation</li>
<li>Normalisation using either min-max, rank, or distance to maximum</li>
<li>Perturb pillar and sub index weights by +/-25%</li>
</ul>
<p>Finally, we will consider the index as the target.</p>
<p>Let’s enter these specifications. The most complex part is specifying the <code>SA_specs</code> argument of the <code>sensitivity()</code> function, which specifies which parameters to vary and which alternative values to use. To explain how this works, the easiest way is to construct the specifications for our example.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="sensitivity-analysis.html#cb78-1"></a><span class="co"># define noise to be applied to weights</span></span>
<span id="cb78-2"><a href="sensitivity-analysis.html#cb78-2"></a>nspecs &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">AgLevel =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">NoiseFactor =</span> <span class="kw">c</span>(<span class="fl">0.25</span>,<span class="fl">0.25</span>))</span>
<span id="cb78-3"><a href="sensitivity-analysis.html#cb78-3"></a></span>
<span id="cb78-4"><a href="sensitivity-analysis.html#cb78-4"></a><span class="co"># create list specifying assumptions to vary and alternatives</span></span>
<span id="cb78-5"><a href="sensitivity-analysis.html#cb78-5"></a>SAspecs &lt;-<span class="st"> </span><span class="kw">list</span>(</span>
<span id="cb78-6"><a href="sensitivity-analysis.html#cb78-6"></a>  <span class="dt">impute =</span> <span class="kw">list</span>(<span class="dt">imtype =</span> <span class="kw">c</span>(<span class="st">&quot;indgroup_mean&quot;</span>, <span class="st">&quot;ind_mean&quot;</span>, <span class="st">&quot;none&quot;</span>)),</span>
<span id="cb78-7"><a href="sensitivity-analysis.html#cb78-7"></a>  <span class="dt">normalise =</span> <span class="kw">list</span>(<span class="dt">ntype =</span> <span class="kw">c</span>(<span class="st">&quot;minmax&quot;</span>, <span class="st">&quot;rank&quot;</span>, <span class="st">&quot;dist2max&quot;</span>)),</span>
<span id="cb78-8"><a href="sensitivity-analysis.html#cb78-8"></a>  <span class="dt">weights =</span> <span class="kw">list</span>(<span class="dt">NoiseSpecs =</span> nspecs, <span class="dt">Nominal =</span> <span class="st">&quot;Original&quot;</span>)</span>
<span id="cb78-9"><a href="sensitivity-analysis.html#cb78-9"></a>)</span></code></pre></div>
<p>Leaving aside the <code>nspecs</code> line for now (but see below for details), we focus on the list <code>SAspecs</code>, which will be used as the <code>SA_specs</code> argument of <code>sensitivity()</code>. The <em>names</em> of the first level of this list should be any of the seven construction functions. Each named element of the list is itself a list, which specifies the parameters of that function to vary, and the alternative values. In summary, the general format is:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="sensitivity-analysis.html#cb79-1"></a><span class="op">&lt;</span>function_name<span class="op">&gt;</span><span class="st"> </span><span class="er">=</span><span class="st"> </span><span class="kw">list</span>(<span class="op">&lt;</span>parameter name<span class="op">&gt;</span><span class="st"> </span><span class="er">=</span><span class="st"> </span><span class="er">&lt;</span>vector or list of alternatives<span class="op">&gt;</span>)</span></code></pre></div>
<p>There is no restriction on the number of parameters that can be varied, or the number of alternatives. You can have multiple parameters from the same function, for example.</p>
</div>
<div id="varying-weights" class="section level3">
<h3><span class="header-section-number">14.3.2</span> Varying weights</h3>
<p>The exception to the above format is regarding weights. Weights are input as an argument of the <code>aggregate()</code> function, but since this is a single argument, it only behaves as a single parameter. That means that we could test alternative weight sets as part of the sensitivity analysis:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="sensitivity-analysis.html#cb80-1"></a><span class="co"># example entry in SA_specs list of sensitivity() [not used here]</span></span>
<span id="cb80-2"><a href="sensitivity-analysis.html#cb80-2"></a>aggregate =<span class="st"> </span><span class="kw">list</span>(<span class="dt">agweights =</span> <span class="kw">c</span>(<span class="st">&quot;Weights1&quot;</span>, <span class="st">&quot;Weights2&quot;</span>, <span class="st">&quot;Weights3&quot;</span>))</span></code></pre></div>
<p>where “Weights1” and friends are alternative sets of weights that we have stored in <code>.$Parameters$Weights</code>. This is a useful test but only gives a limited picture of uncertainty because we test between a small set of alternatives. It may be the best approach if we have two or three fairly clear alternatives for weighting (note: this can also be a way to exclude indicators or even entire aggregation groups, by setting certain weights to zero).</p>
<p>If the uncertainty is more general, i.e. we have elicited weights but we feel that there is a reasonable degree of uncertainty surrounding all weight values (which usually there is), COINr also includes the option to apply random “noise” to the weights. With this approach, for each replication of the composite indicator, a random value is added to each weight, of the form:</p>
<p><span class="math display">\[ w&#39;_i = w_i + \epsilon_i, \; \; \epsilon_i \sim U[-\phi w_i, \phi w_i] \]</span></p>
<p>where <span class="math inline">\(w_i\)</span> is a weight, <span class="math inline">\(\epsilon_i\)</span> is the added noise, and <span class="math inline">\(\phi\)</span> is a “noise factor”. This means that if we set <span class="math inline">\(\phi = 0.25\)</span>, for example, it would let <span class="math inline">\(w_i\)</span> vary between +/-25% of its nominal value, following a uniform distribution.</p>
<p>The noise factor can be different from one aggregation level to another in COINr. That means we can choose which aggregation level weights to apply noise to, and how much for each level. To specify this in the <code>sensitivity()</code> function, we add it as a “special” <code>weights</code> entry in the <code>SAspecs</code> list described above. It is special in the sense that this is the only entry that is allowed that is not a construction function name.</p>
<p>The weights entry was already defined above, but let’s look at it again here:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="sensitivity-analysis.html#cb81-1"></a><span class="co"># define noise to be applied to weights</span></span>
<span id="cb81-2"><a href="sensitivity-analysis.html#cb81-2"></a>nspecs &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">AgLevel =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">NoiseFactor =</span> <span class="kw">c</span>(<span class="fl">0.25</span>,<span class="fl">0.25</span>))</span>
<span id="cb81-3"><a href="sensitivity-analysis.html#cb81-3"></a></span>
<span id="cb81-4"><a href="sensitivity-analysis.html#cb81-4"></a>nspecs</span>
<span id="cb81-5"><a href="sensitivity-analysis.html#cb81-5"></a></span>
<span id="cb81-6"><a href="sensitivity-analysis.html#cb81-6"></a><span class="co"># create list specifying assumptions to vary and alternatives</span></span>
<span id="cb81-7"><a href="sensitivity-analysis.html#cb81-7"></a>weights =<span class="st"> </span><span class="kw">list</span>(<span class="dt">NoiseSpecs =</span> nspecs,</span>
<span id="cb81-8"><a href="sensitivity-analysis.html#cb81-8"></a>               <span class="dt">Nominal =</span> <span class="st">&quot;Original&quot;</span>)</span></code></pre></div>
<p>The weights list has two entries. The first is a data frame where each row is the specifications for noise to apply to the weights of an aggregation level. It has two columns: <code>AgLev</code> which is the aggregation level, and <code>NoiseFactor</code>, which is the noise factor described above. In the example here, we have specified that at aggregation levels 2 and 3 (pillars and sub-indexes), there should be noise factors of 0.25 (+/-25% of nominal weight values). Indicator weights remain always at nominal values since they are not specified in this table.</p>
<p>The second entry, <code>Nominal</code>, is the name of the weight set to use as the nominal values (i.e. the baseline to apply the noise to). This should correspond to a weight set present in <code>.$Parameters$Weights</code>. Here, we have set it to <code>Original</code>, which is the original weights that were input to <code>assemble()</code>.</p>
</div>
<div id="running-an-uncertainty-analysis" class="section level3">
<h3><span class="header-section-number">14.3.3</span> Running an uncertainty analysis</h3>
<p>To actually run the analysis, we call the <code>sensitivity()</code> function, using the specifications in the <code>SAspecs</code> list, and setting <code>v_targ = "Index"</code>, meaning that the index will be the target of the sensitivity analysis. Further, we specify that there should be 100 replications (this number is kept fairly low to limit the time taken to compile this book), and that the type of analysis should be an uncertainty analysis.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="sensitivity-analysis.html#cb82-1"></a><span class="co"># run uncertainty analysis</span></span>
<span id="cb82-2"><a href="sensitivity-analysis.html#cb82-2"></a>SAresults &lt;-<span class="st"> </span><span class="kw">sensitivity</span>(ASEM, <span class="dt">v_targ =</span> <span class="st">&quot;Index&quot;</span>,</span>
<span id="cb82-3"><a href="sensitivity-analysis.html#cb82-3"></a>                         <span class="dt">SA_specs =</span> SAspecs,</span>
<span id="cb82-4"><a href="sensitivity-analysis.html#cb82-4"></a>                         <span class="dt">N =</span> <span class="dv">100</span>,</span>
<span id="cb82-5"><a href="sensitivity-analysis.html#cb82-5"></a>                         <span class="dt">SA_type =</span> <span class="st">&quot;UA&quot;</span>)</span>
<span id="cb82-6"><a href="sensitivity-analysis.html#cb82-6"></a><span class="co">## Iteration 1 of 100 ... 1% complete</span></span>
<span id="cb82-7"><a href="sensitivity-analysis.html#cb82-7"></a><span class="co">## Iteration 2 of 100 ... 2% complete</span></span>
<span id="cb82-8"><a href="sensitivity-analysis.html#cb82-8"></a><span class="co">## Iteration 3 of 100 ... 3% complete</span></span>
<span id="cb82-9"><a href="sensitivity-analysis.html#cb82-9"></a><span class="co">## Iteration 4 of 100 ... 4% complete</span></span>
<span id="cb82-10"><a href="sensitivity-analysis.html#cb82-10"></a><span class="co">## Iteration 5 of 100 ... 5% complete</span></span>
<span id="cb82-11"><a href="sensitivity-analysis.html#cb82-11"></a><span class="co">## Iteration 6 of 100 ... 6% complete</span></span>
<span id="cb82-12"><a href="sensitivity-analysis.html#cb82-12"></a><span class="co">## Iteration 7 of 100 ... 7% complete</span></span>
<span id="cb82-13"><a href="sensitivity-analysis.html#cb82-13"></a><span class="co">## Iteration 8 of 100 ... 8% complete</span></span>
<span id="cb82-14"><a href="sensitivity-analysis.html#cb82-14"></a><span class="co">## Iteration 9 of 100 ... 9% complete</span></span>
<span id="cb82-15"><a href="sensitivity-analysis.html#cb82-15"></a><span class="co">## Iteration 10 of 100 ... 10% complete</span></span>
<span id="cb82-16"><a href="sensitivity-analysis.html#cb82-16"></a><span class="co">## Iteration 11 of 100 ... 11% complete</span></span>
<span id="cb82-17"><a href="sensitivity-analysis.html#cb82-17"></a><span class="co">## Iteration 12 of 100 ... 12% complete</span></span>
<span id="cb82-18"><a href="sensitivity-analysis.html#cb82-18"></a><span class="co">## Iteration 13 of 100 ... 13% complete</span></span>
<span id="cb82-19"><a href="sensitivity-analysis.html#cb82-19"></a><span class="co">## Iteration 14 of 100 ... 14% complete</span></span>
<span id="cb82-20"><a href="sensitivity-analysis.html#cb82-20"></a><span class="co">## Iteration 15 of 100 ... 15% complete</span></span>
<span id="cb82-21"><a href="sensitivity-analysis.html#cb82-21"></a><span class="co">## Iteration 16 of 100 ... 16% complete</span></span>
<span id="cb82-22"><a href="sensitivity-analysis.html#cb82-22"></a><span class="co">## Iteration 17 of 100 ... 17% complete</span></span>
<span id="cb82-23"><a href="sensitivity-analysis.html#cb82-23"></a><span class="co">## Iteration 18 of 100 ... 18% complete</span></span>
<span id="cb82-24"><a href="sensitivity-analysis.html#cb82-24"></a><span class="co">## Iteration 19 of 100 ... 19% complete</span></span>
<span id="cb82-25"><a href="sensitivity-analysis.html#cb82-25"></a><span class="co">## Iteration 20 of 100 ... 20% complete</span></span>
<span id="cb82-26"><a href="sensitivity-analysis.html#cb82-26"></a><span class="co">## Iteration 21 of 100 ... 21% complete</span></span>
<span id="cb82-27"><a href="sensitivity-analysis.html#cb82-27"></a><span class="co">## Iteration 22 of 100 ... 22% complete</span></span>
<span id="cb82-28"><a href="sensitivity-analysis.html#cb82-28"></a><span class="co">## Iteration 23 of 100 ... 23% complete</span></span>
<span id="cb82-29"><a href="sensitivity-analysis.html#cb82-29"></a><span class="co">## Iteration 24 of 100 ... 24% complete</span></span>
<span id="cb82-30"><a href="sensitivity-analysis.html#cb82-30"></a><span class="co">## Iteration 25 of 100 ... 25% complete</span></span>
<span id="cb82-31"><a href="sensitivity-analysis.html#cb82-31"></a><span class="co">## Iteration 26 of 100 ... 26% complete</span></span>
<span id="cb82-32"><a href="sensitivity-analysis.html#cb82-32"></a><span class="co">## Iteration 27 of 100 ... 27% complete</span></span>
<span id="cb82-33"><a href="sensitivity-analysis.html#cb82-33"></a><span class="co">## Iteration 28 of 100 ... 28% complete</span></span>
<span id="cb82-34"><a href="sensitivity-analysis.html#cb82-34"></a><span class="co">## Iteration 29 of 100 ... 29% complete</span></span>
<span id="cb82-35"><a href="sensitivity-analysis.html#cb82-35"></a><span class="co">## Iteration 30 of 100 ... 30% complete</span></span>
<span id="cb82-36"><a href="sensitivity-analysis.html#cb82-36"></a><span class="co">## Iteration 31 of 100 ... 31% complete</span></span>
<span id="cb82-37"><a href="sensitivity-analysis.html#cb82-37"></a><span class="co">## Iteration 32 of 100 ... 32% complete</span></span>
<span id="cb82-38"><a href="sensitivity-analysis.html#cb82-38"></a><span class="co">## Iteration 33 of 100 ... 33% complete</span></span>
<span id="cb82-39"><a href="sensitivity-analysis.html#cb82-39"></a><span class="co">## Iteration 34 of 100 ... 34% complete</span></span>
<span id="cb82-40"><a href="sensitivity-analysis.html#cb82-40"></a><span class="co">## Iteration 35 of 100 ... 35% complete</span></span>
<span id="cb82-41"><a href="sensitivity-analysis.html#cb82-41"></a><span class="co">## Iteration 36 of 100 ... 36% complete</span></span>
<span id="cb82-42"><a href="sensitivity-analysis.html#cb82-42"></a><span class="co">## Iteration 37 of 100 ... 37% complete</span></span>
<span id="cb82-43"><a href="sensitivity-analysis.html#cb82-43"></a><span class="co">## Iteration 38 of 100 ... 38% complete</span></span>
<span id="cb82-44"><a href="sensitivity-analysis.html#cb82-44"></a><span class="co">## Iteration 39 of 100 ... 39% complete</span></span>
<span id="cb82-45"><a href="sensitivity-analysis.html#cb82-45"></a><span class="co">## Iteration 40 of 100 ... 40% complete</span></span>
<span id="cb82-46"><a href="sensitivity-analysis.html#cb82-46"></a><span class="co">## Iteration 41 of 100 ... 41% complete</span></span>
<span id="cb82-47"><a href="sensitivity-analysis.html#cb82-47"></a><span class="co">## Iteration 42 of 100 ... 42% complete</span></span>
<span id="cb82-48"><a href="sensitivity-analysis.html#cb82-48"></a><span class="co">## Iteration 43 of 100 ... 43% complete</span></span>
<span id="cb82-49"><a href="sensitivity-analysis.html#cb82-49"></a><span class="co">## Iteration 44 of 100 ... 44% complete</span></span>
<span id="cb82-50"><a href="sensitivity-analysis.html#cb82-50"></a><span class="co">## Iteration 45 of 100 ... 45% complete</span></span>
<span id="cb82-51"><a href="sensitivity-analysis.html#cb82-51"></a><span class="co">## Iteration 46 of 100 ... 46% complete</span></span>
<span id="cb82-52"><a href="sensitivity-analysis.html#cb82-52"></a><span class="co">## Iteration 47 of 100 ... 47% complete</span></span>
<span id="cb82-53"><a href="sensitivity-analysis.html#cb82-53"></a><span class="co">## Iteration 48 of 100 ... 48% complete</span></span>
<span id="cb82-54"><a href="sensitivity-analysis.html#cb82-54"></a><span class="co">## Iteration 49 of 100 ... 49% complete</span></span>
<span id="cb82-55"><a href="sensitivity-analysis.html#cb82-55"></a><span class="co">## Iteration 50 of 100 ... 50% complete</span></span>
<span id="cb82-56"><a href="sensitivity-analysis.html#cb82-56"></a><span class="co">## Iteration 51 of 100 ... 51% complete</span></span>
<span id="cb82-57"><a href="sensitivity-analysis.html#cb82-57"></a><span class="co">## Iteration 52 of 100 ... 52% complete</span></span>
<span id="cb82-58"><a href="sensitivity-analysis.html#cb82-58"></a><span class="co">## Iteration 53 of 100 ... 53% complete</span></span>
<span id="cb82-59"><a href="sensitivity-analysis.html#cb82-59"></a><span class="co">## Iteration 54 of 100 ... 54% complete</span></span>
<span id="cb82-60"><a href="sensitivity-analysis.html#cb82-60"></a><span class="co">## Iteration 55 of 100 ... 55% complete</span></span>
<span id="cb82-61"><a href="sensitivity-analysis.html#cb82-61"></a><span class="co">## Iteration 56 of 100 ... 56% complete</span></span>
<span id="cb82-62"><a href="sensitivity-analysis.html#cb82-62"></a><span class="co">## Iteration 57 of 100 ... 57% complete</span></span>
<span id="cb82-63"><a href="sensitivity-analysis.html#cb82-63"></a><span class="co">## Iteration 58 of 100 ... 58% complete</span></span>
<span id="cb82-64"><a href="sensitivity-analysis.html#cb82-64"></a><span class="co">## Iteration 59 of 100 ... 59% complete</span></span>
<span id="cb82-65"><a href="sensitivity-analysis.html#cb82-65"></a><span class="co">## Iteration 60 of 100 ... 60% complete</span></span>
<span id="cb82-66"><a href="sensitivity-analysis.html#cb82-66"></a><span class="co">## Iteration 61 of 100 ... 61% complete</span></span>
<span id="cb82-67"><a href="sensitivity-analysis.html#cb82-67"></a><span class="co">## Iteration 62 of 100 ... 62% complete</span></span>
<span id="cb82-68"><a href="sensitivity-analysis.html#cb82-68"></a><span class="co">## Iteration 63 of 100 ... 63% complete</span></span>
<span id="cb82-69"><a href="sensitivity-analysis.html#cb82-69"></a><span class="co">## Iteration 64 of 100 ... 64% complete</span></span>
<span id="cb82-70"><a href="sensitivity-analysis.html#cb82-70"></a><span class="co">## Iteration 65 of 100 ... 65% complete</span></span>
<span id="cb82-71"><a href="sensitivity-analysis.html#cb82-71"></a><span class="co">## Iteration 66 of 100 ... 66% complete</span></span>
<span id="cb82-72"><a href="sensitivity-analysis.html#cb82-72"></a><span class="co">## Iteration 67 of 100 ... 67% complete</span></span>
<span id="cb82-73"><a href="sensitivity-analysis.html#cb82-73"></a><span class="co">## Iteration 68 of 100 ... 68% complete</span></span>
<span id="cb82-74"><a href="sensitivity-analysis.html#cb82-74"></a><span class="co">## Iteration 69 of 100 ... 69% complete</span></span>
<span id="cb82-75"><a href="sensitivity-analysis.html#cb82-75"></a><span class="co">## Iteration 70 of 100 ... 70% complete</span></span>
<span id="cb82-76"><a href="sensitivity-analysis.html#cb82-76"></a><span class="co">## Iteration 71 of 100 ... 71% complete</span></span>
<span id="cb82-77"><a href="sensitivity-analysis.html#cb82-77"></a><span class="co">## Iteration 72 of 100 ... 72% complete</span></span>
<span id="cb82-78"><a href="sensitivity-analysis.html#cb82-78"></a><span class="co">## Iteration 73 of 100 ... 73% complete</span></span>
<span id="cb82-79"><a href="sensitivity-analysis.html#cb82-79"></a><span class="co">## Iteration 74 of 100 ... 74% complete</span></span>
<span id="cb82-80"><a href="sensitivity-analysis.html#cb82-80"></a><span class="co">## Iteration 75 of 100 ... 75% complete</span></span>
<span id="cb82-81"><a href="sensitivity-analysis.html#cb82-81"></a><span class="co">## Iteration 76 of 100 ... 76% complete</span></span>
<span id="cb82-82"><a href="sensitivity-analysis.html#cb82-82"></a><span class="co">## Iteration 77 of 100 ... 77% complete</span></span>
<span id="cb82-83"><a href="sensitivity-analysis.html#cb82-83"></a><span class="co">## Iteration 78 of 100 ... 78% complete</span></span>
<span id="cb82-84"><a href="sensitivity-analysis.html#cb82-84"></a><span class="co">## Iteration 79 of 100 ... 79% complete</span></span>
<span id="cb82-85"><a href="sensitivity-analysis.html#cb82-85"></a><span class="co">## Iteration 80 of 100 ... 80% complete</span></span>
<span id="cb82-86"><a href="sensitivity-analysis.html#cb82-86"></a><span class="co">## Iteration 81 of 100 ... 81% complete</span></span>
<span id="cb82-87"><a href="sensitivity-analysis.html#cb82-87"></a><span class="co">## Iteration 82 of 100 ... 82% complete</span></span>
<span id="cb82-88"><a href="sensitivity-analysis.html#cb82-88"></a><span class="co">## Iteration 83 of 100 ... 83% complete</span></span>
<span id="cb82-89"><a href="sensitivity-analysis.html#cb82-89"></a><span class="co">## Iteration 84 of 100 ... 84% complete</span></span>
<span id="cb82-90"><a href="sensitivity-analysis.html#cb82-90"></a><span class="co">## Iteration 85 of 100 ... 85% complete</span></span>
<span id="cb82-91"><a href="sensitivity-analysis.html#cb82-91"></a><span class="co">## Iteration 86 of 100 ... 86% complete</span></span>
<span id="cb82-92"><a href="sensitivity-analysis.html#cb82-92"></a><span class="co">## Iteration 87 of 100 ... 87% complete</span></span>
<span id="cb82-93"><a href="sensitivity-analysis.html#cb82-93"></a><span class="co">## Iteration 88 of 100 ... 88% complete</span></span>
<span id="cb82-94"><a href="sensitivity-analysis.html#cb82-94"></a><span class="co">## Iteration 89 of 100 ... 89% complete</span></span>
<span id="cb82-95"><a href="sensitivity-analysis.html#cb82-95"></a><span class="co">## Iteration 90 of 100 ... 90% complete</span></span>
<span id="cb82-96"><a href="sensitivity-analysis.html#cb82-96"></a><span class="co">## Iteration 91 of 100 ... 91% complete</span></span>
<span id="cb82-97"><a href="sensitivity-analysis.html#cb82-97"></a><span class="co">## Iteration 92 of 100 ... 92% complete</span></span>
<span id="cb82-98"><a href="sensitivity-analysis.html#cb82-98"></a><span class="co">## Iteration 93 of 100 ... 93% complete</span></span>
<span id="cb82-99"><a href="sensitivity-analysis.html#cb82-99"></a><span class="co">## Iteration 94 of 100 ... 94% complete</span></span>
<span id="cb82-100"><a href="sensitivity-analysis.html#cb82-100"></a><span class="co">## Iteration 95 of 100 ... 95% complete</span></span>
<span id="cb82-101"><a href="sensitivity-analysis.html#cb82-101"></a><span class="co">## Iteration 96 of 100 ... 96% complete</span></span>
<span id="cb82-102"><a href="sensitivity-analysis.html#cb82-102"></a><span class="co">## Iteration 97 of 100 ... 97% complete</span></span>
<span id="cb82-103"><a href="sensitivity-analysis.html#cb82-103"></a><span class="co">## Iteration 98 of 100 ... 98% complete</span></span>
<span id="cb82-104"><a href="sensitivity-analysis.html#cb82-104"></a><span class="co">## Iteration 99 of 100 ... 99% complete</span></span>
<span id="cb82-105"><a href="sensitivity-analysis.html#cb82-105"></a><span class="co">## Iteration 100 of 100 ... 100% complete</span></span>
<span id="cb82-106"><a href="sensitivity-analysis.html#cb82-106"></a><span class="co">## Time elapsed = 18.83s, average 0.19s/rep.</span></span></code></pre></div>
<p>Running a sensitivity/uncertainty analysis can be time consuming and depends on the complexity of the model and the number of runs specified. This particular analysis took less than a minute for me, but could take more or less time depending on the speed of your computer.</p>
<p>The output of the analysis is a list with several entries:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="sensitivity-analysis.html#cb83-1"></a><span class="co"># see summary of analysis</span></span>
<span id="cb83-2"><a href="sensitivity-analysis.html#cb83-2"></a><span class="kw">summary</span>(SAresults)</span>
<span id="cb83-3"><a href="sensitivity-analysis.html#cb83-3"></a><span class="co">##            Length Class      Mode     </span></span>
<span id="cb83-4"><a href="sensitivity-analysis.html#cb83-4"></a><span class="co">## Scores     101    data.frame list     </span></span>
<span id="cb83-5"><a href="sensitivity-analysis.html#cb83-5"></a><span class="co">## Parameters   2    data.frame list     </span></span>
<span id="cb83-6"><a href="sensitivity-analysis.html#cb83-6"></a><span class="co">## Ranks      101    data.frame list     </span></span>
<span id="cb83-7"><a href="sensitivity-analysis.html#cb83-7"></a><span class="co">## RankStats    6    data.frame list     </span></span>
<span id="cb83-8"><a href="sensitivity-analysis.html#cb83-8"></a><span class="co">## Nominal      3    data.frame list     </span></span>
<span id="cb83-9"><a href="sensitivity-analysis.html#cb83-9"></a><span class="co">## t_elapse     1    -none-     numeric  </span></span>
<span id="cb83-10"><a href="sensitivity-analysis.html#cb83-10"></a><span class="co">## t_average    1    -none-     numeric  </span></span>
<span id="cb83-11"><a href="sensitivity-analysis.html#cb83-11"></a><span class="co">## ParaNames    3    -none-     character</span></span></code></pre></div>
<p>We will go into more detail in a minute, but first we can plot the results of the uncertainty analysis using a dedicated function <code>plotSARanks()</code>:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="sensitivity-analysis.html#cb84-1"></a><span class="kw">plotSARanks</span>(SAresults)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/plotUAranks-1.png" width="768" /></p>
<p>This plot orders the units by their nominal ranks, and plots the median rank across all the replications of the uncertainty analysis, as well as the 5th and 95th percentile rank values. The ranks are the focus of an uncertainty analysis because scores can change drastically depending on the method. Ranks are the only comparable metric across different composite indicator methodologies<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>.</p>
<p>Let us now look at the elements in <code>SAresults</code>. The data frames <code>SAresults$Scores</code> and <code>SAresults$Ranks</code> give the scores and ranks respectively for each replication of the composite indicator. The <code>SAresults$Parameters</code> data frame gives the uncertain parameter values used for each iteration:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="sensitivity-analysis.html#cb85-1"></a><span class="kw">head</span>(SAresults<span class="op">$</span>Parameters)</span>
<span id="cb85-2"><a href="sensitivity-analysis.html#cb85-2"></a><span class="co">##          imtype    ntype</span></span>
<span id="cb85-3"><a href="sensitivity-analysis.html#cb85-3"></a><span class="co">## 1      ind_mean     rank</span></span>
<span id="cb85-4"><a href="sensitivity-analysis.html#cb85-4"></a><span class="co">## 2 indgroup_mean   minmax</span></span>
<span id="cb85-5"><a href="sensitivity-analysis.html#cb85-5"></a><span class="co">## 3 indgroup_mean dist2max</span></span>
<span id="cb85-6"><a href="sensitivity-analysis.html#cb85-6"></a><span class="co">## 4          none   minmax</span></span>
<span id="cb85-7"><a href="sensitivity-analysis.html#cb85-7"></a><span class="co">## 5 indgroup_mean     rank</span></span>
<span id="cb85-8"><a href="sensitivity-analysis.html#cb85-8"></a><span class="co">## 6 indgroup_mean   minmax</span></span></code></pre></div>
<p>Here, each column is a parameter that was varied in the analysis. Note that this does not include the weights used for each iteration since these are themselves data frames.</p>
<p>The <code>SAresults$RankStats</code> table gives a summary of the main statistics of the ranks of each unit, including mean, median, and percentiles:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="sensitivity-analysis.html#cb86-1"></a>SAresults<span class="op">$</span>RankStats</span>
<span id="cb86-2"><a href="sensitivity-analysis.html#cb86-2"></a><span class="co">##    UnitCode Nominal  Mean Median    Q5   Q95</span></span>
<span id="cb86-3"><a href="sensitivity-analysis.html#cb86-3"></a><span class="co">## 1       AUT       7  7.11    7.0  5.00  9.00</span></span>
<span id="cb86-4"><a href="sensitivity-analysis.html#cb86-4"></a><span class="co">## 2       BEL       5  5.44    5.0  3.00  9.00</span></span>
<span id="cb86-5"><a href="sensitivity-analysis.html#cb86-5"></a><span class="co">## 3       BGR      30 29.60   30.0 29.00 31.00</span></span>
<span id="cb86-6"><a href="sensitivity-analysis.html#cb86-6"></a><span class="co">## 4       HRV      18 20.66   20.5 17.00 25.00</span></span>
<span id="cb86-7"><a href="sensitivity-analysis.html#cb86-7"></a><span class="co">## 5       CYP      29 29.94   30.0 28.00 32.05</span></span>
<span id="cb86-8"><a href="sensitivity-analysis.html#cb86-8"></a><span class="co">## 6       CZE      17 17.21   17.0 16.00 19.00</span></span>
<span id="cb86-9"><a href="sensitivity-analysis.html#cb86-9"></a><span class="co">## 7       DNK       3  2.67    2.0  2.00  4.05</span></span>
<span id="cb86-10"><a href="sensitivity-analysis.html#cb86-10"></a><span class="co">## 8       EST      22 19.24   18.0 14.00 26.05</span></span>
<span id="cb86-11"><a href="sensitivity-analysis.html#cb86-11"></a><span class="co">## 9       FIN      13 13.12   13.0 11.00 15.00</span></span>
<span id="cb86-12"><a href="sensitivity-analysis.html#cb86-12"></a><span class="co">## 10      FRA      21 20.73   20.5 18.00 24.00</span></span>
<span id="cb86-13"><a href="sensitivity-analysis.html#cb86-13"></a><span class="co">## 11      DEU       9  8.96    8.0  7.00 13.00</span></span>
<span id="cb86-14"><a href="sensitivity-analysis.html#cb86-14"></a><span class="co">## 12      GRC      32 32.02   32.0 31.00 34.00</span></span>
<span id="cb86-15"><a href="sensitivity-analysis.html#cb86-15"></a><span class="co">## 13      HUN      20 21.02   21.0 18.00 24.00</span></span>
<span id="cb86-16"><a href="sensitivity-analysis.html#cb86-16"></a><span class="co">## 14      IRL      12 12.22   12.0 10.00 16.00</span></span>
<span id="cb86-17"><a href="sensitivity-analysis.html#cb86-17"></a><span class="co">## 15      ITA      28 27.90   28.0 26.00 29.00</span></span>
<span id="cb86-18"><a href="sensitivity-analysis.html#cb86-18"></a><span class="co">## 16      LVA      23 22.17   23.0 19.95 24.05</span></span>
<span id="cb86-19"><a href="sensitivity-analysis.html#cb86-19"></a><span class="co">## 17      LTU      16 14.78   16.0 11.00 17.05</span></span>
<span id="cb86-20"><a href="sensitivity-analysis.html#cb86-20"></a><span class="co">## 18      LUX       8  8.82    9.0  6.00 12.00</span></span>
<span id="cb86-21"><a href="sensitivity-analysis.html#cb86-21"></a><span class="co">## 19      MLT      10 13.31   12.0  7.95 19.00</span></span>
<span id="cb86-22"><a href="sensitivity-analysis.html#cb86-22"></a><span class="co">## 20      NLD       2  3.10    3.0  2.00  4.00</span></span>
<span id="cb86-23"><a href="sensitivity-analysis.html#cb86-23"></a><span class="co">## 21      NOR       4  3.53    3.0  2.00  5.00</span></span>
<span id="cb86-24"><a href="sensitivity-analysis.html#cb86-24"></a><span class="co">## 22      POL      26 26.10   26.0 25.00 28.00</span></span>
<span id="cb86-25"><a href="sensitivity-analysis.html#cb86-25"></a><span class="co">## 23      PRT      27 23.20   26.0 15.00 27.00</span></span>
<span id="cb86-26"><a href="sensitivity-analysis.html#cb86-26"></a><span class="co">## 24      ROU      25 24.05   25.0 19.00 27.00</span></span>
<span id="cb86-27"><a href="sensitivity-analysis.html#cb86-27"></a><span class="co">## 25      SVK      24 23.57   24.0 22.00 26.00</span></span>
<span id="cb86-28"><a href="sensitivity-analysis.html#cb86-28"></a><span class="co">## 26      SVN      11  9.95   10.0  8.00 13.00</span></span>
<span id="cb86-29"><a href="sensitivity-analysis.html#cb86-29"></a><span class="co">## 27      ESP      19 22.43   22.0 18.00 26.00</span></span>
<span id="cb86-30"><a href="sensitivity-analysis.html#cb86-30"></a><span class="co">## 28      SWE       6  6.01    6.0  5.00  7.05</span></span>
<span id="cb86-31"><a href="sensitivity-analysis.html#cb86-31"></a><span class="co">## 29      CHE       1  1.00    1.0  1.00  1.00</span></span>
<span id="cb86-32"><a href="sensitivity-analysis.html#cb86-32"></a><span class="co">## 30      GBR      15 14.00   15.0 11.00 16.00</span></span>
<span id="cb86-33"><a href="sensitivity-analysis.html#cb86-33"></a><span class="co">## 31      AUS      35 35.65   35.0 34.00 38.05</span></span>
<span id="cb86-34"><a href="sensitivity-analysis.html#cb86-34"></a><span class="co">## 32      BGD      46 45.50   46.0 40.00 49.00</span></span>
<span id="cb86-35"><a href="sensitivity-analysis.html#cb86-35"></a><span class="co">## 33      BRN      40 38.98   38.0 35.00 45.00</span></span>
<span id="cb86-36"><a href="sensitivity-analysis.html#cb86-36"></a><span class="co">## 34      KHM      37 36.56   37.0 34.00 39.00</span></span>
<span id="cb86-37"><a href="sensitivity-analysis.html#cb86-37"></a><span class="co">## 35      CHN      49 49.48   50.0 47.00 51.00</span></span>
<span id="cb86-38"><a href="sensitivity-analysis.html#cb86-38"></a><span class="co">## 36      IND      45 45.29   46.0 41.95 48.00</span></span>
<span id="cb86-39"><a href="sensitivity-analysis.html#cb86-39"></a><span class="co">## 37      IDN      43 45.40   45.0 42.00 49.00</span></span>
<span id="cb86-40"><a href="sensitivity-analysis.html#cb86-40"></a><span class="co">## 38      JPN      34 33.44   34.0 31.00 35.00</span></span>
<span id="cb86-41"><a href="sensitivity-analysis.html#cb86-41"></a><span class="co">## 39      KAZ      47 45.39   45.0 41.95 49.00</span></span>
<span id="cb86-42"><a href="sensitivity-analysis.html#cb86-42"></a><span class="co">## 40      KOR      31 31.07   31.0 29.00 33.00</span></span>
<span id="cb86-43"><a href="sensitivity-analysis.html#cb86-43"></a><span class="co">## 41      LAO      48 42.59   41.5 36.00 49.00</span></span>
<span id="cb86-44"><a href="sensitivity-analysis.html#cb86-44"></a><span class="co">## 42      MYS      39 40.00   39.5 36.00 45.05</span></span>
<span id="cb86-45"><a href="sensitivity-analysis.html#cb86-45"></a><span class="co">## 43      MNG      44 45.30   46.0 39.95 49.00</span></span>
<span id="cb86-46"><a href="sensitivity-analysis.html#cb86-46"></a><span class="co">## 44      MMR      41 41.65   41.0 38.00 46.00</span></span>
<span id="cb86-47"><a href="sensitivity-analysis.html#cb86-47"></a><span class="co">## 45      NZL      33 32.97   33.0 31.00 35.00</span></span>
<span id="cb86-48"><a href="sensitivity-analysis.html#cb86-48"></a><span class="co">## 46      PAK      50 48.36   49.0 45.95 50.00</span></span>
<span id="cb86-49"><a href="sensitivity-analysis.html#cb86-49"></a><span class="co">## 47      PHL      38 40.92   41.0 38.00 44.00</span></span>
<span id="cb86-50"><a href="sensitivity-analysis.html#cb86-50"></a><span class="co">## 48      RUS      51 50.62   51.0 50.00 51.00</span></span>
<span id="cb86-51"><a href="sensitivity-analysis.html#cb86-51"></a><span class="co">## 49      SGP      14 13.90   14.0  9.95 19.00</span></span>
<span id="cb86-52"><a href="sensitivity-analysis.html#cb86-52"></a><span class="co">## 50      THA      42 41.70   42.0 39.00 44.00</span></span>
<span id="cb86-53"><a href="sensitivity-analysis.html#cb86-53"></a><span class="co">## 51      VNM      36 37.37   37.0 36.00 39.05</span></span></code></pre></div>
<p>It also includes the nominal ranks for comparison. Finally, <code>SAresults$Nominal</code> gives a summary of nominal ranks and scores.</p>
<p>If this information is not enough, the <code>store_results</code> argument to <code>sensitivity()</code> gives options of what information to store for each iteration. For example, <code>store_results = "results+method"</code> returns the information described so far, plus the full .$Method list of each replication (i.e. the full specifications used to build the composite indicator). Setting <code>store_results = "results+COIN"</code> stores all results and the complete COIN of each replication. Of course, this latter option in particular will take up more memory.</p>
</div>
<div id="running-a-sensitivity-analysis" class="section level3">
<h3><span class="header-section-number">14.3.4</span> Running a sensitivity analysis</h3>
<p>Running a sensitivity analysis, i.e. understanding the individual contributions of input uncertainties, is similar to an uncertainty analysis, but there are some extra considerations to keep in mind.</p>
<p>The first is that the target of the sensitivity analysis will be different. Whereas when you run an uncertainty analysis, you can calculate confidence intervals for each unit, with a sensitivity analysis a different approach is taken because otherwise, you would have a set of sensitivity indices for each single unit, and this would be hard to interpret. Instead, COINr calculates sensitivity with respect to the <em>average absolute rank change</em>, between nominal and perturbed values.</p>
<p>The second consideration is that the number of replications required to a sensitivity analysis is quite a bit higher than the number required for an uncertainty analysis. In fact, when you specify <code>N</code> in the <code>sensitivity()</code> function, and set to <code>SAtype = "SA"</code>, the actual number of replications is <span class="math inline">\(N_T = N(d +2)\)</span>, where <span class="math inline">\(d\)</span> is the number of uncertain input parameters/assumptions.</p>
<p>To run the sensitivity analysis, the format is very similar to the uncertainty analysis. We simply run <code>sensitivity()</code> with <code>SA_specs</code> in exactly the same format as previously (we can use the same list), and set <code>SA_type = "SA"</code>.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="sensitivity-analysis.html#cb87-1"></a><span class="co"># Not actually run here. If you run this, it will take a few minutes</span></span>
<span id="cb87-2"><a href="sensitivity-analysis.html#cb87-2"></a>SAresults &lt;-<span class="st"> </span><span class="kw">sensitivity</span>(ASEM, <span class="dt">v_targ =</span> <span class="st">&quot;Index&quot;</span>,</span>
<span id="cb87-3"><a href="sensitivity-analysis.html#cb87-3"></a>                         <span class="dt">SA_specs =</span> SAspecs,</span>
<span id="cb87-4"><a href="sensitivity-analysis.html#cb87-4"></a>                         <span class="dt">N =</span> <span class="dv">500</span>,</span>
<span id="cb87-5"><a href="sensitivity-analysis.html#cb87-5"></a>                         <span class="dt">SA_type =</span> <span class="st">&quot;SA&quot;</span>, <span class="dt">Nboot =</span> <span class="dv">1000</span>)</span></code></pre></div>
<p>The output of the sensitivity analysis is a list. This is in fact an extended version of the list when <code>SA_type = "UA"</code>, in that it has the recorded scores for each iteration, ranks for each iteration, as well as confidence intervals for ranks, and all the other outputs associated with <code>SA_type = "SA"</code>.</p>
<p>Additionally it outputs a data frame <code>.$Sensitivity</code>, which gives first and total order sensitivity indices for each input variable. Moreover, if <code>Nboot</code> is specified in <code>sensitivity()</code>, it provides estimated confidence intervals for each sensitivity index using bootstrapping.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="sensitivity-analysis.html#cb88-1"></a><span class="kw">roundDF</span>(SAresults<span class="op">$</span>Sensitivity)</span>
<span id="cb88-2"><a href="sensitivity-analysis.html#cb88-2"></a><span class="co">##   Variable   Si  STi Si_q5 Si_q95 STi_q5 STi_q95</span></span>
<span id="cb88-3"><a href="sensitivity-analysis.html#cb88-3"></a><span class="co">## 1   imtype 0.00 0.04 -0.04   0.05   0.03    0.04</span></span>
<span id="cb88-4"><a href="sensitivity-analysis.html#cb88-4"></a><span class="co">## 2    ntype 0.54 0.80  0.30   0.77   0.72    0.88</span></span>
<span id="cb88-5"><a href="sensitivity-analysis.html#cb88-5"></a><span class="co">## 3  weights 0.23 0.17  0.12   0.34   0.15    0.19</span></span></code></pre></div>
<p>Recall that the target output in the sensitivity analysis is the mean absolute rank change (let’s call it the MARC from here). How do we interpret these results? The first order sensitivity index <span class="math inline">\(S_i\)</span> can be interpreted as the uncertainty caused by the effect of the <span class="math inline">\(i\)</span>th uncertain parameter/assumption <em>on its own</em>. The total order sensitivity index is the uncertainty caused by the effect of the <span class="math inline">\(i\)</span>th uncertain parameter/assumption, <em>including its interactions with other inputs</em>.</p>
<p>To help understand this, we will use COINr’s plotting function for sensitivity analysis, <code>plotSA</code>.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="sensitivity-analysis.html#cb89-1"></a><span class="co"># plot bar chart</span></span>
<span id="cb89-2"><a href="sensitivity-analysis.html#cb89-2"></a><span class="kw">plotSA</span>(SAresults, <span class="dt">ptype =</span> <span class="st">&quot;bar&quot;</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/plotSAbar-1.png" width="768" /></p>
<p>This plot shows the three uncertainties that we introduced on the x-axis: the imputation type, the normalisation type, and the weights. The y-axis is the sensitivity index, and the total height of each bar is the total effect index <span class="math inline">\(S_{Ti}\)</span>, i.e. the uncertainty caused by the variable on its own (the <em>main effect</em>) as well as its interactions. Then each bar is divided into the interaction effects and the main effects.</p>
<p>What this shows is that the normalisation type is the most important uncertainty, followed by the weights, and last by the imputation type. In fact, the choice of imputation method (between the ones specified) is effectively insignificant. We can also see that the nomalisation has a significant interaction effect, probably with the imputation method. Whereas the weights don’t seem to interact with the other inputs.</p>
<p>Another way of looking at this is in a pie chart:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="sensitivity-analysis.html#cb90-1"></a><span class="co"># plot bar chart</span></span>
<span id="cb90-2"><a href="sensitivity-analysis.html#cb90-2"></a><span class="kw">plotSA</span>(SAresults, <span class="dt">ptype =</span> <span class="st">&quot;pie&quot;</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/plotSApie-1.png" width="768" /></p>
<p>Here we can see that more than half of the uncertainty is caused by the normalisation method choice alone, while a bit less than a quarter is caused by the weights, and the remainder by interactions.</p>
<p>It is likely that the normalisation method is important because one of the choices was rank normalisation, which radically alters the distribution of each indicator.</p>
<p>Finally, to see the uncertainty on the estimates of each sensitivity index we can use a box plot (or error bars):</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="sensitivity-analysis.html#cb91-1"></a><span class="co"># plot bar chart</span></span>
<span id="cb91-2"><a href="sensitivity-analysis.html#cb91-2"></a><span class="kw">plotSA</span>(SAresults, <span class="dt">ptype =</span> <span class="st">&quot;box&quot;</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/plotSAbox-1.png" width="768" /></p>
<p>This will not work unless <code>Nboot</code> was specified. Bootstrapping allows confidence intervals to be estimated, and this shows that the estimates of total effect indices (<span class="math inline">\(S_{Ti}\)</span>) are quite reliable. Whereas the confidence intervals are much wider on the first order indices (<span class="math inline">\(S_{i}\)</span>). Still, with the number of runs applied, it is possible to draw robust conclusions. If the confidence intervals were still too wide here, you could consider increasing <code>N</code> - this should lead to narrower intervals, although you might have to wait for a bit.</p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="2">
<li id="fn2"><p>This may give a more general hint that focusing on scores in composite indicators is usually not a good idea, because the scores can be extremely different depending on the methodology, while the ranks are much more stable<a href="sensitivity-analysis.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="adjustments-and-comparisons.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="helper-functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/09a-Sensitivity.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["COINr-documentation.pdf", "COINr-documentation.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
