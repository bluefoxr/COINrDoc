<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Initial visualisation and analysis | COINr: An R Package for Composite Indicator Development and Analysis</title>
  <meta name="description" content="COINr Documentation" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Initial visualisation and analysis | COINr: An R Package for Composite Indicator Development and Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="COINr Documentation" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Initial visualisation and analysis | COINr: An R Package for Composite Indicator Development and Analysis" />
  
  <meta name="twitter:description" content="COINr Documentation" />
  

<meta name="author" content="William Becker" />


<meta name="date" content="2021-02-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-input.html"/>
<link rel="next" href="imputation.html"/>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-16.12.0/react.min.js"></script>
<script src="libs/react-16.12.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="libs/reactable-binding-0.2.3/reactable.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">COINr Documentation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.1</b> Installation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#whats-it-for"><i class="fa fa-check"></i><b>1.2</b> What’s it for?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#quick-start-guide"><i class="fa fa-check"></i><b>1.3</b> Quick-start guide</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#how-to-use-coinr"><i class="fa fa-check"></i><b>2.1</b> How to use COINr</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="terminology.html"><a href="terminology.html"><i class="fa fa-check"></i><b>3</b> Terminology</a></li>
<li class="chapter" data-level="4" data-path="data-input.html"><a href="data-input.html"><i class="fa fa-check"></i><b>4</b> Data Input</a><ul>
<li class="chapter" data-level="4.1" data-path="data-input.html"><a href="data-input.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="data-input.html"><a href="data-input.html#the-three-inputs"><i class="fa fa-check"></i><b>4.2</b> The three inputs</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data-input.html"><a href="data-input.html#indicator-data"><i class="fa fa-check"></i><b>4.2.1</b> Indicator data</a></li>
<li class="chapter" data-level="4.2.2" data-path="data-input.html"><a href="data-input.html#indicator-metadata"><i class="fa fa-check"></i><b>4.2.2</b> Indicator metadata</a></li>
<li class="chapter" data-level="4.2.3" data-path="data-input.html"><a href="data-input.html#aggregation-metadata"><i class="fa fa-check"></i><b>4.2.3</b> Aggregation metadata</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data-input.html"><a href="data-input.html#putting-everything-together"><i class="fa fa-check"></i><b>4.3</b> Putting everything together</a></li>
<li class="chapter" data-level="4.4" data-path="data-input.html"><a href="data-input.html#moving-on"><i class="fa fa-check"></i><b>4.4</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html"><i class="fa fa-check"></i><b>5</b> Initial visualisation and analysis</a><ul>
<li class="chapter" data-level="5.1" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#structure"><i class="fa fa-check"></i><b>5.1</b> Structure</a></li>
<li class="chapter" data-level="5.2" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#distributions"><i class="fa fa-check"></i><b>5.2</b> Distributions</a></li>
<li class="chapter" data-level="5.3" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#ranks-and-maps"><i class="fa fa-check"></i><b>5.3</b> Ranks and Maps</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="imputation.html"><a href="imputation.html"><i class="fa fa-check"></i><b>6</b> Imputation</a><ul>
<li class="chapter" data-level="6.1" data-path="imputation.html"><a href="imputation.html#by-indicators"><i class="fa fa-check"></i><b>6.1</b> By indicators</a></li>
<li class="chapter" data-level="6.2" data-path="imputation.html"><a href="imputation.html#by-units"><i class="fa fa-check"></i><b>6.2</b> By units</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="denomination.html"><a href="denomination.html"><i class="fa fa-check"></i><b>7</b> Denomination</a><ul>
<li class="chapter" data-level="7.1" data-path="denomination.html"><a href="denomination.html#example-one"><i class="fa fa-check"></i><b>7.1</b> Example one</a></li>
<li class="chapter" data-level="7.2" data-path="denomination.html"><a href="denomination.html#example-two"><i class="fa fa-check"></i><b>7.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-treatment.html"><a href="data-treatment.html"><i class="fa fa-check"></i><b>8</b> Data Treatment</a><ul>
<li class="chapter" data-level="8.1" data-path="data-treatment.html"><a href="data-treatment.html#example-one-1"><i class="fa fa-check"></i><b>8.1</b> Example one</a></li>
<li class="chapter" data-level="8.2" data-path="data-treatment.html"><a href="data-treatment.html#example-two-1"><i class="fa fa-check"></i><b>8.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="normalisation.html"><a href="normalisation.html"><i class="fa fa-check"></i><b>9</b> Normalisation</a></li>
<li class="chapter" data-level="10" data-path="aggregation.html"><a href="aggregation.html"><i class="fa fa-check"></i><b>10</b> Aggregation</a></li>
<li class="chapter" data-level="11" data-path="weighting.html"><a href="weighting.html"><i class="fa fa-check"></i><b>11</b> Weighting</a><ul>
<li class="chapter" data-level="11.1" data-path="weighting.html"><a href="weighting.html#approaches-to-weighting"><i class="fa fa-check"></i><b>11.1</b> Approaches to weighting</a></li>
<li class="chapter" data-level="11.2" data-path="weighting.html"><a href="weighting.html#interactive-re-weighting-with-rew8r"><i class="fa fa-check"></i><b>11.2</b> Interactive re-weighting with ReW8R</a></li>
<li class="chapter" data-level="11.3" data-path="weighting.html"><a href="weighting.html#automatic-re-weighting"><i class="fa fa-check"></i><b>11.3</b> Automatic re-weighting</a></li>
<li class="chapter" data-level="11.4" data-path="weighting.html"><a href="weighting.html#manual-re-weighting"><i class="fa fa-check"></i><b>11.4</b> Manual re-weighting</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="helper-functions.html"><a href="helper-functions.html"><i class="fa fa-check"></i><b>12</b> Helper functions</a><ul>
<li class="chapter" data-level="12.1" data-path="helper-functions.html"><a href="helper-functions.html#getting-a-whole-data-set"><i class="fa fa-check"></i><b>12.1</b> Getting a whole data set</a></li>
<li class="chapter" data-level="12.2" data-path="helper-functions.html"><a href="helper-functions.html#getting-specific-indicators"><i class="fa fa-check"></i><b>12.2</b> Getting specific indicators</a></li>
<li class="chapter" data-level="12.3" data-path="helper-functions.html"><a href="helper-functions.html#getting-indicators-belonging-to-an-aggregation-group"><i class="fa fa-check"></i><b>12.3</b> Getting indicators belonging to an aggregation group</a></li>
<li class="chapter" data-level="12.4" data-path="helper-functions.html"><a href="helper-functions.html#getting-aggregate-group-data-at-targeted-level"><i class="fa fa-check"></i><b>12.4</b> Getting aggregate group data at targeted level</a></li>
<li class="chapter" data-level="12.5" data-path="helper-functions.html"><a href="helper-functions.html#use-with-data-frames"><i class="fa fa-check"></i><b>12.5</b> Use with data frames</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html"><i class="fa fa-check"></i><b>13</b> Appendix: R Resources</a><ul>
<li class="chapter" data-level="13.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#introduction-to-r"><i class="fa fa-check"></i><b>13.1</b> Introduction to R</a></li>
<li class="chapter" data-level="13.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#advanced-resources"><i class="fa fa-check"></i><b>13.2</b> Advanced resources</a><ul>
<li class="chapter" data-level="13.2.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#programming"><i class="fa fa-check"></i><b>13.2.1</b> Programming</a></li>
<li class="chapter" data-level="13.2.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#visualisation"><i class="fa fa-check"></i><b>13.2.2</b> Visualisation</a></li>
<li class="chapter" data-level="13.2.3" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#other"><i class="fa fa-check"></i><b>13.2.3</b> Other</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>14</b> Acknowledgements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">COINr: An R Package for Composite Indicator Development and Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="initial-visualisation-and-analysis" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Initial visualisation and analysis</h1>
<p>One of the first things to do with indicator data is to look at it, in as many ways as possible. This helps to get a feel for how the data is distributed between units/countries, how it may be spatially distibuted, and how indicators relate to one another. COINr includes various tools for visualising and analysing indicator data and the index structure.</p>
<p>The types of plots generated by COINr fall into two categories: static plots, and interactive plots. static plots generate images in standard formats such as png, pdf and so on. Interactive plots generate javascript graphics, which have interactive elements such as zooming and panning, and information when you hover the mouse over. These latter type of plots are particularly useful for including in HTML documents, because they are self contained. For example, they can be used in R Markdown documents, then knitted to HTML, or embedded on websites (such as this one - see below), e.g. via the blogdown or bookdown packages. Javascript plots can also be rendered to png and other formats, so can also be used in static documents.</p>
<p>The plotting tools here can be useful at any stage of building a composite indicator or scoreboard, from initial visualisation of the data, to checking the effects of data treatment, to visualising final index results.</p>
<div id="structure" class="section level2">
<h2><span class="header-section-number">5.1</span> Structure</h2>
<p>Independently from the indicator data, a good way to begin is to check the structure of the index. This can be done visually with the <code>plotframework()</code> function, which generates a sunburst plot of the index structure.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="initial-visualisation-and-analysis.html#cb12-1"></a><span class="kw">plotframework</span>(ASEM)</span></code></pre></div>
<div id="htmlwidget-32f0366632ec1a9edcef" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-32f0366632ec1a9edcef">{"x":{"visdat":{"f5017e12c3b":["function () ","plotlyVisDat"]},"cur_data":"f5017e12c3b","attrs":{"f5017e12c3b":{"labels":["LPI","Flights","Ship","Bord","Elec","Gas","ConSpeed","Cov4G","Goods","Services","FDI","PRemit","ForPort","Embs","IGOs","UNVote","CostImpEx","Tariff","TBTs","TIRcon","RTAs","Visa","StMob","Research","Pat","CultServ","CultGood","Tourist","MigStock","Lang","Renew","PrimEner","CO2","MatCon","Forest","Poverty","Palma","TertGrad","FreePress","TolMin","NGOs","CPI","FemLab","WomParl","PubDebt","PrivDebt","GDPGrow","RDExp","NEET","Physical","ConEcFin","Political","Instit","P2P","Environ","Social","SusEcFin","Conn","Sust","Index"],"parents":["Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","ConEcFin","ConEcFin","ConEcFin","ConEcFin","ConEcFin","Political","Political","Political","Instit","Instit","Instit","Instit","Instit","Instit","P2P","P2P","P2P","P2P","P2P","P2P","P2P","P2P","Environ","Environ","Environ","Environ","Environ","Social","Social","Social","Social","Social","Social","Social","Social","Social","SusEcFin","SusEcFin","SusEcFin","SusEcFin","SusEcFin","Conn","Conn","Conn","Conn","Conn","Sust","Sust","Sust","Index","Index",""],"values":[0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.02,0.02,0.02,0.02,0.02,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0166666666666667,0.0166666666666667,0.0166666666666667,0.0166666666666667,0.0166666666666667,0.0166666666666667,0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.1,0.1,0.1,0.1,0.1,0.166666666666667,0.166666666666667,0.166666666666667,0.5,0.5,1],"branchvalues":"total","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sunburst"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"labels":["LPI","Flights","Ship","Bord","Elec","Gas","ConSpeed","Cov4G","Goods","Services","FDI","PRemit","ForPort","Embs","IGOs","UNVote","CostImpEx","Tariff","TBTs","TIRcon","RTAs","Visa","StMob","Research","Pat","CultServ","CultGood","Tourist","MigStock","Lang","Renew","PrimEner","CO2","MatCon","Forest","Poverty","Palma","TertGrad","FreePress","TolMin","NGOs","CPI","FemLab","WomParl","PubDebt","PrivDebt","GDPGrow","RDExp","NEET","Physical","ConEcFin","Political","Instit","P2P","Environ","Social","SusEcFin","Conn","Sust","Index"],"parents":["Physical","Physical","Physical","Physical","Physical","Physical","Physical","Physical","ConEcFin","ConEcFin","ConEcFin","ConEcFin","ConEcFin","Political","Political","Political","Instit","Instit","Instit","Instit","Instit","Instit","P2P","P2P","P2P","P2P","P2P","P2P","P2P","P2P","Environ","Environ","Environ","Environ","Environ","Social","Social","Social","Social","Social","Social","Social","Social","Social","SusEcFin","SusEcFin","SusEcFin","SusEcFin","SusEcFin","Conn","Conn","Conn","Conn","Conn","Sust","Sust","Sust","Index","Index",""],"values":[0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.02,0.02,0.02,0.02,0.02,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0166666666666667,0.0166666666666667,0.0166666666666667,0.0166666666666667,0.0166666666666667,0.0166666666666667,0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.0125,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0185185185185185,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.0333333333333333,0.1,0.1,0.1,0.1,0.1,0.166666666666667,0.166666666666667,0.166666666666667,0.5,0.5,1],"branchvalues":"total","type":"sunburst","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The sunburst plot is useful for a few things. First, it shows the structure that COINr has understood. If you get an error here, it is probably an indication that something has gone wrong in the input of the structure, so go back to the input data and check. If it does successfully display the sunburst plot, you can check whether the structure agrees with your expectations.</p>
<p>Second, it shows the effective weight of each indicator (the value is visible by hovering over each segment). This can reveal which indicators are implicitly weighted more than others, by e.g. having more or less indicators in the same aggregation groups.</p>
<p>Finally, it can be a good way to communicate your index structure to other people.</p>
</div>
<div id="distributions" class="section level2">
<h2><span class="header-section-number">5.2</span> Distributions</h2>
<p>Individual indicator distributions can be visualised in several different ways. For static plots, the main tool is <code>plotIndDist()</code> which generates histograms, boxplots, violin plots, dot plots and violin-dot plots. This is powered by <code>ggplot2</code>, and if you want to customise plots, you should use that directly. However, COINr plotting functions are intended as quick tools to visualise data, with easy access to the hierarchical data set. You can plot individual indicators:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="initial-visualisation-and-analysis.html#cb13-1"></a><span class="kw">plotIndDist</span>(ASEM, <span class="dt">type =</span> <span class="st">&quot;Histogram&quot;</span>, <span class="dt">inames =</span> <span class="st">&quot;LPI&quot;</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>And you can also plot groups of indicators by calling aggregate names (notice that when multiple indicators are plotted, the indicator codes are used to label each plot, rather than indicator names, to save space):</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="initial-visualisation-and-analysis.html#cb14-1"></a><span class="kw">plotIndDist</span>(ASEM, <span class="dt">type =</span> <span class="st">&quot;Violindot&quot;</span>, <span class="dt">inames =</span> <span class="st">&quot;Physical&quot;</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>The <code>plotIndDist()</code> function has several arguments. In the first place, any indicator or aggregation (pillar, dimension, index etc) can be plotted by using the <code>dset</code> argument. If you have only just assembled the COIN Object, you will only have the “Raw” dataset, but any other dataset can be accessed, e.g. treated data set, aggregated data set, and so on. You can also target different levels using the <code>aglev</code> argument - for more details see the chapter on <a href="helper-functions.html#helper-functions">Helper functions</a>.</p>
<p>Stand-alone data frames are also supported by <code>plotIndDist()</code> (this can also be achieved directly by <code>ggplot</code> without too much effort):</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="initial-visualisation-and-analysis.html#cb15-1"></a>df &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">90</span>),<span class="dt">nrow =</span> <span class="dv">30</span>, <span class="dt">ncol =</span> <span class="dv">3</span>))</span>
<span id="cb15-2"><a href="initial-visualisation-and-analysis.html#cb15-2"></a><span class="kw">colnames</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Dogs&quot;</span>, <span class="st">&quot;Cats&quot;</span>, <span class="st">&quot;Rabbits&quot;</span>)</span>
<span id="cb15-3"><a href="initial-visualisation-and-analysis.html#cb15-3"></a><span class="kw">plotIndDist</span>(df, <span class="dt">type =</span> <span class="st">&quot;Box&quot;</span>)</span></code></pre></div>
<p><img src="COINr-documentation_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>COINr also includes some interactive plots, which are embedded into apps (see later), but can be used for your own purposes, such as embedding in HTML documents or websites.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="initial-visualisation-and-analysis.html#cb16-1"></a><span class="kw">iplotIndDist</span>(ASEM, <span class="st">&quot;Raw&quot;</span>, <span class="st">&quot;Renew&quot;</span>, <span class="dt">ptype =</span> <span class="st">&quot;Violin&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-35abdd396d7bade5a58d" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-35abdd396d7bade5a58d">{"x":{"visdat":{"f50183b407e":["function () ","plotlyVisDat"]},"cur_data":"f50183b407e","attrs":{"f50183b407e":{"y":{},"box":{"visible":true},"meanline":{"visible":true},"x0":"Renewable energy in total final energy consumption","points":"all","pointpos":-1.5,"jitter":0.1,"hoveron":"points+kde","marker":{"line":{"width":2,"color":"#8dd3c7"},"symbol":"line-ew"},"color":["#8dd3c7"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"violin"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"yaxis":{"domain":[0,1],"automargin":true,"title":"Percent","zeroline":false,"range":[]},"xaxis":{"domain":[0,1],"automargin":true},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"fillcolor":"rgba(141,211,199,0.5)","y":[34.39499175,9.201640531,17.65007793,33.12746664,9.942066016,14.82856195,33.17027717,27.47683347,43.23526259,13.49926232,14.2062527,17.17004755,15.55936205,9.081399013,16.51685058,38.09801717,28.96117925,9.031313661,5.355004746,5.889463079,57.7720016,11.91148821,27.15729839,23.69779403,13.40916822,20.87739614,16.25409774,53.2477698,25.29198368,8.711685574,9.18050296,34.74706901,0.014935036,64.92377591,12.41335257,36.02122257,36.8793481,6.297357081,1.558442912,2.707702804,59.31586075,5.194442589,3.42973729,61.52781165,30.78917555,46.47632492,27.45154445,3.304228351,0.708635297,22.86307013,34.99856984],"box":{"visible":true},"meanline":{"visible":true},"x0":"Renewable energy in total final energy consumption","points":"all","pointpos":-1.5,"jitter":0.1,"hoveron":"points+kde","marker":{"color":"rgba(141,211,199,1)","line":{"color":"#8dd3c7","width":2},"symbol":"line-ew"},"type":"violin","line":{"color":"rgba(141,211,199,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Since all the plotting functions output plot objects (plotly objects for <code>iplotIndDist</code>, and ggplot2 plot objects for <code>plotIndDist</code>), you can also modify them if you want to customise the plots. This might be a helpful workflow - to use COINr’s default options and then tweak the plot to your liking. In a very simple example, here we just change the title.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="initial-visualisation-and-analysis.html#cb17-1"></a><span class="kw">iplotIndDist</span>(ASEM, <span class="st">&quot;Raw&quot;</span>, <span class="st">&quot;Flights&quot;</span>, <span class="dt">ptype =</span> <span class="st">&quot;Histogram&quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb17-2"><a href="initial-visualisation-and-analysis.html#cb17-2"></a><span class="st">  </span>plotly<span class="op">::</span><span class="kw">layout</span>(<span class="dt">title =</span> <span class="st">&quot;Customised plot&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-5b3519605e387ed6c4e2" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-5b3519605e387ed6c4e2">{"x":{"visdat":{"f5050181e2f":["function () ","plotlyVisDat"]},"cur_data":"f5050181e2f","attrs":{"f5050181e2f":{"x":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"histogram"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"bargap":0.1,"xaxis":{"domain":[0,1],"automargin":true,"title":"Thousand seats","range":[]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Count"},"title":"Customised plot","hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[29.01725,31.88546,9.23588,9.24529,8.75467,15.30953,32.7705,3.12946,18.85806,97.63489,174.3588,34.83849,13.01196,34.17721,110.2755,6.77976,5.37919,4.84458,6.75251,63.59241,25.64994,33.79735,40.46484,18.79894,2.07397,1.51736,170.9628,31.74444,51.78846,210.8244,36.05498,4.27955,2.019,9.5212,114.2008,25.2643,34.6802,69.00941,4.02303,69.84827,3.0744,53.33988,0.98951,6.695,13.37242,2.21146,19.43838,34.06447,67.86156,73.92221,28.52418],"type":"histogram","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>If you are purely interested in exploring the data, rather than presenting it to someone else, the plots here are also embedded into a Shiny app which lets you quickly explore and compare indicator distributions - see <a href="data-treatment.html#data-treatment">Data Treatment</a> for more details on this.</p>
</div>
<div id="ranks-and-maps" class="section level2">
<h2><span class="header-section-number">5.3</span> Ranks and Maps</h2>
<p>While the previous functions concerned plotting the statistical distributions of each indicator, functions are also available for plotting the indicator values in order or on a map.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="initial-visualisation-and-analysis.html#cb18-1"></a><span class="kw">iplotBar</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="dt">isel =</span> <span class="st">&quot;Embs&quot;</span>, <span class="dt">usel =</span> <span class="st">&quot;SGP&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-604ab8a183168f1ab5e2" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-604ab8a183168f1ab5e2">{"x":{"visdat":{"f5082d6539":["function () ","plotlyVisDat"]},"cur_data":"f5082d6539","attrs":{"f5082d6539":{"x":{},"y":{},"key":{},"marker":{"color":["#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#ffa600","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d"]},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":{"text":"Embassies network","y":0.95},"yaxis":{"domain":[0,1],"automargin":true,"title":"Number"},"xaxis":{"domain":[0,1],"automargin":true,"title":"","categoryorder":"array","categoryarray":[100,100,100,100,99,95,95,93,89,89,88,87,86,84,84,83,83,82,82,80,79,78,78,78,77,75,74,74,74,72,72,67,66,62,62,62,58,52,52,50,48,46,44,43,43,42,41,41,40,37,28],"type":"category"},"hovermode":"closest","showlegend":false},"source":"barclick","config":{"showSendToCloud":false},"data":[{"x":["FRA","DEU","GBR","CHN","RUS","IND","JPN","ITA","NLD","ESP","AUT","POL","KOR","BEL","CZE","GRC","IDN","CHE","AUS","VNM","HUN","NOR","SWE","THA","DNK","ROU","FIN","IRL","MYS","PRT","PAK","BGR","PHL","HRV","SVK","KAZ","SGP","BGD","MMR","LTU","LVA","EST","NZL","CYP","SVN","KHM","BRN","LAO","MNG","LUX","MLT"],"y":[100,100,100,100,99,95,95,93,89,89,88,87,86,84,84,83,83,82,82,80,79,78,78,78,77,75,74,74,74,72,72,67,66,62,62,62,58,52,52,50,48,46,44,43,43,42,41,41,40,37,28],"key":["FRA","DEU","GBR","CHN","RUS","IND","JPN","ITA","NLD","ESP","AUT","POL","KOR","BEL","CZE","GRC","IDN","CHE","AUS","VNM","HUN","NOR","SWE","THA","DNK","ROU","FIN","IRL","MYS","PRT","PAK","BGR","PHL","HRV","SVK","KAZ","SGP","BGD","MMR","LTU","LVA","EST","NZL","CYP","SVN","KHM","BRN","LAO","MNG","LUX","MLT"],"marker":{"color":["#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#ffa600","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d","#58508d"],"line":{"color":"rgba(31,119,180,1)"}},"type":"bar","error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","_isNestedKey":false,"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Here, a single indicator is plotted in order as a bar chart. There is an optional argument to highlight one or more units, using the <code>usel</code> argument.</p>
<p>From a different perspective, we can plot the same data on a map:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="initial-visualisation-and-analysis.html#cb19-1"></a><span class="kw">iplotMap</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="dt">isel =</span> <span class="st">&quot;Embs&quot;</span>)</span></code></pre></div>
<div id="htmlwidget-e87ad45897c77f50a3b3" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-e87ad45897c77f50a3b3">{"x":{"visdat":{"f505c746db7":["function () ","plotlyVisDat"]},"cur_data":"f505c746db7","attrs":{"f505c746db7":{"z":{},"locations":["AUT","BEL","BGR","HRV","CYP","CZE","DNK","EST","FIN","FRA","DEU","GRC","HUN","IRL","ITA","LVA","LTU","LUX","MLT","NLD","NOR","POL","PRT","ROU","SVK","SVN","ESP","SWE","CHE","GBR","AUS","BGD","BRN","KHM","CHN","IND","IDN","JPN","KAZ","KOR","LAO","MYS","MNG","MMR","NZL","PAK","PHL","RUS","SGP","THA","VNM"],"text":{},"colorscale":"Greens","key":["AUT","BEL","BGR","HRV","CYP","CZE","DNK","EST","FIN","FRA","DEU","GRC","HUN","IRL","ITA","LVA","LTU","LUX","MLT","NLD","NOR","POL","PRT","ROU","SVK","SVN","ESP","SWE","CHE","GBR","AUS","BGD","BRN","KHM","CHN","IND","IDN","JPN","KAZ","KOR","LAO","MYS","MNG","MMR","NZL","PAK","PHL","RUS","SGP","THA","VNM"],"showscale":true,"reversescale":true,"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"choropleth"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"zaxis":{"title":"get(isel)"}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5},"title":"Embassies network","geo":{"showframe":false,"showcoastlines":true,"projection":{"type":"Mercator"},"showcountries":false,"bgcolor":"rgba(255,255,255,0)","showframe.1":false,"showland":true,"landcolor":"rgba(229,229,229,1)","countrycolor":"rgba(255,255,255,1)","coastlinecolor":"rgba(255,255,255,1)"}},"source":"mapclick","config":{"showSendToCloud":false},"data":[{"colorbar":{"title":"Embs","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":"Greens","showscale":true,"z":[88,84,67,62,43,84,77,46,74,100,100,83,79,74,93,48,50,37,28,89,78,87,72,75,62,43,89,78,82,100,82,52,41,42,100,95,83,95,62,86,41,74,40,52,44,72,66,99,58,78,80],"locations":["AUT","BEL","BGR","HRV","CYP","CZE","DNK","EST","FIN","FRA","DEU","GRC","HUN","IRL","ITA","LVA","LTU","LUX","MLT","NLD","NOR","POL","PRT","ROU","SVK","SVN","ESP","SWE","CHE","GBR","AUS","BGD","BRN","KHM","CHN","IND","IDN","JPN","KAZ","KOR","LAO","MYS","MNG","MMR","NZL","PAK","PHL","RUS","SGP","THA","VNM"],"text":["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czech Republic","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Norway","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden","Switzerland","United Kingdom","Australia","Bangladesh","Brunei Darussalam","Cambodia","China","India","Indonesia","Japan","Kazakhstan","Korea","Lao PDR","Malaysia","Mongolia","Myanmar","New Zealand","Pakistan","Philippines","Russian Federation","Singapore","Thailand","Vietnam"],"key":["AUT","BEL","BGR","HRV","CYP","CZE","DNK","EST","FIN","FRA","DEU","GRC","HUN","IRL","ITA","LVA","LTU","LUX","MLT","NLD","NOR","POL","PRT","ROU","SVK","SVN","ESP","SWE","CHE","GBR","AUS","BGD","BRN","KHM","CHN","IND","IDN","JPN","KAZ","KOR","LAO","MYS","MNG","MMR","NZL","PAK","PHL","RUS","SGP","THA","VNM"],"reversescale":true,"type":"choropleth","marker":{"line":{"color":"rgba(31,119,180,1)"}},"_isNestedKey":false,"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Note that this only works if <code>IndData$UnitCode</code> correspond to ISO alpha-3 country codes. If you want to do some more sophisticated mapping R, Plotly has <a href="https://plotly.com/r/maps/">many mapping options</a>, but R in general has all kinds of mapping packages, you just have to search for them. COINr uses Plotly maps to keep things simple and to not depend on too many packages.</p>
<p>COINr has yet more tools to plot data, but let’s leave it at that for the moment. Other tools will be introduced in other chapters.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-input.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="imputation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02a-indvisualisation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["COINr-documentation.pdf", "COINr-documentation.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
