<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 13 Adjustments and comparisons | Composite Indicator Development and Analysis in R with COINr</title>
  <meta name="description" content="Composite indicators with COINr" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 13 Adjustments and comparisons | Composite Indicator Development and Analysis in R with COINr" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://bluefoxr.github.io/COINrDoc/" />
  
  <meta property="og:description" content="Composite indicators with COINr" />
  <meta name="github-repo" content="bluefoxr/COINrDoc" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 13 Adjustments and comparisons | Composite Indicator Development and Analysis in R with COINr" />
  
  <meta name="twitter:description" content="Composite indicators with COINr" />
  

<meta name="author" content="William Becker" />


<meta name="date" content="2021-10-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="visualising-results.html"/>
<link rel="next" href="sensitivity-analysis.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-16.12.0/react.min.js"></script>
<script src="libs/react-16.12.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="libs/reactable-binding-0.2.3/reactable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">COINr Documentation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#what-does-it-do"><i class="fa fa-check"></i><b>1.3</b> What does it do?</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#how-to-use-this-manual"><i class="fa fa-check"></i><b>1.4</b> How to use this manual</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#demo"><i class="fa fa-check"></i><b>1.5</b> Demo</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="foundations.html"><a href="foundations.html"><i class="fa fa-check"></i><b>2</b> Foundations</a>
<ul>
<li class="chapter" data-level="2.1" data-path="foundations.html"><a href="foundations.html#terminology"><i class="fa fa-check"></i><b>2.1</b> Terminology</a></li>
<li class="chapter" data-level="2.2" data-path="foundations.html"><a href="foundations.html#coinr-syntax"><i class="fa fa-check"></i><b>2.2</b> COINr syntax</a></li>
<li class="chapter" data-level="2.3" data-path="foundations.html"><a href="foundations.html#a-map-of-coinr"><i class="fa fa-check"></i><b>2.3</b> A map of COINr</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="foundations.html"><a href="foundations.html#construction"><i class="fa fa-check"></i><b>2.3.1</b> Construction</a></li>
<li class="chapter" data-level="2.3.2" data-path="foundations.html"><a href="foundations.html#visualisation-and-presenting"><i class="fa fa-check"></i><b>2.3.2</b> Visualisation and presenting</a></li>
<li class="chapter" data-level="2.3.3" data-path="foundations.html"><a href="foundations.html#adjustment-and-comparison"><i class="fa fa-check"></i><b>2.3.3</b> Adjustment and comparison</a></li>
<li class="chapter" data-level="2.3.4" data-path="foundations.html"><a href="foundations.html#analysis"><i class="fa fa-check"></i><b>2.3.4</b> Analysis</a></li>
<li class="chapter" data-level="2.3.5" data-path="foundations.html"><a href="foundations.html#interactive-apps"><i class="fa fa-check"></i><b>2.3.5</b> Interactive apps</a></li>
<li class="chapter" data-level="2.3.6" data-path="foundations.html"><a href="foundations.html#importexport"><i class="fa fa-check"></i><b>2.3.6</b> Import/export</a></li>
<li class="chapter" data-level="2.3.7" data-path="foundations.html"><a href="foundations.html#other-functions"><i class="fa fa-check"></i><b>2.3.7</b> Other functions</a></li>
<li class="chapter" data-level="2.3.8" data-path="foundations.html"><a href="foundations.html#data"><i class="fa fa-check"></i><b>2.3.8</b> Data</a></li>
<li class="chapter" data-level="2.3.9" data-path="foundations.html"><a href="foundations.html#finally"><i class="fa fa-check"></i><b>2.3.9</b> Finally</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="foundations.html"><a href="foundations.html#tips-for-using-coinr"><i class="fa fa-check"></i><b>2.4</b> Tips for using COINr</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="foundations.html"><a href="foundations.html#use-scripts-and-r-markdown"><i class="fa fa-check"></i><b>2.4.1</b> Use scripts and R Markdown</a></li>
<li class="chapter" data-level="2.4.2" data-path="foundations.html"><a href="foundations.html#missing-data"><i class="fa fa-check"></i><b>2.4.2</b> Missing data</a></li>
<li class="chapter" data-level="2.4.3" data-path="foundations.html"><a href="foundations.html#plotting"><i class="fa fa-check"></i><b>2.4.3</b> Plotting</a></li>
<li class="chapter" data-level="2.4.4" data-path="foundations.html"><a href="foundations.html#panel-data-and-multiple-coins"><i class="fa fa-check"></i><b>2.4.4</b> Panel data and multiple COINs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html"><i class="fa fa-check"></i><b>3</b> COINs: the currency of COINr</a>
<ul>
<li class="chapter" data-level="3.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#inside-a-coin"><i class="fa fa-check"></i><b>3.1</b> Inside a COIN</a></li>
<li class="chapter" data-level="3.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#the-three-inputs"><i class="fa fa-check"></i><b>3.2</b> The three inputs</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-data"><i class="fa fa-check"></i><b>3.2.1</b> Indicator data</a></li>
<li class="chapter" data-level="3.2.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-metadata"><i class="fa fa-check"></i><b>3.2.2</b> Indicator metadata</a></li>
<li class="chapter" data-level="3.2.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#aggregation-metadata"><i class="fa fa-check"></i><b>3.2.3</b> Aggregation metadata</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#putting-everything-together"><i class="fa fa-check"></i><b>3.3</b> Putting everything together</a></li>
<li class="chapter" data-level="3.4" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#moving-on"><i class="fa fa-check"></i><b>3.4</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html"><i class="fa fa-check"></i><b>4</b> Initial visualisation and analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#structure"><i class="fa fa-check"></i><b>4.1</b> Structure</a></li>
<li class="chapter" data-level="4.2" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#distributions"><i class="fa fa-check"></i><b>4.2</b> Distributions</a></li>
<li class="chapter" data-level="4.3" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#ranks-and-maps"><i class="fa fa-check"></i><b>4.3</b> Ranks and Maps</a></li>
<li class="chapter" data-level="4.4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#statistics-and-analysis"><i class="fa fa-check"></i><b>4.4</b> Statistics and analysis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html"><i class="fa fa-check"></i><b>5</b> Multivariate analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#correlations"><i class="fa fa-check"></i><b>5.1</b> Correlations</a></li>
<li class="chapter" data-level="5.2" data-path="multivariate-analysis.html"><a href="multivariate-analysis.html#pca"><i class="fa fa-check"></i><b>5.2</b> PCA</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html"><i class="fa fa-check"></i><b>6</b> Missing data and Imputation</a>
<ul>
<li class="chapter" data-level="6.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#concept"><i class="fa fa-check"></i><b>6.1</b> Concept</a></li>
<li class="chapter" data-level="6.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#data-checks-and-screening"><i class="fa fa-check"></i><b>6.2</b> Data checks and screening</a></li>
<li class="chapter" data-level="6.3" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#imputation-in-coinr"><i class="fa fa-check"></i><b>6.3</b> Imputation in COINr</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-column"><i class="fa fa-check"></i><b>6.3.1</b> By column</a></li>
<li class="chapter" data-level="6.3.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-row"><i class="fa fa-check"></i><b>6.3.2</b> By row</a></li>
<li class="chapter" data-level="6.3.3" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#by-column-and-row"><i class="fa fa-check"></i><b>6.3.3</b> By column and row</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="denomination.html"><a href="denomination.html"><i class="fa fa-check"></i><b>7</b> Denomination</a>
<ul>
<li class="chapter" data-level="7.1" data-path="denomination.html"><a href="denomination.html#concept-1"><i class="fa fa-check"></i><b>7.1</b> Concept</a></li>
<li class="chapter" data-level="7.2" data-path="denomination.html"><a href="denomination.html#denominating-in-coinr"><i class="fa fa-check"></i><b>7.2</b> Denominating in COINr</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="denomination.html"><a href="denomination.html#on-coins"><i class="fa fa-check"></i><b>7.2.1</b> On COINs</a></li>
<li class="chapter" data-level="7.2.2" data-path="denomination.html"><a href="denomination.html#on-data-frames"><i class="fa fa-check"></i><b>7.2.2</b> On data frames</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="denomination.html"><a href="denomination.html#when-to-denominate-and-by-what"><i class="fa fa-check"></i><b>7.3</b> When to denominate, and by what?</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-treatment.html"><a href="data-treatment.html"><i class="fa fa-check"></i><b>8</b> Data Treatment</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-treatment.html"><a href="data-treatment.html#why-treat-data"><i class="fa fa-check"></i><b>8.1</b> Why treat data?</a></li>
<li class="chapter" data-level="8.2" data-path="data-treatment.html"><a href="data-treatment.html#how-to-treat-data"><i class="fa fa-check"></i><b>8.2</b> How to treat data</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="data-treatment.html"><a href="data-treatment.html#winsorisation"><i class="fa fa-check"></i><b>8.2.1</b> Winsorisation</a></li>
<li class="chapter" data-level="8.2.2" data-path="data-treatment.html"><a href="data-treatment.html#transformation"><i class="fa fa-check"></i><b>8.2.2</b> Transformation</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="data-treatment.html"><a href="data-treatment.html#data-treatment-in-coinr"><i class="fa fa-check"></i><b>8.3</b> Data treatment in COINr</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-treatment.html"><a href="data-treatment.html#global-treatment"><i class="fa fa-check"></i><b>8.3.1</b> Global treatment</a></li>
<li class="chapter" data-level="8.3.2" data-path="data-treatment.html"><a href="data-treatment.html#individual-treatment"><i class="fa fa-check"></i><b>8.3.2</b> Individual treatment</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-treatment.html"><a href="data-treatment.html#interactive-visualisation"><i class="fa fa-check"></i><b>8.4</b> Interactive visualisation</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="normalisation.html"><a href="normalisation.html"><i class="fa fa-check"></i><b>9</b> Normalisation</a>
<ul>
<li class="chapter" data-level="9.1" data-path="normalisation.html"><a href="normalisation.html#approaches"><i class="fa fa-check"></i><b>9.1</b> Approaches</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="normalisation.html"><a href="normalisation.html#first-adjust-direction"><i class="fa fa-check"></i><b>9.1.1</b> First: adjust direction</a></li>
<li class="chapter" data-level="9.1.2" data-path="normalisation.html"><a href="normalisation.html#linear-transformations"><i class="fa fa-check"></i><b>9.1.2</b> Linear transformations</a></li>
<li class="chapter" data-level="9.1.3" data-path="normalisation.html"><a href="normalisation.html#nonlinear-transformations"><i class="fa fa-check"></i><b>9.1.3</b> Nonlinear transformations</a></li>
<li class="chapter" data-level="9.1.4" data-path="normalisation.html"><a href="normalisation.html#distances"><i class="fa fa-check"></i><b>9.1.4</b> Distances</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="normalisation.html"><a href="normalisation.html#normalisation-in-coinr"><i class="fa fa-check"></i><b>9.2</b> Normalisation in COINr</a></li>
<li class="chapter" data-level="9.3" data-path="normalisation.html"><a href="normalisation.html#individual-normalisation"><i class="fa fa-check"></i><b>9.3</b> Individual normalisation</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="aggregation.html"><a href="aggregation.html"><i class="fa fa-check"></i><b>10</b> Aggregation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="aggregation.html"><a href="aggregation.html#weighting"><i class="fa fa-check"></i><b>10.1</b> Weighting</a></li>
<li class="chapter" data-level="10.2" data-path="aggregation.html"><a href="aggregation.html#approaches-1"><i class="fa fa-check"></i><b>10.2</b> Approaches</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="aggregation.html"><a href="aggregation.html#means"><i class="fa fa-check"></i><b>10.2.1</b> Means</a></li>
<li class="chapter" data-level="10.2.2" data-path="aggregation.html"><a href="aggregation.html#other-methods"><i class="fa fa-check"></i><b>10.2.2</b> Other methods</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="aggregation.html"><a href="aggregation.html#aggregation-in-coinr"><i class="fa fa-check"></i><b>10.3</b> Aggregation in COINr</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="weighting-1.html"><a href="weighting-1.html"><i class="fa fa-check"></i><b>11</b> Weighting</a>
<ul>
<li class="chapter" data-level="11.1" data-path="weighting-1.html"><a href="weighting-1.html#approaches-to-weighting"><i class="fa fa-check"></i><b>11.1</b> Approaches to weighting</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="weighting-1.html"><a href="weighting-1.html#equal-weighting"><i class="fa fa-check"></i><b>11.1.1</b> Equal weighting</a></li>
<li class="chapter" data-level="11.1.2" data-path="weighting-1.html"><a href="weighting-1.html#budget-allocation"><i class="fa fa-check"></i><b>11.1.2</b> Budget allocation</a></li>
<li class="chapter" data-level="11.1.3" data-path="weighting-1.html"><a href="weighting-1.html#principle-component-analysis"><i class="fa fa-check"></i><b>11.1.3</b> Principle component analysis</a></li>
<li class="chapter" data-level="11.1.4" data-path="weighting-1.html"><a href="weighting-1.html#weight-optimisation"><i class="fa fa-check"></i><b>11.1.4</b> Weight optimisation</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="weighting-1.html"><a href="weighting-1.html#weighting-tools-in-coinr"><i class="fa fa-check"></i><b>11.2</b> Weighting tools in COINr</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="weighting-1.html"><a href="weighting-1.html#manual-weighting"><i class="fa fa-check"></i><b>11.2.1</b> Manual weighting</a></li>
<li class="chapter" data-level="11.2.2" data-path="weighting-1.html"><a href="weighting-1.html#interactive-re-weighting-with-rew8r"><i class="fa fa-check"></i><b>11.2.2</b> Interactive re-weighting with ReW8R</a></li>
<li class="chapter" data-level="11.2.3" data-path="weighting-1.html"><a href="weighting-1.html#automatic-re-weighting"><i class="fa fa-check"></i><b>11.2.3</b> Automatic re-weighting</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="weighting-1.html"><a href="weighting-1.html#effective-weights"><i class="fa fa-check"></i><b>11.3</b> Effective weights</a></li>
<li class="chapter" data-level="11.4" data-path="weighting-1.html"><a href="weighting-1.html#final-points"><i class="fa fa-check"></i><b>11.4</b> Final points</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="visualising-results.html"><a href="visualising-results.html"><i class="fa fa-check"></i><b>12</b> Visualising results</a>
<ul>
<li class="chapter" data-level="12.1" data-path="visualising-results.html"><a href="visualising-results.html#tables"><i class="fa fa-check"></i><b>12.1</b> Tables</a></li>
<li class="chapter" data-level="12.2" data-path="visualising-results.html"><a href="visualising-results.html#plots"><i class="fa fa-check"></i><b>12.2</b> Plots</a></li>
<li class="chapter" data-level="12.3" data-path="visualising-results.html"><a href="visualising-results.html#interactive-exploration"><i class="fa fa-check"></i><b>12.3</b> Interactive exploration</a></li>
<li class="chapter" data-level="12.4" data-path="visualising-results.html"><a href="visualising-results.html#unit-reports"><i class="fa fa-check"></i><b>12.4</b> Unit reports</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html"><i class="fa fa-check"></i><b>13</b> Adjustments and comparisons</a>
<ul>
<li class="chapter" data-level="13.1" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#regeneration"><i class="fa fa-check"></i><b>13.1</b> Regeneration</a></li>
<li class="chapter" data-level="13.2" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#adjustments"><i class="fa fa-check"></i><b>13.2</b> Adjustments</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#addingremoving-indicators"><i class="fa fa-check"></i><b>13.2.1</b> Adding/removing indicators</a></li>
<li class="chapter" data-level="13.2.2" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#other-adjustments"><i class="fa fa-check"></i><b>13.2.2</b> Other adjustments</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="adjustments-and-comparisons.html"><a href="adjustments-and-comparisons.html#comparisons"><i class="fa fa-check"></i><b>13.3</b> Comparisons</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html"><i class="fa fa-check"></i><b>14</b> Sensitivity analysis</a>
<ul>
<li class="chapter" data-level="14.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#about"><i class="fa fa-check"></i><b>14.1</b> About</a></li>
<li class="chapter" data-level="14.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#five-steps"><i class="fa fa-check"></i><b>14.2</b> Five steps</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#specifying-the-model"><i class="fa fa-check"></i><b>14.2.1</b> Specifying the model</a></li>
<li class="chapter" data-level="14.2.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#which-assumptions-to-vary"><i class="fa fa-check"></i><b>14.2.2</b> Which assumptions to vary</a></li>
<li class="chapter" data-level="14.2.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#alternative-values"><i class="fa fa-check"></i><b>14.2.3</b> Alternative values</a></li>
<li class="chapter" data-level="14.2.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#selecting-the-output"><i class="fa fa-check"></i><b>14.2.4</b> Selecting the output</a></li>
<li class="chapter" data-level="14.2.5" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#sa-methodology"><i class="fa fa-check"></i><b>14.2.5</b> SA methodology</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#variance-based-sensitivity-analysis"><i class="fa fa-check"></i><b>14.3</b> Variance-based sensitivity analysis</a></li>
<li class="chapter" data-level="14.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#sensitivity-in-coinr"><i class="fa fa-check"></i><b>14.4</b> Sensitivity in COINr</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#general-specifications"><i class="fa fa-check"></i><b>14.4.1</b> General specifications</a></li>
<li class="chapter" data-level="14.4.2" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#varying-weights"><i class="fa fa-check"></i><b>14.4.2</b> Varying weights</a></li>
<li class="chapter" data-level="14.4.3" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#running-an-uncertainty-analysis"><i class="fa fa-check"></i><b>14.4.3</b> Running an uncertainty analysis</a></li>
<li class="chapter" data-level="14.4.4" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#running-a-sensitivity-analysis"><i class="fa fa-check"></i><b>14.4.4</b> Running a sensitivity analysis</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="sensitivity-analysis.html"><a href="sensitivity-analysis.html#removing-indicators-and-aggregates"><i class="fa fa-check"></i><b>14.5</b> Removing indicators and aggregates</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="helper-functions.html"><a href="helper-functions.html"><i class="fa fa-check"></i><b>15</b> Helper functions</a>
<ul>
<li class="chapter" data-level="15.1" data-path="helper-functions.html"><a href="helper-functions.html#r-interfaces"><i class="fa fa-check"></i><b>15.1</b> R Interfaces</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="helper-functions.html"><a href="helper-functions.html#data-import"><i class="fa fa-check"></i><b>15.1.1</b> Data import</a></li>
<li class="chapter" data-level="15.1.2" data-path="helper-functions.html"><a href="helper-functions.html#export-to-excel"><i class="fa fa-check"></i><b>15.1.2</b> Export to Excel</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="helper-functions.html"><a href="helper-functions.html#selecting-data-sets-and-indicators"><i class="fa fa-check"></i><b>15.2</b> Selecting data sets and indicators</a></li>
<li class="chapter" data-level="15.3" data-path="helper-functions.html"><a href="helper-functions.html#data-frame-tools"><i class="fa fa-check"></i><b>15.3</b> Data frame tools</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html"><i class="fa fa-check"></i><b>16</b> Appendix: R Resources</a>
<ul>
<li class="chapter" data-level="16.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#introduction-to-r"><i class="fa fa-check"></i><b>16.1</b> Introduction to R</a></li>
<li class="chapter" data-level="16.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#advanced-resources"><i class="fa fa-check"></i><b>16.2</b> Advanced resources</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#programming"><i class="fa fa-check"></i><b>16.2.1</b> Programming</a></li>
<li class="chapter" data-level="16.2.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#visualisation"><i class="fa fa-check"></i><b>16.2.2</b> Visualisation</a></li>
<li class="chapter" data-level="16.2.3" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#other"><i class="fa fa-check"></i><b>16.2.3</b> Other</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="faq.html"><a href="faq.html"><i class="fa fa-check"></i><b>17</b> FAQ</a></li>
<li class="chapter" data-level="18" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html"><i class="fa fa-check"></i><b>18</b> Appendix: Building a Composite Indicator Example</a>
<ul>
<li class="chapter" data-level="18.1" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#before-coinr-bc"><i class="fa fa-check"></i><b>18.1</b> Before COINr (BC)</a></li>
<li class="chapter" data-level="18.2" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#load-data-and-assemble"><i class="fa fa-check"></i><b>18.2</b> Load data and assemble</a></li>
<li class="chapter" data-level="18.3" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#check-the-data"><i class="fa fa-check"></i><b>18.3</b> Check the data</a></li>
<li class="chapter" data-level="18.4" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#denomination-1"><i class="fa fa-check"></i><b>18.4</b> Denomination</a></li>
<li class="chapter" data-level="18.5" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#imputation"><i class="fa fa-check"></i><b>18.5</b> Imputation</a></li>
<li class="chapter" data-level="18.6" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#data-treatment-1"><i class="fa fa-check"></i><b>18.6</b> Data treatment</a></li>
<li class="chapter" data-level="18.7" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#normalisation-1"><i class="fa fa-check"></i><b>18.7</b> Normalisation</a></li>
<li class="chapter" data-level="18.8" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#aggregation-1"><i class="fa fa-check"></i><b>18.8</b> Aggregation</a></li>
<li class="chapter" data-level="18.9" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#visualisation-1"><i class="fa fa-check"></i><b>18.9</b> Visualisation</a></li>
<li class="chapter" data-level="18.10" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#comparison"><i class="fa fa-check"></i><b>18.10</b> Comparison</a></li>
<li class="chapter" data-level="18.11" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#export"><i class="fa fa-check"></i><b>18.11</b> Export</a></li>
<li class="chapter" data-level="18.12" data-path="appendix-building-a-composite-indicator-example.html"><a href="appendix-building-a-composite-indicator-example.html#summary"><i class="fa fa-check"></i><b>18.12</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html"><i class="fa fa-check"></i><b>19</b> Appendix: Analysing a Composite Indicator Example</a>
<ul>
<li class="chapter" data-level="19.1" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#loading-data"><i class="fa fa-check"></i><b>19.1</b> Loading data</a></li>
<li class="chapter" data-level="19.2" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#check-calculations"><i class="fa fa-check"></i><b>19.2</b> Check calculations</a></li>
<li class="chapter" data-level="19.3" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#indicator-statistics"><i class="fa fa-check"></i><b>19.3</b> Indicator statistics</a></li>
<li class="chapter" data-level="19.4" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#multivariate-analysis-1"><i class="fa fa-check"></i><b>19.4</b> Multivariate analysis</a></li>
<li class="chapter" data-level="19.5" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#weights"><i class="fa fa-check"></i><b>19.5</b> Weights</a></li>
<li class="chapter" data-level="19.6" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#what-ifs"><i class="fa fa-check"></i><b>19.6</b> What-ifs</a></li>
<li class="chapter" data-level="19.7" data-path="appendix-analysing-a-composite-indicator-example.html"><a href="appendix-analysing-a-composite-indicator-example.html#summing-up"><i class="fa fa-check"></i><b>19.7</b> Summing up</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>20</b> Acknowledgements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Composite Indicator Development and Analysis in R with COINr</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="adjustments-and-comparisons" class="section level1" number="13">
<h1><span class="header-section-number">Chapter 13</span> Adjustments and comparisons</h1>
<p>It’s fairly common to make adjustments to the index, perhaps in terms of alternative data sets, indicators, methodological decisions, and so on. COINr allows you to (a) make fast adjustments, and (b) to compare alternative versions of the index relatively easily.</p>
<div id="regeneration" class="section level2" number="13.1">
<h2><span class="header-section-number">13.1</span> Regeneration</h2>
<p>One of the key advantages of working within the “COINrverse” is that (nearly) all the methodology that is applied when building a composite indicator (COIN) is stored automatically in a folder of the COIN called <code>.$Method</code>. To see what this looks like:</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="adjustments-and-comparisons.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load COINr if not loaded</span></span>
<span id="cb111-2"><a href="adjustments-and-comparisons.html#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(COINr)</span>
<span id="cb111-3"><a href="adjustments-and-comparisons.html#cb111-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-4"><a href="adjustments-and-comparisons.html#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="co"># build example COIN</span></span>
<span id="cb111-5"><a href="adjustments-and-comparisons.html#cb111-5" aria-hidden="true" tabindex="-1"></a>ASEM <span class="ot">&lt;-</span> <span class="fu">build_ASEM</span>()</span>
<span id="cb111-6"><a href="adjustments-and-comparisons.html#cb111-6" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb111-7"><a href="adjustments-and-comparisons.html#cb111-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Denominators detected - stored in .$Input$Denominators</span></span>
<span id="cb111-8"><a href="adjustments-and-comparisons.html#cb111-8" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb111-9"><a href="adjustments-and-comparisons.html#cb111-9" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb111-10"><a href="adjustments-and-comparisons.html#cb111-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Indicator codes cross-checked and OK.</span></span>
<span id="cb111-11"><a href="adjustments-and-comparisons.html#cb111-11" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb111-12"><a href="adjustments-and-comparisons.html#cb111-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Number of indicators = 49</span></span>
<span id="cb111-13"><a href="adjustments-and-comparisons.html#cb111-13" aria-hidden="true" tabindex="-1"></a><span class="do">## Number of units = 51</span></span>
<span id="cb111-14"><a href="adjustments-and-comparisons.html#cb111-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Number of aggregation levels = 3 above indicator level.</span></span>
<span id="cb111-15"><a href="adjustments-and-comparisons.html#cb111-15" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb111-16"><a href="adjustments-and-comparisons.html#cb111-16" aria-hidden="true" tabindex="-1"></a><span class="do">## Aggregation level 1 with 8 aggregate groups: Physical, ConEcFin, Political, Instit, P2P, Environ, Social, SusEcFin</span></span>
<span id="cb111-17"><a href="adjustments-and-comparisons.html#cb111-17" aria-hidden="true" tabindex="-1"></a><span class="do">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb111-18"><a href="adjustments-and-comparisons.html#cb111-18" aria-hidden="true" tabindex="-1"></a><span class="do">## Aggregation level 2 with 2 aggregate groups: Conn, Sust</span></span>
<span id="cb111-19"><a href="adjustments-and-comparisons.html#cb111-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb111-20"><a href="adjustments-and-comparisons.html#cb111-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Aggregation level 3 with 1 aggregate groups: Index</span></span>
<span id="cb111-21"><a href="adjustments-and-comparisons.html#cb111-21" aria-hidden="true" tabindex="-1"></a><span class="do">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb111-22"><a href="adjustments-and-comparisons.html#cb111-22" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb111-23"><a href="adjustments-and-comparisons.html#cb111-23" aria-hidden="true" tabindex="-1"></a><span class="do">## Missing data points detected = 65</span></span>
<span id="cb111-24"><a href="adjustments-and-comparisons.html#cb111-24" aria-hidden="true" tabindex="-1"></a><span class="do">## Missing data points imputed = 65, using method = indgroup_mean</span></span>
<span id="cb111-25"><a href="adjustments-and-comparisons.html#cb111-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-26"><a href="adjustments-and-comparisons.html#cb111-26" aria-hidden="true" tabindex="-1"></a><span class="co"># look in ASEM$Method folder in R Studio...</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-88"></span>
<img src="images/method_folder.png" alt="Method folder in ASEM example" width="60%" />
<p class="caption">
Figure 13.1: Method folder in ASEM example
</p>
</div>
<p>The easiest way to view it is by looking in the viewer of R Studio as in the screenshot above. Essentially, the <code>.$Method</code> folder has one entry for each COINr function that was used to build the COIN, and inside each of these folders are the arguments to the function that were input. Notice that the names inside <code>.$Method$denominate</code> correspond exactly to arguments to <code>denominate()</code>, for example.</p>
<p>Every time a COINr “construction function” is run, the inputs to the function are automatically recorded inside the COIN. Construction functions are any of the following seven:</p>
<table>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>assemble()</code></td>
<td align="left">Assembles indicator data/metadata into a COIN</td>
</tr>
<tr class="even">
<td align="left"><code>checkData()</code></td>
<td align="left">Data availability check and unit screening</td>
</tr>
<tr class="odd">
<td align="left"><code>denominate()</code></td>
<td align="left">Denominate (divide) indicators by other indicators</td>
</tr>
<tr class="even">
<td align="left"><code>impute()</code></td>
<td align="left">Impute missing data using various methods</td>
</tr>
<tr class="odd">
<td align="left"><code>treat()</code></td>
<td align="left">Treat outliers with Winsorisation and transformations</td>
</tr>
<tr class="even">
<td align="left"><code>normalise()</code></td>
<td align="left">Normalise data using various methods</td>
</tr>
<tr class="odd">
<td align="left"><code>aggregate()</code></td>
<td align="left">Aggregate indicators into hierarchical levels, up to index</td>
</tr>
</tbody>
</table>
<p>These are the core functions that are used to build a composite indicator, from assembling from the original data, up to aggregation.</p>
<p>One reason to do this is simply to have a record of what you did to arrive at the results. However, this is not the main reason (and in fact, it would be anyway good practice to make your own record by creating a script or markdown doc which records the steps). The real advantage is that results can be automatically regenerated with a handy function called <code>regen()</code>.</p>
<p>To regenerate the results, simply run e.g.:</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="adjustments-and-comparisons.html#cb112-1" aria-hidden="true" tabindex="-1"></a>ASEM2 <span class="ot">&lt;-</span> <span class="fu">regen</span>(ASEM)</span>
<span id="cb112-2"><a href="adjustments-and-comparisons.html#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb112-3"><a href="adjustments-and-comparisons.html#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Denominators detected - stored in .$Input$Denominators</span></span>
<span id="cb112-4"><a href="adjustments-and-comparisons.html#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb112-5"><a href="adjustments-and-comparisons.html#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb112-6"><a href="adjustments-and-comparisons.html#cb112-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Indicator codes cross-checked and OK.</span></span>
<span id="cb112-7"><a href="adjustments-and-comparisons.html#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb112-8"><a href="adjustments-and-comparisons.html#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Number of indicators = 49</span></span>
<span id="cb112-9"><a href="adjustments-and-comparisons.html#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Number of units = 51</span></span>
<span id="cb112-10"><a href="adjustments-and-comparisons.html#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Number of aggregation levels = 3 above indicator level.</span></span>
<span id="cb112-11"><a href="adjustments-and-comparisons.html#cb112-11" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb112-12"><a href="adjustments-and-comparisons.html#cb112-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Aggregation level 1 with 8 aggregate groups: Physical, ConEcFin, Political, Instit, P2P, Environ, Social, SusEcFin</span></span>
<span id="cb112-13"><a href="adjustments-and-comparisons.html#cb112-13" aria-hidden="true" tabindex="-1"></a><span class="do">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb112-14"><a href="adjustments-and-comparisons.html#cb112-14" aria-hidden="true" tabindex="-1"></a><span class="do">## Aggregation level 2 with 2 aggregate groups: Conn, Sust</span></span>
<span id="cb112-15"><a href="adjustments-and-comparisons.html#cb112-15" aria-hidden="true" tabindex="-1"></a><span class="do">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb112-16"><a href="adjustments-and-comparisons.html#cb112-16" aria-hidden="true" tabindex="-1"></a><span class="do">## Aggregation level 3 with 1 aggregate groups: Index</span></span>
<span id="cb112-17"><a href="adjustments-and-comparisons.html#cb112-17" aria-hidden="true" tabindex="-1"></a><span class="do">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb112-18"><a href="adjustments-and-comparisons.html#cb112-18" aria-hidden="true" tabindex="-1"></a><span class="do">## -----------------</span></span>
<span id="cb112-19"><a href="adjustments-and-comparisons.html#cb112-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Missing data points detected = 65</span></span>
<span id="cb112-20"><a href="adjustments-and-comparisons.html#cb112-20" aria-hidden="true" tabindex="-1"></a><span class="do">## Missing data points imputed = 65, using method = indgroup_mean</span></span></code></pre></div>
<p>The <code>regen()</code> function reruns all functions that are recorded in the <code>.$Method</code> folder <em>in the order they appear in the folder</em>. In this example, it runs, in order, <code>assemble()</code>, <code>denominate()</code>, <code>impute()</code>, <code>treat()</code>, <code>normalise()</code>and <code>aggregate()</code>. This replicates exactly the results. But what is the point of that? Well, it means that we can make changes to the index, generally by altering parameters in the <code>.$Method</code> folder, and then rerun everything very quickly with a single command. This will be demonstrated in the following section. After that, we will also see how to compare between alternative versions of the index.</p>
<p>Before that, there is one extra feature of <code>regen()</code> which is worth mentioning. The <code>regen()</code> function only runs the seven construction functions as listed above. These functions are very flexible and should encompass most needs for constructing a composite indicator. But what happens if you want to build in an extra operation, or operations, that are outside of these seven functions?</p>
<p>It is possible to also include “custom” chunks of code inside the COIN. Custom chunks should be written manually using the <code>quote()</code> function, to a special folder <code>.$Method$Custom</code>. These chunks can be any type of code, but the important thing is to also know <em>when</em> to run the code, i.e. at what point in the construction process.</p>
<p>More specifically, custom code chunks are written as a named list. The <strong>name</strong> of the item in the list specifies <em>when</em> to perform the operation. For example, “after_treat” means to perform this immediately after the treatment step. Other options are e.g. “after_normalise” or “after_impute” – in general it should be “after_” followed by a name of one of the names of the construction functions.</p>
<p>The corresponding <strong>value</strong> in the list should be an operation which <em>must</em> be enclosed in the <code>quote()</code> function. Clearly, the list can feature multiple operations at different points in construction. The COIN is referred to by the generic name <code>COIN</code>, rather than the name you have assigned to your COIN.</p>
<p>This is slightly complicated, but can be clarified a bit with an example. Let’s imagine that after Winsorisation, we would like to “reset” one of the Winsorised points to its original value. This is currently not possible inside the <code>treat()</code> function so has to be done manually. But we would like this operation to be kept when we regenerate the index with variations in methodology (e.g. trying different aggregation functions, weights, etc.).</p>
<p>We create a list with one operation: resetting the point after the treatment step.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="adjustments-and-comparisons.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create list. </span><span class="al">NOTE</span><span class="co"> the use of the quote() function!</span></span>
<span id="cb113-2"><a href="adjustments-and-comparisons.html#cb113-2" aria-hidden="true" tabindex="-1"></a>custlist <span class="ot">=</span> <span class="fu">list</span>(<span class="at">after_treat =</span> <span class="fu">quote</span>(COIN<span class="sc">$</span>Data<span class="sc">$</span>Treated<span class="sc">$</span>Bord[COIN<span class="sc">$</span>Data<span class="sc">$</span>Treated<span class="sc">$</span>UnitCode<span class="sc">==</span><span class="st">&quot;BEL&quot;</span>] <span class="ot">&lt;-</span> COIN<span class="sc">$</span>Data<span class="sc">$</span>Imputed<span class="sc">$</span>Bord[COIN<span class="sc">$</span>Data<span class="sc">$</span>Imputed<span class="sc">$</span>UnitCode<span class="sc">==</span><span class="st">&quot;BEL&quot;</span>]))</span>
<span id="cb113-3"><a href="adjustments-and-comparisons.html#cb113-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-4"><a href="adjustments-and-comparisons.html#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the list to the $Method$Custom folder</span></span>
<span id="cb113-5"><a href="adjustments-and-comparisons.html#cb113-5" aria-hidden="true" tabindex="-1"></a>ASEM<span class="sc">$</span>Method<span class="sc">$</span>Custom <span class="ot">&lt;-</span> custlist</span></code></pre></div>
<p>Specifically, we have replaced the Winsorised value of Belgium, for the “Bord” indicator, with its imputed value (i.e. the value it had before it was treated).</p>
<p>Now, when we regenerate the COIN using <code>regen()</code>, it will insert this extra line of code immediately after the treatment step. Clearly, anything we refer to in this custom code must be available at that step in the construction. For example, we can’t refer to the aggregated data set if the data has not yet been aggregated.</p>
<p>Using custom code may seem a bit confusing but it adds an extra layer of flexibility. It is however intended for small snippets of custom code, rather than large blocks of custom operations. If you are doing a lot of operations outside COINr, it may be better to do this in your own dedicated script or function, rather than trying to encode absolutely everything inside the COIN. However, also consider that some features of COINr, such as global sensitivity analysis, require everything to be encoded inside the COIN.</p>
<p>Before moving on, it’s worth reiterating that regenerating a COIN runs the construction functions in the order they appear in the Method folder. That means that if you build an index with no imputation, for example, and then later decide to make a copy which now includes imputation, you would have to insert the <code>.Method$imputation</code> entry in the place where it should occur. An easy way to do this is using R’s <code>append()</code> function.</p>
</div>
<div id="adjustments" class="section level2" number="13.2">
<h2><span class="header-section-number">13.2</span> Adjustments</h2>
<p>Let us now explore how the COIN can be adjusted and regenerated. This will (hopefully) clarify why regenerating is a useful thing.</p>
<p>The general steps for adjustments are:</p>
<ol style="list-style-type: decimal">
<li>Copy the object</li>
<li>Adjust the index methodology or data by editing the <code>.$Method</code> folder and/or the underlying data</li>
<li>Regenerate the results</li>
<li>Compare alternatives</li>
</ol>
<p>Copying the object is straightforward, and regeneration has been dealt with in the previous section. Comparison is also addressed in the following section. Here we will focus on adjustments and changing methodology.</p>
<div id="addingremoving-indicators" class="section level3" number="13.2.1">
<h3><span class="header-section-number">13.2.1</span> Adding/removing indicators</h3>
<p>First of all, let’s consider an alternative index where we decide to add or remove one or more indicators. There are different ways that we could consider doing this.</p>
<p>A first possibility would be to manually create a new data frame of indicator data and indicator metadata, i.e. the <code>IndData</code> and <code>IndMeta</code> inputs for <code>assemble()</code>. This is fine, but we would have to start the index again from scratch and rebuild it.</p>
<p>A better idea is that when we first supply the set of indicators to <code>assemble()</code>, we include all indicators that we might possibly want to include in the index, including e.g. alternative indicators with alternative data sources. Then we build different versions of the index using subsets of these indicators. This allows us to use <code>regen()</code> and therefore to make fast copies of the index.</p>
<p>To illustrate, consider again the ASEM example. We can rebuild the ASEM index using a subset of the indicators by using the <code>include</code> or <code>exclude</code> arguments of the <code>assemble()</code> function. Because these are stored in <code>.$Method</code>, we can easily regenerate the new results.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="adjustments-and-comparisons.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a copy</span></span>
<span id="cb114-2"><a href="adjustments-and-comparisons.html#cb114-2" aria-hidden="true" tabindex="-1"></a>ASEM_NoLPIShip <span class="ot">&lt;-</span> ASEM</span>
<span id="cb114-3"><a href="adjustments-and-comparisons.html#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="adjustments-and-comparisons.html#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit method: exclude two indicators</span></span>
<span id="cb114-5"><a href="adjustments-and-comparisons.html#cb114-5" aria-hidden="true" tabindex="-1"></a>ASEM_NoLPIShip<span class="sc">$</span>Method<span class="sc">$</span>assemble<span class="sc">$</span>exclude <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;LPI&quot;</span>, <span class="st">&quot;Ship&quot;</span>)</span>
<span id="cb114-6"><a href="adjustments-and-comparisons.html#cb114-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-7"><a href="adjustments-and-comparisons.html#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Regenerate results (suppress any messages)</span></span>
<span id="cb114-8"><a href="adjustments-and-comparisons.html#cb114-8" aria-hidden="true" tabindex="-1"></a>ASEM_NoLPIShip <span class="ot">&lt;-</span> <span class="fu">regen</span>(ASEM_NoLPIShip, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Note that, in the ASEM example, by default, <code>ASEM$Method$assemble</code> doesn’t exist because the <code>include</code> or <code>exclude</code> arguments of <code>assemble()</code> are empty, and these are the only arguments to <code>assemble()</code> that are recorded in <code>.$Method$assemble</code>.</p>
<p>In summary, we have removed two indicators, then regenerated the results using exactly the same methodology as used before. Importantly, <code>include</code> and <code>exclude</code> operate <em>relative to the original data</em> input to <code>assemble()</code>, i.e. the data found in <code>.$Input$Original</code>. This means that if we now were to make a copy of the version excluding the two indicators above, and exclude another different indicator:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="adjustments-and-comparisons.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a copy</span></span>
<span id="cb115-2"><a href="adjustments-and-comparisons.html#cb115-2" aria-hidden="true" tabindex="-1"></a>ASEM_NoBord <span class="ot">&lt;-</span> ASEM_NoLPIShip</span>
<span id="cb115-3"><a href="adjustments-and-comparisons.html#cb115-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-4"><a href="adjustments-and-comparisons.html#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit method: exclude two indicators</span></span>
<span id="cb115-5"><a href="adjustments-and-comparisons.html#cb115-5" aria-hidden="true" tabindex="-1"></a>ASEM_NoBord<span class="sc">$</span>Method<span class="sc">$</span>assemble<span class="sc">$</span>exclude <span class="ot">&lt;-</span> <span class="st">&quot;Bord&quot;</span></span>
<span id="cb115-6"><a href="adjustments-and-comparisons.html#cb115-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-7"><a href="adjustments-and-comparisons.html#cb115-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Regenerate results</span></span>
<span id="cb115-8"><a href="adjustments-and-comparisons.html#cb115-8" aria-hidden="true" tabindex="-1"></a>ASEM_NoBord <span class="ot">&lt;-</span> <span class="fu">regen</span>(ASEM_NoBord, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span>
<span id="cb115-9"><a href="adjustments-and-comparisons.html#cb115-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-10"><a href="adjustments-and-comparisons.html#cb115-10" aria-hidden="true" tabindex="-1"></a>ASEM_NoBord<span class="sc">$</span>Parameters<span class="sc">$</span>IndCodes</span>
<span id="cb115-11"><a href="adjustments-and-comparisons.html#cb115-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] &quot;Goods&quot;     &quot;Services&quot;  &quot;FDI&quot;       &quot;PRemit&quot;    &quot;ForPort&quot;   &quot;CostImpEx&quot;</span></span>
<span id="cb115-12"><a href="adjustments-and-comparisons.html#cb115-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] &quot;Tariff&quot;    &quot;TBTs&quot;      &quot;TIRcon&quot;    &quot;RTAs&quot;      &quot;Visa&quot;      &quot;StMob&quot;    </span></span>
<span id="cb115-13"><a href="adjustments-and-comparisons.html#cb115-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] &quot;Research&quot;  &quot;Pat&quot;       &quot;CultServ&quot;  &quot;CultGood&quot;  &quot;Tourist&quot;   &quot;MigStock&quot; </span></span>
<span id="cb115-14"><a href="adjustments-and-comparisons.html#cb115-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] &quot;Lang&quot;      &quot;LPI&quot;       &quot;Flights&quot;   &quot;Ship&quot;      &quot;Elec&quot;      &quot;Gas&quot;      </span></span>
<span id="cb115-15"><a href="adjustments-and-comparisons.html#cb115-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [25] &quot;ConSpeed&quot;  &quot;Cov4G&quot;     &quot;Embs&quot;      &quot;IGOs&quot;      &quot;UNVote&quot;    &quot;Renew&quot;    </span></span>
<span id="cb115-16"><a href="adjustments-and-comparisons.html#cb115-16" aria-hidden="true" tabindex="-1"></a><span class="do">## [31] &quot;PrimEner&quot;  &quot;CO2&quot;       &quot;MatCon&quot;    &quot;Forest&quot;    &quot;Poverty&quot;   &quot;Palma&quot;    </span></span>
<span id="cb115-17"><a href="adjustments-and-comparisons.html#cb115-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [37] &quot;TertGrad&quot;  &quot;FreePress&quot; &quot;TolMin&quot;    &quot;NGOs&quot;      &quot;CPI&quot;       &quot;FemLab&quot;   </span></span>
<span id="cb115-18"><a href="adjustments-and-comparisons.html#cb115-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [43] &quot;WomParl&quot;   &quot;PubDebt&quot;   &quot;PrivDebt&quot;  &quot;GDPGrow&quot;   &quot;RDExp&quot;     &quot;NEET&quot;</span></span></code></pre></div>
<p>…we see that “LPI” and “Ship” are once again present.</p>
<p>In fact, COINr has an even quicker way to add and remove indicators, which is a short cut function called <code>indChange()</code>. In one command you can add or remove indicators and regenerate the results. Unlike the method above, <code>indChange()</code> also adds and removes relative to the existing index, which may be more convenient in some circumstances. To demonstrate this, we can use the same example as above:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="adjustments-and-comparisons.html#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a copy</span></span>
<span id="cb116-2"><a href="adjustments-and-comparisons.html#cb116-2" aria-hidden="true" tabindex="-1"></a>ASEM_NoBord2 <span class="ot">&lt;-</span> <span class="fu">indChange</span>(ASEM_NoLPIShip, <span class="at">drop =</span> <span class="st">&quot;Bord&quot;</span>, <span class="at">regen =</span> <span class="cn">TRUE</span>)</span>
<span id="cb116-3"><a href="adjustments-and-comparisons.html#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="do">## COIN has been regenerated using new specs.</span></span>
<span id="cb116-4"><a href="adjustments-and-comparisons.html#cb116-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-5"><a href="adjustments-and-comparisons.html#cb116-5" aria-hidden="true" tabindex="-1"></a>ASEM_NoBord2<span class="sc">$</span>Parameters<span class="sc">$</span>IndCodes</span>
<span id="cb116-6"><a href="adjustments-and-comparisons.html#cb116-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] &quot;Goods&quot;     &quot;Services&quot;  &quot;FDI&quot;       &quot;PRemit&quot;    &quot;ForPort&quot;   &quot;CostImpEx&quot;</span></span>
<span id="cb116-7"><a href="adjustments-and-comparisons.html#cb116-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] &quot;Tariff&quot;    &quot;TBTs&quot;      &quot;TIRcon&quot;    &quot;RTAs&quot;      &quot;Visa&quot;      &quot;StMob&quot;    </span></span>
<span id="cb116-8"><a href="adjustments-and-comparisons.html#cb116-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] &quot;Research&quot;  &quot;Pat&quot;       &quot;CultServ&quot;  &quot;CultGood&quot;  &quot;Tourist&quot;   &quot;MigStock&quot; </span></span>
<span id="cb116-9"><a href="adjustments-and-comparisons.html#cb116-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] &quot;Lang&quot;      &quot;Flights&quot;   &quot;Elec&quot;      &quot;Gas&quot;       &quot;ConSpeed&quot;  &quot;Cov4G&quot;    </span></span>
<span id="cb116-10"><a href="adjustments-and-comparisons.html#cb116-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [25] &quot;Embs&quot;      &quot;IGOs&quot;      &quot;UNVote&quot;    &quot;Renew&quot;     &quot;PrimEner&quot;  &quot;CO2&quot;      </span></span>
<span id="cb116-11"><a href="adjustments-and-comparisons.html#cb116-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [31] &quot;MatCon&quot;    &quot;Forest&quot;    &quot;Poverty&quot;   &quot;Palma&quot;     &quot;TertGrad&quot;  &quot;FreePress&quot;</span></span>
<span id="cb116-12"><a href="adjustments-and-comparisons.html#cb116-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [37] &quot;TolMin&quot;    &quot;NGOs&quot;      &quot;CPI&quot;       &quot;FemLab&quot;    &quot;WomParl&quot;   &quot;PubDebt&quot;  </span></span>
<span id="cb116-13"><a href="adjustments-and-comparisons.html#cb116-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [43] &quot;PrivDebt&quot;  &quot;GDPGrow&quot;   &quot;RDExp&quot;     &quot;NEET&quot;</span></span></code></pre></div>
<p>And here we see that now, “Bord” has been excluded <em>as well as</em> “LPI” and “Ship.”</p>
</div>
<div id="other-adjustments" class="section level3" number="13.2.2">
<h3><span class="header-section-number">13.2.2</span> Other adjustments</h3>
<p>We can make any methodological adjustments we want by editing any parameters in <code>.$Method</code> and then running <code>regen()</code>. For example, we can change the imputation method:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="adjustments-and-comparisons.html#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a copy</span></span>
<span id="cb117-2"><a href="adjustments-and-comparisons.html#cb117-2" aria-hidden="true" tabindex="-1"></a>ASEMAltImpute <span class="ot">&lt;-</span> ASEM</span>
<span id="cb117-3"><a href="adjustments-and-comparisons.html#cb117-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-4"><a href="adjustments-and-comparisons.html#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit .$Method</span></span>
<span id="cb117-5"><a href="adjustments-and-comparisons.html#cb117-5" aria-hidden="true" tabindex="-1"></a>ASEMAltImpute<span class="sc">$</span>Method<span class="sc">$</span>impute<span class="sc">$</span>imtype <span class="ot">&lt;-</span> <span class="st">&quot;indgroup_median&quot;</span></span>
<span id="cb117-6"><a href="adjustments-and-comparisons.html#cb117-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-7"><a href="adjustments-and-comparisons.html#cb117-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Regenerate</span></span>
<span id="cb117-8"><a href="adjustments-and-comparisons.html#cb117-8" aria-hidden="true" tabindex="-1"></a>ASEMAltImpute <span class="ot">&lt;-</span> <span class="fu">regen</span>(ASEMAltImpute, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>We could also change the normalisation method, e.g. to use Borda scores:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="adjustments-and-comparisons.html#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make a copy</span></span>
<span id="cb118-2"><a href="adjustments-and-comparisons.html#cb118-2" aria-hidden="true" tabindex="-1"></a>ASEMAltNorm <span class="ot">&lt;-</span> ASEM</span>
<span id="cb118-3"><a href="adjustments-and-comparisons.html#cb118-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-4"><a href="adjustments-and-comparisons.html#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Edit .$Method</span></span>
<span id="cb118-5"><a href="adjustments-and-comparisons.html#cb118-5" aria-hidden="true" tabindex="-1"></a>ASEMAltNorm<span class="sc">$</span>Method<span class="sc">$</span>normalise<span class="sc">$</span>ntype <span class="ot">&lt;-</span> <span class="st">&quot;borda&quot;</span></span>
<span id="cb118-6"><a href="adjustments-and-comparisons.html#cb118-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-7"><a href="adjustments-and-comparisons.html#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Regenerate</span></span>
<span id="cb118-8"><a href="adjustments-and-comparisons.html#cb118-8" aria-hidden="true" tabindex="-1"></a>ASEMAltNorm <span class="ot">&lt;-</span> <span class="fu">regen</span>(ASEMAltNorm, <span class="at">quietly =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>and of course this extends to any parameters of any of the “construction” functions. We can even alter the underlying data directly if we want, e.g. by altering values in <code>.$Input$Original$Data</code>. In short, anything inside the COIN can be edited and then the results regenerated. This allows a fast way to make different alternative indexes and explore the effects of different methodology very quickly.</p>
</div>
</div>
<div id="comparisons" class="section level2" number="13.3">
<h2><span class="header-section-number">13.3</span> Comparisons</h2>
<p>A logical follow up to making alternative indexes is to try to understand the differences between these indexes. This can of course be done manually. But to make this quicker, COINr includes a few tools to quickly inspect the differences between different COINs.</p>
<p>In using these tools it should be fairly evident that comparisons are made between different versions of the same index. So the two indexes must have at least some units in common. The tools are intended for methodological variations of the type shown previously in this chapter - different aggregation, weighting, adding and removing indicators and so on. That said, since comparisons are made on units, it would also be possible to compare two totally different COINs, as long as they have units in common.</p>
<p>To begin with, we can make a simple bilateral comparison between two COINs. Taking two of the index versions created previously:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="adjustments-and-comparisons.html#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compTable</span>(ASEM, ASEMAltNorm, <span class="at">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="at">isel =</span> <span class="st">&quot;Index&quot;</span>) <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb119-2"><a href="adjustments-and-comparisons.html#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb119-3"><a href="adjustments-and-comparisons.html#cb119-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">UnitCode</th>
<th align="left">UnitName</th>
<th align="right">RankCOIN1</th>
<th align="right">RankCOIN2</th>
<th align="right">RankChange</th>
<th align="right">AbsRankChange</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">43</td>
<td align="left">PRT</td>
<td align="left">Portugal</td>
<td align="right">27</td>
<td align="right">16</td>
<td align="right">11</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">29</td>
<td align="left">LAO</td>
<td align="left">Lao PDR</td>
<td align="right">48</td>
<td align="right">39</td>
<td align="right">9</td>
<td align="right">9</td>
</tr>
<tr class="odd">
<td align="left">33</td>
<td align="left">MLT</td>
<td align="left">Malta</td>
<td align="right">10</td>
<td align="right">19</td>
<td align="right">-9</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">14</td>
<td align="left">EST</td>
<td align="left">Estonia</td>
<td align="right">22</td>
<td align="right">15</td>
<td align="right">7</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">21</td>
<td align="left">IDN</td>
<td align="left">Indonesia</td>
<td align="right">43</td>
<td align="right">49</td>
<td align="right">-6</td>
<td align="right">6</td>
</tr>
<tr class="even">
<td align="left">13</td>
<td align="left">ESP</td>
<td align="left">Spain</td>
<td align="right">19</td>
<td align="right">24</td>
<td align="right">-5</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">19</td>
<td align="left">HRV</td>
<td align="left">Croatia</td>
<td align="right">18</td>
<td align="right">23</td>
<td align="right">-5</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">17</td>
<td align="left">GBR</td>
<td align="left">United Kingdom</td>
<td align="right">15</td>
<td align="right">11</td>
<td align="right">4</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="left">30</td>
<td align="left">LTU</td>
<td align="left">Lithuania</td>
<td align="right">16</td>
<td align="right">12</td>
<td align="right">4</td>
<td align="right">4</td>
</tr>
<tr class="even">
<td align="left">35</td>
<td align="left">MNG</td>
<td align="left">Mongolia</td>
<td align="right">44</td>
<td align="right">48</td>
<td align="right">-4</td>
<td align="right">4</td>
</tr>
</tbody>
</table>
<p>The <code>compTable()</code> function allows a rank comparison of a single indicator or aggregate, between two COINs. The COINs must both share the indicator code which is assigned to <code>isel</code>. By default the output table (data frame) is sorted by the highest absolute rank change downwards, but it can be sorted by the other columns using the <code>sort_by</code> argument:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="adjustments-and-comparisons.html#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">compTable</span>(ASEM, ASEMAltNorm, <span class="at">dset =</span> <span class="st">&quot;Aggregated&quot;</span>, <span class="at">isel =</span> <span class="st">&quot;Index&quot;</span>, <span class="at">sort_by =</span> <span class="st">&quot;RankCOIN1&quot;</span>) <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb120-2"><a href="adjustments-and-comparisons.html#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>) <span class="sc">|</span><span class="er">&gt;</span></span>
<span id="cb120-3"><a href="adjustments-and-comparisons.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th align="left"></th>
<th align="left">UnitCode</th>
<th align="left">UnitName</th>
<th align="right">RankCOIN1</th>
<th align="right">RankCOIN2</th>
<th align="right">RankChange</th>
<th align="right">AbsRankChange</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">7</td>
<td align="left">CHE</td>
<td align="left">Switzerland</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">37</td>
<td align="left">NLD</td>
<td align="left">Netherlands</td>
<td align="right">2</td>
<td align="right">4</td>
<td align="right">-2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">12</td>
<td align="left">DNK</td>
<td align="left">Denmark</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">38</td>
<td align="left">NOR</td>
<td align="left">Norway</td>
<td align="right">4</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">BEL</td>
<td align="left">Belgium</td>
<td align="right">5</td>
<td align="right">6</td>
<td align="right">-1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">49</td>
<td align="left">SWE</td>
<td align="left">Sweden</td>
<td align="right">6</td>
<td align="right">5</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="odd">
<td align="left">2</td>
<td align="left">AUT</td>
<td align="left">Austria</td>
<td align="right">7</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">31</td>
<td align="left">LUX</td>
<td align="left">Luxembourg</td>
<td align="right">8</td>
<td align="right">10</td>
<td align="right">-2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">11</td>
<td align="left">DEU</td>
<td align="left">Germany</td>
<td align="right">9</td>
<td align="right">8</td>
<td align="right">1</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">33</td>
<td align="left">MLT</td>
<td align="left">Malta</td>
<td align="right">10</td>
<td align="right">19</td>
<td align="right">-9</td>
<td align="right">9</td>
</tr>
</tbody>
</table>
<p>Why use ranks as a comparison and not scores? As explained elsewhere in this documentation, a different normalisation method or aggregation method can result in very different scores for the same unit. Since scores have no units, the scale is in many ways arbitrary, but ranks are a consistent way of comparing different versions.</p>
<p>For comparisons between more than two COINs, the <code>compTableMulti()</code> function can be used.</p>
<p>Finally, you may wish to cross-check results of a COIN against parallel calculations. For example, you might be reproducing a composite indicator which was calculated in Excel and want to see if the results are the same. COINr has a handy function called <code>compareDF()</code>, which gives a fairly detailed comparison between two data frames. This is explained in more detail in the <a href="helper-functions.html#helper-functions">Helper functions</a> chapter.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="visualising-results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="sensitivity-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/09-Adjustments.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
},
"toolbar": {
"position": "fixed"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
