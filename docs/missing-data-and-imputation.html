<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Missing data and Imputation | COINr: An R Package for Composite Indicator Development and Analysis</title>
  <meta name="description" content="COINr Documentation" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Missing data and Imputation | COINr: An R Package for Composite Indicator Development and Analysis" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="COINr Documentation" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Missing data and Imputation | COINr: An R Package for Composite Indicator Development and Analysis" />
  
  <meta name="twitter:description" content="COINr Documentation" />
  

<meta name="author" content="William Becker" />


<meta name="date" content="2021-02-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="initial-visualisation-and-analysis.html"/>
<link rel="next" href="denomination.html"/>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/core-js-2.5.3/shim.min.js"></script>
<script src="libs/react-16.12.0/react.min.js"></script>
<script src="libs/react-16.12.0/react-dom.min.js"></script>
<script src="libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="libs/reactable-binding-0.2.3/reactable.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">COINr Documentation</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.1</b> Installation</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#whats-it-for"><i class="fa fa-check"></i><b>1.2</b> What’s it for?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#quick-start-guide"><i class="fa fa-check"></i><b>1.3</b> Quick-start guide</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#how-to-use-coinr"><i class="fa fa-check"></i><b>2.1</b> How to use COINr</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#terminology"><i class="fa fa-check"></i><b>2.2</b> Terminology</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#tips-for-using-coinr"><i class="fa fa-check"></i><b>2.3</b> Tips for using COINr</a><ul>
<li class="chapter" data-level="2.3.1" data-path="introduction.html"><a href="introduction.html#ordering"><i class="fa fa-check"></i><b>2.3.1</b> Ordering</a></li>
<li class="chapter" data-level="2.3.2" data-path="introduction.html"><a href="introduction.html#syntax"><i class="fa fa-check"></i><b>2.3.2</b> Syntax</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html"><i class="fa fa-check"></i><b>3</b> COINs: the currency of COINr</a><ul>
<li class="chapter" data-level="3.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#the-three-inputs"><i class="fa fa-check"></i><b>3.2</b> The three inputs</a><ul>
<li class="chapter" data-level="3.2.1" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-data"><i class="fa fa-check"></i><b>3.2.1</b> Indicator data</a></li>
<li class="chapter" data-level="3.2.2" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#indicator-metadata"><i class="fa fa-check"></i><b>3.2.2</b> Indicator metadata</a></li>
<li class="chapter" data-level="3.2.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#aggregation-metadata"><i class="fa fa-check"></i><b>3.2.3</b> Aggregation metadata</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#putting-everything-together"><i class="fa fa-check"></i><b>3.3</b> Putting everything together</a></li>
<li class="chapter" data-level="3.4" data-path="coins-the-currency-of-coinr.html"><a href="coins-the-currency-of-coinr.html#moving-on"><i class="fa fa-check"></i><b>3.4</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html"><i class="fa fa-check"></i><b>4</b> Initial visualisation and analysis</a><ul>
<li class="chapter" data-level="4.1" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#structure"><i class="fa fa-check"></i><b>4.1</b> Structure</a></li>
<li class="chapter" data-level="4.2" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#distributions"><i class="fa fa-check"></i><b>4.2</b> Distributions</a></li>
<li class="chapter" data-level="4.3" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#ranks-and-maps"><i class="fa fa-check"></i><b>4.3</b> Ranks and Maps</a></li>
<li class="chapter" data-level="4.4" data-path="initial-visualisation-and-analysis.html"><a href="initial-visualisation-and-analysis.html#statistics-and-analysis"><i class="fa fa-check"></i><b>4.4</b> Statistics and analysis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html"><i class="fa fa-check"></i><b>5</b> Missing data and Imputation</a><ul>
<li class="chapter" data-level="5.1" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#concept"><i class="fa fa-check"></i><b>5.1</b> Concept</a></li>
<li class="chapter" data-level="5.2" data-path="missing-data-and-imputation.html"><a href="missing-data-and-imputation.html#data-checks-and-screening"><i class="fa fa-check"></i><b>5.2</b> Data checks and screening</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="denomination.html"><a href="denomination.html"><i class="fa fa-check"></i><b>6</b> Denomination</a><ul>
<li class="chapter" data-level="6.1" data-path="denomination.html"><a href="denomination.html#concept-1"><i class="fa fa-check"></i><b>6.1</b> Concept</a></li>
<li class="chapter" data-level="6.2" data-path="denomination.html"><a href="denomination.html#denominating-in-coinr"><i class="fa fa-check"></i><b>6.2</b> Denominating in COINr</a><ul>
<li class="chapter" data-level="6.2.1" data-path="denomination.html"><a href="denomination.html#on-coins"><i class="fa fa-check"></i><b>6.2.1</b> On COINs</a></li>
<li class="chapter" data-level="6.2.2" data-path="denomination.html"><a href="denomination.html#on-data-frames"><i class="fa fa-check"></i><b>6.2.2</b> On data frames</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="denomination.html"><a href="denomination.html#when-to-denominate-and-by-what"><i class="fa fa-check"></i><b>6.3</b> When to denominate, and by what?</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-treatment.html"><a href="data-treatment.html"><i class="fa fa-check"></i><b>7</b> Data Treatment</a><ul>
<li class="chapter" data-level="7.1" data-path="data-treatment.html"><a href="data-treatment.html#example-one"><i class="fa fa-check"></i><b>7.1</b> Example one</a></li>
<li class="chapter" data-level="7.2" data-path="data-treatment.html"><a href="data-treatment.html#example-two"><i class="fa fa-check"></i><b>7.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="normalisation.html"><a href="normalisation.html"><i class="fa fa-check"></i><b>8</b> Normalisation</a></li>
<li class="chapter" data-level="9" data-path="aggregation.html"><a href="aggregation.html"><i class="fa fa-check"></i><b>9</b> Aggregation</a></li>
<li class="chapter" data-level="10" data-path="weighting.html"><a href="weighting.html"><i class="fa fa-check"></i><b>10</b> Weighting</a><ul>
<li class="chapter" data-level="10.1" data-path="weighting.html"><a href="weighting.html#approaches-to-weighting"><i class="fa fa-check"></i><b>10.1</b> Approaches to weighting</a></li>
<li class="chapter" data-level="10.2" data-path="weighting.html"><a href="weighting.html#interactive-re-weighting-with-rew8r"><i class="fa fa-check"></i><b>10.2</b> Interactive re-weighting with ReW8R</a></li>
<li class="chapter" data-level="10.3" data-path="weighting.html"><a href="weighting.html#automatic-re-weighting"><i class="fa fa-check"></i><b>10.3</b> Automatic re-weighting</a></li>
<li class="chapter" data-level="10.4" data-path="weighting.html"><a href="weighting.html#manual-re-weighting"><i class="fa fa-check"></i><b>10.4</b> Manual re-weighting</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="helper-functions.html"><a href="helper-functions.html"><i class="fa fa-check"></i><b>11</b> Helper functions</a><ul>
<li class="chapter" data-level="11.1" data-path="helper-functions.html"><a href="helper-functions.html#r-interfaces"><i class="fa fa-check"></i><b>11.1</b> R Interfaces</a><ul>
<li class="chapter" data-level="11.1.1" data-path="helper-functions.html"><a href="helper-functions.html#data-import"><i class="fa fa-check"></i><b>11.1.1</b> Data import</a></li>
<li class="chapter" data-level="11.1.2" data-path="helper-functions.html"><a href="helper-functions.html#export-to-excel"><i class="fa fa-check"></i><b>11.1.2</b> Export to Excel</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="helper-functions.html"><a href="helper-functions.html#selecting-data-sets-and-indicators"><i class="fa fa-check"></i><b>11.2</b> Selecting data sets and indicators</a></li>
<li class="chapter" data-level="11.3" data-path="helper-functions.html"><a href="helper-functions.html#rounding-data-frames"><i class="fa fa-check"></i><b>11.3</b> Rounding data frames</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html"><i class="fa fa-check"></i><b>12</b> Appendix: R Resources</a><ul>
<li class="chapter" data-level="12.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#introduction-to-r"><i class="fa fa-check"></i><b>12.1</b> Introduction to R</a></li>
<li class="chapter" data-level="12.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#advanced-resources"><i class="fa fa-check"></i><b>12.2</b> Advanced resources</a><ul>
<li class="chapter" data-level="12.2.1" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#programming"><i class="fa fa-check"></i><b>12.2.1</b> Programming</a></li>
<li class="chapter" data-level="12.2.2" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#visualisation"><i class="fa fa-check"></i><b>12.2.2</b> Visualisation</a></li>
<li class="chapter" data-level="12.2.3" data-path="appendix-r-resources.html"><a href="appendix-r-resources.html#other"><i class="fa fa-check"></i><b>12.2.3</b> Other</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>13</b> Acknowledgements</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">COINr: An R Package for Composite Indicator Development and Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="missing-data-and-imputation" class="section level1">
<h1><span class="header-section-number">Chapter 5</span> Missing data and Imputation</h1>
<p>Imputation is the process of estimating missing data points. This can be done in any number of ways, and as usual, the “best” way depends on the problem.</p>
<p>Of course, you don’t <em>have</em> to impute data. You can also simply delete any indicator or unit that has missing values, although in many cases this can be too restrictive. Reasonable results can still be obtained despite small amounts of missing data, although if too much data is missing, the uncertainty can be too high to give a meaningful analysis. As usual, it is a balance.</p>
<p>A good first step is to check how much data is missing, and where (see below). Units with very high amounts of missing data can be screened out. Small amounts of missing data can then be imputed.</p>
<div id="concept" class="section level2">
<h2><span class="header-section-number">5.1</span> Concept</h2>
<p>The simplest imputation approach is to use values of other units to estimate the missing point. Typically, this could involve the sample mean or median of the indicator. Here’s some data from the ASEM data set regarding the average connection speed of each country. Towards the end there are some missing values, so let’s view the last few rows:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="missing-data-and-imputation.html#cb22-1"></a><span class="kw">library</span>(COINr)</span>
<span id="cb22-2"><a href="missing-data-and-imputation.html#cb22-2"></a>Ind1 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">Country =</span> ASEMIndData<span class="op">$</span>UnitName, <span class="dt">ConSpeed =</span> ASEMIndData<span class="op">$</span>ConSpeed)</span>
<span id="cb22-3"><a href="missing-data-and-imputation.html#cb22-3"></a>Ind1[<span class="dv">40</span><span class="op">:</span><span class="kw">nrow</span>(Ind1),]</span></code></pre></div>
<pre><code>##               Country ConSpeed
## 40              Korea     28.6
## 41            Lao PDR       NA
## 42           Malaysia      8.9
## 43           Mongolia       NA
## 44            Myanmar       NA
## 45        New Zealand     14.7
## 46           Pakistan       NA
## 47        Philippines      5.5
## 48 Russian Federation     11.8
## 49          Singapore     20.3
## 50           Thailand     16.0
## 51            Vietnam      9.5</code></pre>
<p>Using our simple imputation method, we just replace the <code>NA</code> values with the sample mean.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="missing-data-and-imputation.html#cb24-1"></a>Ind1<span class="op">$</span>ConSpeed &lt;-<span class="st"> </span><span class="kw">replace</span>(Ind1<span class="op">$</span>ConSpeed, <span class="kw">is.na</span>(Ind1<span class="op">$</span>ConSpeed), <span class="kw">mean</span>(Ind1<span class="op">$</span>ConSpeed, <span class="dt">na.rm =</span> T))</span>
<span id="cb24-2"><a href="missing-data-and-imputation.html#cb24-2"></a>Ind1[<span class="dv">40</span><span class="op">:</span><span class="kw">nrow</span>(Ind1),]</span></code></pre></div>
<pre><code>##               Country ConSpeed
## 40              Korea 28.60000
## 41            Lao PDR 14.28605
## 42           Malaysia  8.90000
## 43           Mongolia 14.28605
## 44            Myanmar 14.28605
## 45        New Zealand 14.70000
## 46           Pakistan 14.28605
## 47        Philippines  5.50000
## 48 Russian Federation 11.80000
## 49          Singapore 20.30000
## 50           Thailand 16.00000
## 51            Vietnam  9.50000</code></pre>
<p>This approach can be reasonable if countries are somehow similar in that indicator. However, other perhaps more informative ways are available:</p>
<ul>
<li>Substituting by the mean or median of the country group (e.g. income group or continent)</li>
<li>If time series data is available, use the latest known data point</li>
</ul>
<p>Then there is another class of methods which use data from other indicators to estimate the missing point. The core idea here is that if the indicators are related to one another, it is possible to guess the missing point by using known values of other indicators. This can take the form of:</p>
<ul>
<li>Simply substituting the mean or median of the <em>normalised</em> values of the other indicators</li>
<li>Subsituting the mean or median of <em>normalised</em> values of the other indicators <em>within the aggregation group</em></li>
<li>Using a more formal approach, based on regression or more generally on statistical modelling</li>
</ul>
<p>Let’s explore the options available in COINr</p>
</div>
<div id="data-checks-and-screening" class="section level2">
<h2><span class="header-section-number">5.2</span> Data checks and screening</h2>
<p>A first step is to check in detail how much data missing. The function <code>checkData()</code> does this, and also has the option to screen units based on data availability.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="missing-data-and-imputation.html#cb26-1"></a><span class="co"># Assemble ASEM data first</span></span>
<span id="cb26-2"><a href="missing-data-and-imputation.html#cb26-2"></a>ASEM &lt;-<span class="st"> </span><span class="kw">assemble</span>(<span class="dt">IndData =</span> COINr<span class="op">::</span>ASEMIndData, <span class="dt">IndMeta =</span> COINr<span class="op">::</span>ASEMIndMeta,</span>
<span id="cb26-3"><a href="missing-data-and-imputation.html#cb26-3"></a>                 <span class="dt">AggMeta =</span> COINr<span class="op">::</span>ASEMAggMeta)</span>
<span id="cb26-4"><a href="missing-data-and-imputation.html#cb26-4"></a><span class="co">## -----------------</span></span>
<span id="cb26-5"><a href="missing-data-and-imputation.html#cb26-5"></a><span class="co">## Denominators detected - stored in .$Input$Denominators</span></span>
<span id="cb26-6"><a href="missing-data-and-imputation.html#cb26-6"></a><span class="co">## -----------------</span></span>
<span id="cb26-7"><a href="missing-data-and-imputation.html#cb26-7"></a><span class="co">## -----------------</span></span>
<span id="cb26-8"><a href="missing-data-and-imputation.html#cb26-8"></a><span class="co">## Indicator codes cross-checked and OK.</span></span>
<span id="cb26-9"><a href="missing-data-and-imputation.html#cb26-9"></a><span class="co">## -----------------</span></span>
<span id="cb26-10"><a href="missing-data-and-imputation.html#cb26-10"></a><span class="co">## Number of indicators = 49</span></span>
<span id="cb26-11"><a href="missing-data-and-imputation.html#cb26-11"></a><span class="co">## Number of units = 51</span></span>
<span id="cb26-12"><a href="missing-data-and-imputation.html#cb26-12"></a><span class="co">## Number of reference years of data = 1</span></span>
<span id="cb26-13"><a href="missing-data-and-imputation.html#cb26-13"></a><span class="co">## Years from 2018 to 2018</span></span>
<span id="cb26-14"><a href="missing-data-and-imputation.html#cb26-14"></a><span class="co">## Number of aggregation levels = 3 above indicator level.</span></span>
<span id="cb26-15"><a href="missing-data-and-imputation.html#cb26-15"></a><span class="co">## -----------------</span></span>
<span id="cb26-16"><a href="missing-data-and-imputation.html#cb26-16"></a><span class="co">## Aggregation level 1 with 8 aggregate groups: Physical, ConEcFin, Political, Instit, P2P, Environ, Social, SusEcFin</span></span>
<span id="cb26-17"><a href="missing-data-and-imputation.html#cb26-17"></a><span class="co">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb26-18"><a href="missing-data-and-imputation.html#cb26-18"></a><span class="co">## Aggregation level 2 with 2 aggregate groups: Conn, Sust</span></span>
<span id="cb26-19"><a href="missing-data-and-imputation.html#cb26-19"></a><span class="co">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb26-20"><a href="missing-data-and-imputation.html#cb26-20"></a><span class="co">## Aggregation level 3 with 1 aggregate groups: Index</span></span>
<span id="cb26-21"><a href="missing-data-and-imputation.html#cb26-21"></a><span class="co">## Cross-check between metadata and framework = OK.</span></span>
<span id="cb26-22"><a href="missing-data-and-imputation.html#cb26-22"></a><span class="co">## -----------------</span></span>
<span id="cb26-23"><a href="missing-data-and-imputation.html#cb26-23"></a><span class="co"># Missing data check on the raw data set</span></span>
<span id="cb26-24"><a href="missing-data-and-imputation.html#cb26-24"></a>ASEM &lt;-<span class="st"> </span><span class="kw">checkData</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Raw&quot;</span>)</span>
<span id="cb26-25"><a href="missing-data-and-imputation.html#cb26-25"></a><span class="kw">head</span>(ASEM<span class="op">$</span>Analysis<span class="op">$</span>Raw<span class="op">$</span>MissDatSummary)</span>
<span id="cb26-26"><a href="missing-data-and-imputation.html#cb26-26"></a><span class="co">##   UnitCode N_missing PrcDataAll LowDataAll</span></span>
<span id="cb26-27"><a href="missing-data-and-imputation.html#cb26-27"></a><span class="co">## 1      AUT         0        100      FALSE</span></span>
<span id="cb26-28"><a href="missing-data-and-imputation.html#cb26-28"></a><span class="co">## 2      BEL         0        100      FALSE</span></span>
<span id="cb26-29"><a href="missing-data-and-imputation.html#cb26-29"></a><span class="co">## 3      BGR         0        100      FALSE</span></span>
<span id="cb26-30"><a href="missing-data-and-imputation.html#cb26-30"></a><span class="co">## 4      HRV         0        100      FALSE</span></span>
<span id="cb26-31"><a href="missing-data-and-imputation.html#cb26-31"></a><span class="co">## 5      CYP         0        100      FALSE</span></span>
<span id="cb26-32"><a href="missing-data-and-imputation.html#cb26-32"></a><span class="co">## 6      CZE         0        100      FALSE</span></span></code></pre></div>
<p>The <code>MissDataSummary</code> table shows the unit code, number of missing observations, and overall percentage data availability. Finally, the <code>LowDataAll</code> column can be used as a flag for units with data availability lower than a set amount <code>ind_thresh</code> which is one of the input arguments to <code>checkData()</code>. ASEM indicators were already chosen to fulfill minimum data requirements, for which reason the data availability is all above the default of 2/3.</p>
<p>We will set the minimum data threshold a bit higher, and in doing so also demonstrate another feature of <code>checkData()</code>, which is to automatically screen units based on data availability. Setting <code>unit_screen = TRUE</code> will generate a new data set <code>.$Data$Screened</code> which only includes units with data availability above the set threshold. This data set can then be passed on to subsequent operations.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="missing-data-and-imputation.html#cb27-1"></a><span class="co"># Missing data check on the raw data set</span></span>
<span id="cb27-2"><a href="missing-data-and-imputation.html#cb27-2"></a>ASEM &lt;-<span class="st"> </span><span class="kw">checkData</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="dt">ind_thresh =</span> <span class="fl">0.85</span>, <span class="dt">unit_screen =</span> <span class="ot">TRUE</span>)</span>
<span id="cb27-3"><a href="missing-data-and-imputation.html#cb27-3"></a>ASEM<span class="op">$</span>Analysis<span class="op">$</span>Raw<span class="op">$</span>RemovedUnits</span></code></pre></div>
<pre><code>## [1] &quot;BRN&quot; &quot;LAO&quot; &quot;MMR&quot;</code></pre>
<p>This generates a new data set <code>.$Data$Screened</code> with the removed units recorded in <code>.$Analysis$Raw$RemovedUnits</code>, which in this case are Brunei, Laos and Myanmar. As a final option to mention, you can manually include or exclude units. So for example, a unit that doesn’t have sufficient data coverage could be manually included anyway, and another unit could be excluded.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="missing-data-and-imputation.html#cb29-1"></a><span class="co"># Countries to include and exclude</span></span>
<span id="cb29-2"><a href="missing-data-and-imputation.html#cb29-2"></a>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">UnitCode =</span> <span class="kw">c</span>(<span class="st">&quot;AUT&quot;</span>,<span class="st">&quot;BRN&quot;</span>), <span class="dt">Status =</span> <span class="kw">c</span>(<span class="st">&quot;Exclude&quot;</span>, <span class="st">&quot;Include&quot;</span>))</span>
<span id="cb29-3"><a href="missing-data-and-imputation.html#cb29-3"></a></span>
<span id="cb29-4"><a href="missing-data-and-imputation.html#cb29-4"></a><span class="co"># Missing data check on the raw data set</span></span>
<span id="cb29-5"><a href="missing-data-and-imputation.html#cb29-5"></a>ASEM &lt;-<span class="st"> </span><span class="kw">checkData</span>(ASEM, <span class="dt">dset =</span> <span class="st">&quot;Raw&quot;</span>, <span class="dt">ind_thresh =</span> <span class="fl">0.85</span>, <span class="dt">unit_screen =</span> <span class="ot">TRUE</span>, <span class="dt">Force =</span> df)</span>
<span id="cb29-6"><a href="missing-data-and-imputation.html#cb29-6"></a>ASEM<span class="op">$</span>Analysis<span class="op">$</span>Raw<span class="op">$</span>RemovedUnits</span></code></pre></div>
<pre><code>## [1] &quot;AUT&quot; &quot;LAO&quot; &quot;MMR&quot;</code></pre>
<p>Now AUT has been excluded, even though it had sufficient data coverage, and BRN has been manually included, even though it didn’t. The intention is to give some flexibility to make exceptions for hard rules.</p>
<p>The other output of interest from <code>checkData()</code> is missing data by group:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="missing-data-and-imputation.html#cb31-1"></a><span class="kw">head</span>(ASEM<span class="op">$</span>Analysis<span class="op">$</span>Raw<span class="op">$</span>MissDatByGroup[<span class="dv">30</span><span class="op">:</span><span class="dv">40</span>,])</span></code></pre></div>
<pre><code>##    UnitCode Physical ConEcFin Political    Instit P2P Environ    Social
## 30      GBR    100.0      100       100 100.00000 100     100 100.00000
## 31      AUS    100.0      100       100 100.00000 100     100 100.00000
## 32      BGD     87.5      100       100  83.33333  75     100  88.88889
## 33      BRN     87.5       80       100 100.00000  75     100  55.55556
## 34      KHM     87.5       80       100 100.00000  75     100  77.77778
## 35      CHN    100.0      100       100 100.00000 100     100 100.00000
##    SusEcFin      Conn      Sust     Index
## 30      100 100.00000 100.00000 100.00000
## 31      100 100.00000 100.00000 100.00000
## 32       80  86.66667  89.47368  87.75510
## 33       60  86.66667  68.42105  79.59184
## 34      100  86.66667  89.47368  87.75510
## 35       80 100.00000  94.73684  97.95918</code></pre>
<p>This gives the percentage indicator data availability inside each aggregation group.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="initial-visualisation-and-analysis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="denomination.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/03-imputation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["COINr-documentation.pdf", "COINr-documentation.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
